<head>
<meta charset="utf-8">
	
	<meta name="ROBOTS" content="NOARCHIVE">
	<title>Economist subscription offer</title>
	<meta name="description" content="Subscribe today and join the 6 million people worldwide who enjoy The Economist each week. Subscribers can enjoy each week's complete issue of The Economist in print, at Economist.com or via The Economist apps.">

	<link rel="stylesheet" href="/css/econglob.css">
	<link href="/css/ui-lightness/jquery-ui-1.8.23.custom.css" rel="stylesheet">
		
	<!-- hackos -->
	<script type="text/javascript" src="/js/jquery-1.8.0.min.js"></script>
	<script type="text/javascript" src="/js/jquery.json.js"></script>
	<script type="text/javascript" src="/js/jquery-ui-1.8.23.custom.min.js"></script>
	<script type="text/javascript" src="/js/jquery-tooltip/jquery.tooltip.js"></script>
	<script type="text/javascript" src="/js/base64.js"></script>

	
	<script type="text/javascript">
	$.exists=function(selector) {return ($(selector).length > 0);}
	</script>

	<style type="text/css">
	     div#users-contain { width: 350px; margin: 20px 0; }
	     div#users-contain table { margin: 1em 0; border-collapse: collapse; width: 100%; }
	     div#users-contain table td, div#users-contain table th { border: 1px solid #eee; padding: .6em 10px; text-align: left; }
	    .ui-dialog .ui-state-error { padding: .3em; }
	    .validateTips { border: 1px solid transparent; padding: 0.3em; }
	</style>
	



    

</head>
<body>

<!-- czois: exceptions -->



<div id="container">

<noscript>
<div class="nojava" id="alert_box">
   <table>
      <tr>
	<td>
    	    <img src="http://media.economist.com/sites/all/themes/econfinal/images/icons/icon-warning.png">
	</td>
	<td>
   	<font style="font-family: Verdana, Arial, sans-serif;font-size: 11px;">
	&nbsp;This page requires your browser to be JavaScript enabled. Please enable JavaScript in order to view content.
	</font>
	</td>
      </tr>
    </table>
</div>
</noscript> 

<form id="orderform" action="index.php" method="POST" name="orderform">

<table width="100%" border="0" cellpadding="0" cellspacing="0">
	<tbody><tr id="header">
		            <td valign="top" align="left">
                    <div id="leftLogoID"><a href="#" onclick="clickImgURL('http://www.economist.com');"> <img src="/gfx_stylebooster/econ/1362763054_banner1_new.jpg" height="191" width="1020"> </a></div>
            </td>
	</tr>
	<tr height="20"><td></td> </tr>
	<tr>
		<td valign="top" align="left">
						<table width="100%" border="0" cellpadding="0" cellspacing="0">
			<tbody><tr>	
				<td class="css3_title1" align="left"> 
					<div id="countryTitleID"><span style="font-size: 20px;"><strong>Choose your subscription</strong></span></div>
				</td>
				<td align="right">
					<table border="0" cellpadding="0" cellspacing="0">
					<tbody><tr>
					<td class="css3_nfont" align="left">
						Change country:
					</td>	
					<td width="10"> &nbsp; </td>	
					<td align="left">		
					<select name="country" id="country" class="long">
																			<option value="AF"> Afghanistan </option>
													<option value="AL"> Albania </option>
													<option value="DZ"> Algeria </option>
													<option value="AS"> American Samoa </option>
													<option value="AD"> Andorra </option>
													<option value="AO"> Angola </option>
													<option value="AI"> Anguilla </option>
													<option value="AG"> Antigua and Barbuda </option>
													<option value="AR"> Argentina </option>
													<option value="AM"> Armenia </option>
													<option value="AW"> Aruba </option>
													<option value="AU"> Australia </option>
													<option value="AT"> Austria </option>
													<option value="AZ"> Azerbaijan </option>
													<option value="BS"> Bahamas </option>
													<option value="BH"> Bahrain </option>
													<option value="BD"> Bangladesh </option>
													<option value="BB"> Barbados </option>
													<option value="BY"> Belarus </option>
													<option value="BE"> Belgium </option>
													<option value="BZ"> Belize </option>
													<option value="BJ"> Benin </option>
													<option value="BM"> Bermuda </option>
													<option value="BT"> Bhutan </option>
													<option value="BO"> Bolivia </option>
													<option value="BA"> Bosnia-Hercegovina </option>
													<option value="BW"> Botswana </option>
													<option value="BR"> Brazil </option>
													<option value="IO"> British Indian Ocean Territory </option>
													<option value="BN"> Brunei </option>
													<option value="BG"> Bulgaria </option>
													<option value="BF"> Burkina Faso </option>
													<option value="BI"> Burundi </option>
													<option value="KH"> Cambodia </option>
													<option value="CM"> Cameroon </option>
													<option value="CA"> Canada </option>
													<option value="CV"> Cape Verde </option>
													<option value="KY"> Cayman Islands </option>
													<option value="CF"> Central African Republic </option>
													<option value="TD"> Chad </option>
													<option value="CL"> Chile </option>
													<option value="CN"> China </option>
													<option value="CX"> Christmas Island </option>
													<option value="CC"> Cocos (Keeling) Islands </option>
													<option value="CO"> Colombia </option>
													<option value="KM"> Comoros </option>
													<option value="CG"> Congo </option>
													<option value="CD"> Congo, Dem Rep of </option>
													<option value="CK"> Cook Islands </option>
													<option value="CR"> Costa Rica </option>
													<option value="HR"> Croatia </option>
													<option value="CU"> Cuba </option>
													<option value="CY"> Cyprus </option>
													<option value="CZ"> Czech Republic </option>
													<option value="DK"> Denmark </option>
													<option value="DJ"> Djibouti </option>
													<option value="DM"> Dominica </option>
													<option value="DO"> Dominican Republic </option>
													<option value="TL"> East Timor </option>
													<option value="EC"> Ecuador </option>
													<option value="EG"> Egypt </option>
													<option value="SV"> El Salvador </option>
													<option value="GQ"> Equatorial Guinea </option>
													<option value="ER"> Eritrea </option>
													<option value="EE"> Estonia </option>
													<option value="ET"> Ethiopia </option>
													<option value="FK"> Falkland Islands </option>
													<option value="FO"> Faroe Islands </option>
													<option value="FJ"> Fiji </option>
													<option value="FI"> Finland </option>
													<option value="FR"> France </option>
													<option value="GF"> French Guiana </option>
													<option value="PF"> French Polynesia </option>
													<option value="TF"> French Southern Territories </option>
													<option value="GA"> Gabon </option>
													<option value="GM"> Gambia </option>
													<option value="GE"> Georgia </option>
													<option value="DE"> Germany </option>
													<option value="GH"> Ghana </option>
													<option value="GI"> Gibraltar </option>
													<option value="GR"> Greece </option>
													<option value="GL"> Greenland </option>
													<option value="GD"> Grenada </option>
													<option value="GP"> Guadeloupe </option>
													<option value="GU"> Guam </option>
													<option value="GT"> Guatemala </option>
													<option value="GN"> Guinea </option>
													<option value="GW"> Guinea-Bissau </option>
													<option value="GY"> Guyana </option>
													<option value="HT"> Haiti </option>
													<option value="HM"> Heard Island and McDonald Is </option>
													<option value="HN"> Honduras </option>
													<option value="HK"> Hong Kong </option>
													<option value="HU"> Hungary </option>
													<option value="IS"> Iceland </option>
													<option value="IN"> India </option>
													<option value="ID"> Indonesia </option>
													<option value="IR"> Iran </option>
													<option value="IQ"> Iraq </option>
													<option value="IE"> Ireland </option>
													<option value="IL"> Israel </option>
													<option value="IT"> Italy </option>
													<option value="CI"> Ivory Coast </option>
													<option value="JM"> Jamaica </option>
													<option value="JP"> Japan </option>
													<option value="JO"> Jordan </option>
													<option value="KZ"> Kazakhstan </option>
													<option value="KE"> Kenya </option>
													<option value="KG"> Kirgizstan </option>
													<option value="KI"> Kiribati </option>
													<option value="KO"> Kosovo </option>
													<option value="KW"> Kuwait </option>
													<option value="LA"> Laos </option>
													<option value="LV"> Latvia </option>
													<option value="LB"> Lebanon </option>
													<option value="LS"> Lesotho </option>
													<option value="LR"> Liberia </option>
													<option value="LY"> Libya </option>
													<option value="LI"> Liechtenstein </option>
													<option value="LT"> Lithuania </option>
													<option value="LU"> Luxembourg </option>
													<option value="MO"> Macao </option>
													<option value="MK"> Macedonia, FYR </option>
													<option value="MG"> Madagascar </option>
													<option value="MW"> Malawi </option>
													<option value="MY"> Malaysia </option>
													<option value="MV"> Maldives </option>
													<option value="ML"> Mali </option>
													<option value="MT"> Malta </option>
													<option value="MH"> Marshall Islands </option>
													<option value="MQ"> Martinique </option>
													<option value="MR"> Mauritania </option>
													<option value="MU"> Mauritius </option>
													<option value="YT"> Mayotte </option>
													<option value="MX"> Mexico </option>
													<option value="FM"> Micronesia, Fed States of </option>
													<option value="MD"> Moldova </option>
													<option value="MC"> Monaco </option>
													<option value="MN"> Mongolia </option>
													<option value="ME"> Montenegro </option>
													<option value="MS"> Montserrat </option>
													<option value="MA"> Morocco </option>
													<option value="MZ"> Mozambique </option>
													<option value="MM"> Myanmar </option>
													<option value="NA"> Namibia </option>
													<option value="NR"> Nauru </option>
													<option value="NP"> Nepal </option>
													<option value="NL"> Netherlands </option>
													<option value="AN"> Netherlands Antilles </option>
													<option value="NC"> New Caledonia </option>
													<option value="NZ"> New Zealand </option>
													<option value="NI"> Nicaragua </option>
													<option value="NE"> Niger </option>
													<option value="NG"> Nigeria </option>
													<option value="NU"> Niue </option>
													<option value="NF"> Norfolk Island </option>
													<option value="KP"> North Korea </option>
													<option value="MP"> Northern Mariana Islands </option>
													<option value="NO"> Norway </option>
													<option value="OM"> Oman </option>
													<option value="PK"> Pakistan </option>
													<option value="PW"> Palau </option>
													<option value="PS"> Palestine </option>
													<option value="PA"> Panama </option>
													<option value="PG"> Papua New Guinea </option>
													<option value="PY"> Paraguay </option>
													<option value="PE"> Peru </option>
													<option value="PH"> Philippines </option>
													<option value="PN"> Pitcairn Island </option>
													<option value="PL"> Poland </option>
													<option value="PT"> Portugal </option>
													<option value="PR"> Puerto Rico </option>
													<option value="QA"> Qatar </option>
													<option value="RE"> Reunion </option>
													<option value="RO"> Romania </option>
													<option value="RU"> Russia </option>
													<option value="RW"> Rwanda </option>
													<option value="SH"> Saint Helena </option>
													<option value="KN"> Saint Kitts and Nevis </option>
													<option value="LC"> Saint Lucia </option>
													<option value="VC"> Saint Vincent and Grenadines </option>
													<option value="WS"> Samoa </option>
													<option value="SM"> San Marino </option>
													<option value="ST"> Sao Tome and Principe </option>
													<option value="SA"> Saudi Arabia </option>
													<option value="SN"> Senegal </option>
													<option value="RS"> Serbia </option>
													<option value="SC"> Seychelles </option>
													<option value="SL"> Sierra Leone </option>
													<option value="SG"> Singapore </option>
													<option value="SK"> Slovakia </option>
													<option value="SI"> Slovenia </option>
													<option value="SB"> Solomon Islands </option>
													<option value="SO"> Somalia </option>
													<option value="ZA"> South Africa </option>
													<option value="GS"> South Georgia </option>
													<option value="KR"> South Korea </option>
													<option value="ES"> Spain </option>
													<option value="LK"> Sri Lanka </option>
													<option value="SD"> Sudan </option>
													<option value="SR"> Suriname </option>
													<option value="SZ"> Swaziland </option>
													<option value="SE"> Sweden </option>
													<option value="CH"> Switzerland </option>
													<option value="SY"> Syria </option>
													<option value="TW"> Taiwan </option>
													<option value="TJ"> Tajikistan </option>
													<option value="TZ"> Tanzania </option>
													<option value="TH"> Thailand </option>
													<option value="TG"> Togo </option>
													<option value="TK"> Tokelau </option>
													<option value="TO"> Tonga </option>
													<option value="TT"> Trinidad and Tobago </option>
													<option value="TN"> Tunisia </option>
													<option value="TR"> Turkey </option>
													<option value="TM"> Turkmenistan </option>
													<option value="TC"> Turks and Caicos Islands </option>
													<option value="TV"> Tuvalu </option>
													<option value="UM"> US Minor Outlying Is </option>
													<option value="UG"> Uganda </option>
													<option value="UA"> Ukraine </option>
													<option value="AE"> United Arab Emirates </option>
													<option value="GB"> United Kingdom </option>
													<option value="US" selected="selected"> United States </option>
													<option value="UY"> Uruguay </option>
													<option value="UZ"> Uzbekistan </option>
													<option value="VU"> Vanuatu </option>
													<option value="VE"> Venezuela </option>
													<option value="VN"> Vietnam </option>
													<option value="VG"> Virgin Islands, British </option>
													<option value="VI"> Virgin Islands, US </option>
													<option value="EH"> Western Sahara </option>
													<option value="YE"> Yemen </option>
													<option value="ZM"> Zambia </option>
													<option value="ZW"> Zimbabwe </option>
											</select>
					</td>
					</tr>
					</tbody></table>
				</td>
			</tr>
			</tbody></table>		</td>
        </tr>
		
	<tr height="20"><td></td> </tr>
        <tr>
		<td valign="top" align="left">
		      



<div id="tabber">
   <table style="border-bottom:3px solid #333" width="100%" border="0" cellpadding="0" cellspacing="0">
	<tbody><tr>	
	<td valign="top" align="left">
	    <table border="0" cellpadding="0" cellspacing="0">
		<tbody><tr>
		 	
			  			   <td class="tabclass on" id="personalTabCopyID" style="border-right:thin inset; border-color:#333;" height="42" width="178" align="center">
				Regular subscription			   </td>
		 	
			  			   <td class="tabclass" id="studentTabCopyID" style="border-right:thin inset; border-color:#333;" height="42" width="178" align="center">
				Student subscription			   </td>
		 	
			  			   <td class="tabclass" id="personal_giftTabCopyID" style="border-right:thin inset; border-color:#333;" height="42" width="178" align="center">
				Gift subscription			   </td>
		 			
		  <td height="23" width="232" align="left">&nbsp; </td>
		 </tr>
	     </tbody></table>
	</td>
	 <td style="padding:10px" class="rensubclass" nowrap="" valign="top" align="right">
		<a id="a_renew_sub" onclick="location.href='http://www.economist.com/products/renew'">Renew existing subscription&nbsp; &gt; </a>
        </td>
	</tr>	
   </tbody></table>
</div>

		</td>
        </tr>
	<tr height="15"><td></td> </tr>
  	<tr>
		<td valign="top" align="left">
		<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tbody><tr>
		      <td valign="top" width="100%" align="left">
			<div id="outercontent">
				



<div id="content">
     <table width="100%" border="0" cellpadding="0" cellspacing="0">
     <tbody><tr>
     <td valign="top" align="left">
	<div id="main"> 
		
        <table width="100%" border="0" cellpadding="0" cellspacing="0">
        <tbody><tr>
        <td valign="top" align="left">
		<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tbody><tr>
		<td valign="top" align="left">
            
		                     <div class="css3_default_box">
                  
		     <table width="100%" border="0" cellpadding="0" cellspacing="0">	
		      <tbody><tr>
			    <td valign="top" align="left">	
				<table width="100%" border="0" cellpadding="0" cellspacing="0">	
				<tbody><tr>
				    <td width="10"> &nbsp; </td>
				    <td class="premium_img" id="premium_imgContainer" align="left"> 
					<div id="benefitPicID"><img src="/gfx_stylebooster/econ/1365675905_v2BundlePREMbig.png" height="180" width="180"></div>
				    </td>
				    <td valign="top" align="left">
					    <div class="ed_section" id="premiumContainer">
						<div id="benefitsTitleID"><span style="font-size: 20px;"><strong>Print + Digital subscription</strong></span><br><span style="font-size: 18px;"><span style="font-size: 20px;"><strong><span style="color: #ff0000;"> US$2.74</span> </strong></span><span style="font-size: 14px;">per week</span></span><br></div>
						<div id="benefitBulletsTitleID"></div>
						<div id="benefitBulletsID"><ul><li>Weekly delivery of <em>The Economist</em> in print</li><li>Full access to each week’s issue via<em> The Economist </em>apps for iPad, iPhone, Android, Windows 8, BlackBerry PlayBook and BlackBerry 10.</li><li>Full access to Economist.com and <em>The Economist</em> in audio</li><li>Special issue: The World In 2014 distributed to all subscribers active in December 2013</li></ul></div>

			
					<input id="benefitsTitleID_hidden" value="<span style=&quot;font-size: 20px;&quot;><strong>Print + Digital subscription</strong></span><br /><span style=&quot;font-size: 18px;&quot;><span style=&quot;font-size: 20px;&quot;><strong><span style=&quot;color: #ff0000;&quot;> #Currency##Price_Weekly#</span> </strong></span><span style=&quot;font-size: 14px;&quot;>per week</span></span><br />" type="hidden">
						<input id="benefitBulletsTitleID_hidden" value="" type="hidden">

					    </div>
				    </td>
				</tr>	
				</tbody></table>
			    </td>
			</tr>
			<tr height="10"><td></td></tr>
			<tr>
			   <td valign="top" align="left">
				<div class="ed_section lpad">
					<table width="100%" border="0" cellpadding="0" cellspacing="0">
					    <tbody><tr>	
					    <td valign="top" align="left">
						 <div id="offersSectionID">
						    <div id="offersTitleID"></div>
						    <div id="offersID"> 
<style>
    .offer_tr{ 
	cursor: pointer;
    }
</style>
             

		<table id="offertable" width="100%" border="0" cellpadding="0" cellspacing="0">
	    <tbody><tr><td><span id="offer_req"></span></td></tr>

	   		 
		 
		 
						
			<tr>
			<td style="padding-right:20px" valign="top" align="left">
			<table style="background: none repeat scroll 0% 0% rgb(240, 240, 240); padding: 0px;" id="tbl_offer_474USPLPPRODUCTHW0000102HCA" class="tbl_class" width="100%" border="0" cellpadding="7" cellspacing="0">
				<tbody><tr class="offer_tr" id="tr_474USPLPPRODUCTHW0000102HCA" value="tr_474USPLPPRODUCTHW0000102HCA">	
					<td valign="top" align="left">
					<table border="0" cellpadding="0" cellspacing="0">	
					<tbody><tr>
					<td valign="top" width="20" align="left"> <input checked="checked" name="offer" id="offer474USPLPPRODUCTHW0000102HCA" class="offerclass" value="474USPLPPRODUCTHW0000102HCA" style="border:0px" type="radio"> </td>
					<td width="5"> &nbsp; </td>
					<td style="padding-top:4px" align="left"><strong>2 years  <span style="\\\\\\\\\\\\\\\&quot;color:" #ff0000;\\\\\\\\\\\\\\\"=""><span style="color: #ff0000;"><span style="color: #ff0000;">US$279</span></span></span> save 66% BEST OFFER</strong><br> Four risk-free weeks plus 98 additional weeks for  US$2.74 per week  </td>
					</tr>
					</tbody></table>
					</td>
				</tr>
			</tbody></table>
			</td>	
			</tr>
			<tr height="10"><td></td></tr>
			   		 
		 
		 
						
			<tr>
			<td style="padding-right:20px" valign="top" align="left">
			<table style="background: none repeat scroll 0% 0% rgb(255, 255, 255);" id="tbl_offer_474USPLPPRODUCTHW000051HCA" class="tbl_class" width="100%" border="0" cellpadding="7" cellspacing="0">
				<tbody><tr class="offer_tr" id="tr_474USPLPPRODUCTHW000051HCA" value="tr_474USPLPPRODUCTHW000051HCA">	
					<td valign="top" align="left">
					<table border="0" cellpadding="0" cellspacing="0">	
					<tbody><tr>
					<td valign="top" width="20" align="left"> <input name="offer" id="offer474USPLPPRODUCTHW000051HCA" class="offerclass" value="474USPLPPRODUCTHW000051HCA" style="border:0px" type="radio"> </td>
					<td width="5"> &nbsp; </td>
					<td style="padding-top:4px" align="left"><strong></strong><strong>1 year  <span style="\\\\\\\\\\\\\\\&quot;color:" #ff0000;\\\\\\\\\\\\\\\"=""><span style="color: #ff0000;">US$160</span></span> save 61%</strong><br> Four risk-free weeks plus 47 additional weeks for US$3.14 per week  </td>
					</tr>
					</tbody></table>
					</td>
				</tr>
			</tbody></table>
			</td>	
			</tr>
			<tr height="10"><td></td></tr>
			   		 
		 
		 
						
			<tr>
			<td style="padding-right:20px" valign="top" align="left">
			<table style="background: none repeat scroll 0% 0% rgb(255, 255, 255);" id="tbl_offer_474USPLPPRODUCTHW000012RHA" class="tbl_class" width="100%" border="0" cellpadding="7" cellspacing="0">
				<tbody><tr class="offer_tr" id="tr_474USPLPPRODUCTHW000012RHA" value="tr_474USPLPPRODUCTHW000012RHA">	
					<td valign="top" align="left">
					<table border="0" cellpadding="0" cellspacing="0">	
					<tbody><tr>
					<td valign="top" width="20" align="left"> <input name="offer" id="offer474USPLPPRODUCTHW000012RHA" class="offerclass" value="474USPLPPRODUCTHW000012RHA" style="border:0px" type="radio"> </td>
					<td width="5"> &nbsp; </td>
					<td style="padding-top:4px" align="left"><strong></strong><strong></strong><strong>12 weeks auto-renewing at <span style="\\\\\\\\\\\\\\\&quot;color:" #ff0000;\\\\\\\\\\\\\\\"=""><span style="color: #ff0000;">US$45</span></span> save 53%</strong><br> 12 weeks auto-renewing for US$3.75 per week  </td>
					</tr>
					</tbody></table>
					</td>
				</tr>
			</tbody></table>
			</td>	
			</tr>
			<tr height="10"><td></td></tr>
			   	</tbody></table>


 </div>
						</div>

					    </td>
					    </tr>

						
					    					
							<tr>	
				<td style="padding-left:10px" valign="top" align="left">
				<table width="600" border="0" cellpadding="0" cellspacing="0">
		
									
					<tbody><tr>	
					<td valign="top" align="left">
						 <div class="medialnkclass" id="refundLinkCopy"> 
														More about our risk-free offer and money back guarantee&nbsp; <img id="refundLinkImg" src="/gfx/arrow_down.gif" border="0">
						</div>
						 
							<div id="refundBodyCopy" class="mediacontentclass" style="display:none">
								If you subscribe now and decide to cancel within the first four weeks of your subscription, you will receive a full refund.<br><br>After the first four risk-free weeks, if you are not completely satisfied, you will be refunded the un-served portion of your subscription.  <br><br>Offer valid for new subscribers only. Savings are based on the US$7.99 news-stand price (total of <span>US$814.98 for 2 years, US$407.49 for 1 year</span>, and US$95.88 for 12 weeks). 
							</div>
						
					</td>
					</tr>
					<tr height="10"><td></td></tr>
												<tr>	
				<td valign="top" align="left">
					 <div class="medialnkclass" id="audioLinkCopy"> 
												More about <em>The Economist</em> apps, Economist.com and <em>The Economist</em> in audio&nbsp; <img id="audioLinkImg" src="/gfx/arrow_down.gif" border="0">
					</div>
					 
						<div id="audioBodyCopy" class="mediacontentclass" style="display:none">
						 <strong><em></em></strong><strong><em>The Economist</em> apps</strong><br><br>Read and listen to each week’s complete issue of <em>The Economist</em> via iPad, iPhone, Android, Windows 8, BlackBerry PlayBook and BlackBerry 10, from 4pm EST each Thursday. Please note <em>The Economist</em> on Android operates on OS 2.3.x and OS 4.0.x only.  <br><br><strong>Economist.com </strong><br><br>Enjoy unlimited access to Economist.com, including every article from the print edition and full community participation.  <br><br><em><strong>The Economist</strong></em> <strong>in audio</strong><br><br>Listen to each week’s issue of <em>The Economist</em>, read by professional broadcasters.
						</div>
									</td>	
				</tr>
								</tbody></table>
				</td>	
				</tr>
					
				
        
					    
					    <tr height="10"><td></td></tr>
					    <tr>	
					    <td class="sub_lnk" valign="top" align="right">
												  <div id="osSubCompletionCopyID" class="rensubclass"><a href="#step1" onclick="var s=s_gi('economistcomprod');s.events='';s.prop45='';s.prop68='';s.prop69='';s.eVar65='';s.eVar66='';s.eVar67='';s.linkTrackVars='prop45,';s.prop45='subscription flow>complete your subscription';s.tl(this,'o','subscription flow>complete your subscription');">Complete your subscription &gt;</a></div>
											    </td>
					    </tr>
					</tbody></table>
				</div>
			</td>
			</tr>
			</tbody></table>
		     </div> <!-- end default_box -->
		</td>
				<td width="20"> &nbsp; </td>
		<td valign="top" width="356" align="left">
			  <div id="sidebar">
				 <div id="productSectionID">
	    
        				
        
	<div style="display: none;" id="box1" class="boxclass">
		<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tbody><tr>
		<td class="p_left" align="left">
            	   <div id="product1IDImg" class="boxclass_img"> <img src="/gfx_stylebooster/econ/1365675938_v2abundlePREM145.png" height="145" width="120"></div>
		</td>
		<td class="p_right" valign="top" align="left">
			<table border="0" cellpadding="0" cellspacing="0">
			<tbody><tr>
			<td class="css3_sidebar_header" valign="top" align="left">
                		<div id="product1IDTitle" class="boxclass_title"> <span style="font-size: 14px;"><strong>Print + Digital subscription</strong></span><br><span style="font-size: 14px;"><strong> </strong></span></div>
			</td>
			</tr>
			<tr height="5"><td></td></tr>
			<tr>		
			<td class="css3_sidebar_body" style="line-height:20px" valign="top" align="left">	
                		<div id="product1IDCopy" class="boxclass_copy"> <span style="font-size: 13px;"><strong><span style="color: #ff0000;">US$2.74 </span></strong>per week</span><br><span style="font-size: 13px;">Weekly delivery of <em>The Economist</em></span><br><span style="font-size: 13px;">Full access to each week’s issue  via <em>The Economist</em> apps </span><br><span style="font-size: 13px;">Full access to Economist.com</span></div>
			</td>
			</tr>	
			</tbody></table>
		</td>	
		</tr>
		</tbody></table>
	</div> 

        				
        
	<div style="display: block;" id="box2" class="boxclass">
		<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tbody><tr>
		<td class="p_left" align="left">
            	   <div id="product2IDImg" class="boxclass_img"> <img src="/gfx_stylebooster/econ/1365676894_v2bundlePRINT145.png" height="145" width="120"></div>
		</td>
		<td class="p_right" valign="top" align="left">
			<table border="0" cellpadding="0" cellspacing="0">
			<tbody><tr>
			<td class="css3_sidebar_header" valign="top" align="left">
                		<div id="product2IDTitle" class="boxclass_title"> <span style="font-size: 14px;"><strong>Print subscription</strong></span><span style="font-size: 14px;"><strong> </strong></span></div>
			</td>
			</tr>
			<tr height="5"><td></td></tr>
			<tr>		
			<td class="css3_sidebar_body" style="line-height:20px" valign="top" align="left">	
                		<div id="product2IDCopy" class="boxclass_copy"> <span style="font-size: 13px;"><strong><span style="color: #ff0000;">US$2.19 </span></strong>per week</span><br><span style="font-size: 13px;">Weekly delivery of <em>The Economist</em></span><br></div>
			</td>
			</tr>	
			</tbody></table>
		</td>	
		</tr>
		</tbody></table>
	</div> 

        				
        
	<div style="display: block;" id="box3" class="boxclass">
		<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tbody><tr>
		<td class="p_left" align="left">
            	   <div id="product3IDImg" class="boxclass_img"> <img src="/gfx_stylebooster/econ/1365676939_v2abundleAPP145.png" height="145" width="120"></div>
		</td>
		<td class="p_right" valign="top" align="left">
			<table border="0" cellpadding="0" cellspacing="0">
			<tbody><tr>
			<td class="css3_sidebar_header" valign="top" align="left">
                		<div id="product3IDTitle" class="boxclass_title"> <span style="font-size: 14px;"><strong>Digital subscription</strong></span><br><span style="font-size: 14px;"><strong> </strong></span></div>
			</td>
			</tr>
			<tr height="5"><td></td></tr>
			<tr>		
			<td class="css3_sidebar_body" style="line-height:20px" valign="top" align="left">	
                		<div id="product3IDCopy" class="boxclass_copy"> <span style="font-size: 13px;"><strong><span style="color: #ff0000;">US$2.19 </span></strong>per week </span><br><span style="font-size: 13px;">Full access to each week’s issue via <em>The Economist</em> apps plus full access to Economist.com</span></div>
			</td>
			</tr>	
			</tbody></table>
		</td>	
		</tr>
		</tbody></table>
	</div> 

</div>
			   </div>
		 </td>
				</tr>
		</tbody></table>
        </td>
        </tr>
        <tr height="20"><td></td></tr>
            
        <tr>
        <td valign="top" align="left">
		<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tbody><tr>
		<td valign="top" align="left">	
		
		   		   <div id="mainSectionID" style="width:652px;">
			    <table style="background:#FFF" width="100%" border="0" cellpadding="0" cellspacing="0">
				<tbody><tr>
				<td valign="top" align="left">
				    <div class="ed_section">
					<a name="step1">


<div id="acctContainer">

<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tbody><tr height="41" bgcolor="#4a4a4a">
<th class="sectiontitle" style="color:#FFF" align="left"><span class="css3_step">1.</span>
		<span id="accountDetailsTitleID"> 
		Your account 
		</span>
</th>
</tr>
<tr>
<td valign="top" align="left">
    <div class="css3_section" style="padding-top:20px">
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
	<tbody><tr>
		<td valign="top" align="left">
			
		<div id="accCheckBox" class="acctclass">
			<table width="100%" border="0" cellpadding="0" cellspacing="0">
			<tbody><tr>	
			<td valign="top" align="left">
			<table class="cbtable" border="0" cellpadding="0" cellspacing="0">
				<tbody><tr height="41" bgcolor="#F0F0F0">
					<td class="plspace" nowrap="" align="left"><span id="accountCheckboxCopyID">
						I already have an Economist account 
					</span></td>
					<td align="right"> <input name="acct_exists" id="acct_exists" value="Y" type="checkbox">  </td>
				</tr>
			</tbody></table>
			</td>
			<td valign="top" align="right">	
					<span id="progress_bar"></span>
			</td>
			</tr>	
			</tbody></table>
		</div>
	
		<div id="apiMsgError" class="acctclass" style="display:none;"> </div>
		
		<div id="acct_container" class="acctclass">
			<div style="display: block;" id="acct_fname_row" class="fieldclass">
				<table border="0" cellpadding="0" cellspacing="0">
				<tbody><tr><td align="left"><span id="acct_fname_req"></span></td></tr>
				<tr><td align="left"><input style="border: 1px solid rgb(204, 204, 204); color: rgb(74, 74, 74);" name="acct_fname" id="acct_fname" value="Given name*" class="inputclass required_field" maxlength="32" type="text"></td></tr>
                                 </tbody></table>
			</div>
			<div style="display: block;" id="acct_lname_row" class="fieldclass">
				<table border="0" cellpadding="0" cellspacing="0">
				<tbody><tr><td align="left"><span id="acct_lname_req"></span></td></tr>
				<tr><td align="left"><input style="border: 1px solid rgb(204, 204, 204); color: rgb(74, 74, 74);" name="acct_lname" id="acct_lname" value="Family name*" class="inputclass required_field" maxlength="32" type="text"></td></tr>
                                 </tbody></table>
			</div>
			<div style="display: block;" id="email_row" class="fieldclass">
				<table border="0" cellpadding="0" cellspacing="0">
				<tbody><tr><td align="left"><span id="email_req"></span></td></tr>
				<tr><td align="left"><input style="border: 1px solid rgb(204, 204, 204); color: rgb(74, 74, 74);" name="email" id="email" value="E-mail address*" class="inputclass required_field" maxlength="32" type="text">&nbsp;<span id="acct_progress"></span></td></tr>
                                 </tbody></table>
			</div>
			<div style="display: block;" id="cemail_row" class="fieldclass">
				<table border="0" cellpadding="0" cellspacing="0">
				<tbody><tr><td align="left"><span id="cemail_req"></span></td></tr>
				<tr>
					<td align="left"><input style="border: 1px solid rgb(204, 204, 204); color: rgb(74, 74, 74);" name="cemail" id="cemail" value="Confirm e-mail address*" class="inputclass required_field" maxlength="32" type="text"></td>
				</tr>
                                 </tbody></table>
			</div>
			<div style="display: block;" id="passwd_row" class="fieldclass">
				<table border="0" cellpadding="0" cellspacing="0">
				<tbody><tr><td align="left"><span id="passwd_req"></span></td></tr>
				<tr>
					<td align="left">
					<input style="border: 1px solid rgb(204, 204, 204); color: rgb(74, 74, 74); display: inline;" id="passwd-clear" value="Password*" autocomplete="off" type="text">
					<input style="border: 1px solid rgb(204, 204, 204); color: rgb(74, 74, 74); display: none;" name="passwd" id="passwd" value="Password*" class="inputclass required_field" maxlength="32" type="password">
					</td>
					<td width="40"> &nbsp; </td>
					<td style="font-size:12px; color:#8c8c8c; font-weight:normal;" align="left"><span id="passwdNote">Password must be at least 8 characters.</span></td>
				</tr>
                                 </tbody></table>
			</div>
			<div style="display: block;" id="cpasswd_row" class="fieldclass">
				<table border="0" cellpadding="0" cellspacing="0">
				<tbody><tr><td align="left"><span id="cpasswd_req"></span></td></tr>
				<tr><td align="left">
					<input style="border: 1px solid rgb(204, 204, 204); color: rgb(74, 74, 74); display: inline;" id="cpasswd-clear" value="Confirm password*" autocomplete="off" type="text">
					<input style="border: 1px solid rgb(204, 204, 204); color: rgb(74, 74, 74); display: none;" name="cpasswd" id="cpasswd" value="Confirm password*" class="inputclass required_field" maxlength="32" type="password">
				</td></tr>
                                 </tbody></table>
			</div>
			<div style="display: none;" id="acct_login_container" class="fieldclass">
				<table border="0" cellpadding="0" cellspacing="0">
                                        <tbody><tr>
                                                <td width="100" align="left">       
                                                        <div id="acct_login" class="css3_button_blue" style="width: 90px; display: none;"> 
							LOG IN
							</div>
                                                </td>
                                                <td width="10"> &nbsp; </td>
                                                <td class="rensubclass normal" align="left"><a id="forgotpass" href="http://www.economist.com/user/password" target="_blank">Forgot password?</a>  </td>
                                        </tr>   
                                 </tbody></table>

			</div>
		</div>
	
	
		<div id="acct_msg_container" class="acctclass" style="display:none"> 
			<div id="acct_message"></div>
                        <div id="acct_logout" class="css3_button_blue" style="width:90px;margin-top:10px;"> LOG OUT </div>
		</div>
		 
		</td>
	</tr>
	</tbody></table>
  </div>
</td>
</tr>
</tbody></table>


</div> <!-- end acctContainer -->

  
				    </a></div><a name="step1">
				</a></td>
				</tr>
				
				    
				<tr height="20"><td></td></tr>
				<tr>
				<td valign="top" align="left">
				    <div class="ed_section">
					



<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tbody><tr height="41" bgcolor="#4a4a4a">
	<th class="sectiontitle" align="left"><span class="css3_step">2.</span>
		<span id="paymentDetailsTitleID">Payment information 
					</span>
	</th>
</tr>
<tr bgcolor="#FFFFFF">
<td valign="top" align="left">
<div class="css3_section" style="padding-top:10px">
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tbody><tr>
			<td valign="top" align="left">
				
<div id="paymentSectionID">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
	<tbody><tr>
		<td style="padding:0;margin:0;" valign="top" align="left">
			   <div id="paymentFormID" style="padding: 0px; margin: 0px; opacity: 1;">	
			<div id="paymtabsID" style="padding: 10px 0px 0px; margin: 0px; display: none;">
			<span id="selected_paym_req"> </span>
			<table border="0" cellpadding="0" cellspacing="0">
			<tbody><tr>
																																	<td style="padding-top:5px" align="left">Credit card</td>
						<td width="5">&nbsp;</td>
						<td align="left"><input checked="checked" name="selected_paym" id="selected_paym_id" value="P" class="paymclass" type="radio"></td>
						<td width="20"> &nbsp; </td>
																																														
						</tr>
			
			</tbody></table>
		</div>
	
	<div style="padding:0;margin:0;">
		<div style="display: block; overflow: hidden; height: 134.429px; padding-top: 0px; margin-top: 0px;" id="ccformID" class="paymentformclass">
			<table width="100%" border="0" cellpadding="0" cellspacing="0">
			<tbody><tr>
			<td valign="top" align="left">
				
<table width="100%" border="0" cellpadding="0" cellspacing="0">
			<tbody><tr height="10"><td align="left"><span id="cc_holder_req"></span></td></tr>
			<tr>
				<td align="left"><input name="cc_holder" id="cc_holder" value="Name on card*" class="inputclass required_field" type="text"> </td>
			</tr>
			<tr height="10"><td align="left"><span id="cc_number_req"></span></td></tr>
			<tr>
				<td align="left"><input name="cc_number" id="cc_number" value="Card number*" class="inputclass required_field" type="text"> </td>
			</tr>
			<tr height="10"><td align="left"><span id="cc_type_req"></span></td></tr>
			<tr>
				<td align="left">
					<select name="cc_type" id="cc_type" class="inputclass required_field" style="border: 1px solid rgb(204, 204, 204); color: rgb(74, 74, 74);">
						<option value="" selected="selected">Card type* </option>
						<option value="Visa"> Visa </option>
						<option value="Mastercard"> Mastercard </option>
																				<option value="Amex"> American Express </option>
																					<option value="discover"> Discover </option>
																		</select>
				</td>
			</tr>
			<tr>
				<td align="left">
					<table border="0" cellpadding="0" cellspacing="0">
					<tbody><tr height="10"> 	
						<td align="left"><span id="cc_month_req"></span></td>
						<td width="10"> &nbsp; </td>
						<td align="left"><span id="cc_year_req"></span></td>
					</tr>
							
					<tr>	
						<td align="left">
							<select name="cc_month" id="cc_month" class="med required_field" style="border: 1px solid rgb(204, 204, 204); background: none repeat scroll 0% 0% rgb(255, 255, 255); color: rgb(74, 74, 74);">
							    <option value="" selected="">Expiration month*</option>
							    <option value="1">1</option>
							    <option value="2">2</option>
							    <option value="3">3</option>
							    <option value="4">4</option>
							    <option value="5">5</option>
							    <option value="6">6</option>
							    <option value="7">7</option>
							    <option value="8">8</option>
							    <option value="9">9</option>
							    <option value="10">10</option>
							    <option value="11">11</option>
							    <option value="12">12</option>
							</select>
						</td>
						<td width="10"> &nbsp; </td>
						<td align="left">
							<select name="cc_year" id="cc_year" class="med required_field" style="border: 1px solid rgb(204, 204, 204); background: none repeat scroll 0% 0% rgb(255, 255, 255); color: rgb(74, 74, 74);">
							    <option value="" selected="">Expiration year*</option>
							    							    							    								<option value="2013">2013</option>
							    								<option value="2014">2014</option>
							    								<option value="2015">2015</option>
							    								<option value="2016">2016</option>
							    								<option value="2017">2017</option>
							    								<option value="2018">2018</option>
							    								<option value="2019">2019</option>
							    								<option value="2020">2020</option>
							    								<option value="2021">2021</option>
							    							</select>
						</td>
					</tr>	
					</tbody></table>
				</td>
			</tr>

		
		</tbody></table>

			</td>
			<td width="40"> &nbsp; </td>
			<td style="padding-top:10px" valign="top" align="left">
                  		<span id="secureMsgID" style="font-size: 12px; color: rgb(140, 140, 140); font-weight: normal; display: inline;">Our secure software encrypts information to protect your transaction  </span>
			</td>
			</tr></tbody></table>
			
		</div>
		<div style="display: none;" id="ddformID" class="paymentformclass">
			
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
	<tbody><tr>
	<td valign="top" align="left">
		<table width="100%" border="0" cellpadding="0" cellspacing="0">
			<tbody><tr>
				<td width="400" align="left">
					<span id="dd_account_name_req"></span>
					<input name="dd_account_name" id="dd_account_name" value="Name of account holder*" maxlength="18" class="inputclass required_field" type="text"> 
				</td>
				<td width="40"> &nbsp; </td>
				<td valign="top" align="left">
					<img src="/gfx/cc/dd_logo.gif">
				</td>
			</tr>
			<tr height="10"><td></td></tr>
			<tr>
				<td align="left">
					<span id="dd_bank_code_req"></span>
					<input name="dd_bank_code" id="dd_bank_code" value="Bank sort code*" class="inputclass required_field" maxlength="6" type="text"> 
				</td>
				<td width="40"> &nbsp; </td>
				<td style="font-size:12px; color:#8c8c8c; font-weight:normal;" align="left">
						Enter bank sort code without spaces or special characters		
				</td>
			</tr>
			<tr height="10"><td></td></tr>
			<tr>
				<td align="left">
					<span id="dd_account_number_req"></span>
					<input name="dd_account_number" id="dd_account_number" value="Account number*" class="inputclass required_field" maxlength="10" type="text">
				</td>
				<td width="40"> &nbsp; </td>
				<td> </td>
			</tr>
		</tbody></table>
	</td>
	</tr></tbody></table>

		</div>
	</div>

</div>
			   <div class="fieldclass" id="ccmessageID" style="width: 400px; padding-top: 20px; display: block;">
				Your credit card will be charged <span style="color: rgb(203, 38, 44); font-weight: bold;" id="chargePrice">US$279</span>. Washington DC residents are subject to a local sales tax.			    </div>
		</td>
	</tr>
	<tr height="20"><td></td></tr>
	<tr>
		<td valign="top" width="400" align="left">
				<div id="arcontainer" class="csarclass" style="width: 400px; display: block;">
					<table width="100%" border="0" cellpadding="0" cellspacing="0">
						<tbody><tr>
						    <td valign="top" align="left">
							<div id="archeckcontainer">
							<table class="cbtable" border="0" cellpadding="0" cellspacing="0">
								<tbody><tr height="41" bgcolor="#F0F0F0">
								    <td style="padding-left:10px" nowrap="" align="left">
									<div id="autoRenewalTitleID">
																		    Automatic renewal
																		</div>
								    </td>
								    <td style="padding-right:10px" align="right">
									    <input id="archeck" name="AutoRen" type="checkbox">
								    </td>
								</tr>
								<tr height="10"><td></td></tr>
							</tbody></table>
							</div>
						     </td>
						</tr>
						<tr>
						    <td valign="top" align="left">
							    <div style="display: none;" id="autoRenewalCopyID" class="replace_osstrict_ph">
								
							     								<span style="font-size: 13px;">We'll continue your subscription to <em>The Economist</em> as long as you wish, without interruption, unless you tell us to stop. You may cancel at any time by contacting customer service and receive a full refund for all un-served issues. You authorize <em>The Economist</em> to charge your credit card now at the price indicated above. Your subscription term is defined as the time period you selected upon subscribing. We will send you notification by mail prior to processing the charge. In the event we cannot charge your card, you will receive an invoice by mail. Please print this for your records.</span>
							     							     </div>
						     </td>
						</tr>
					</tbody></table>
				</div>
		
				<div id="cscontainer" class="csarclass" style="width: 400px; display: none;">
					    <div id="continuousServiceCopyID" class="replace_osstrict_ph" style="padding-top:10px">
						     							Your subscription will automatically continue for as long as you choose to subscribe. The subscription fee will be billed at the beginning of your subscription and at each three month interval thereafter. If you decide to cancel within the first four weeks of your subscription, you will receive a full refund. If you cancel after the first four weeks, we will refund the un-served portion of your subscription.
						     					     </div>
				</div>



				
			  				         <div id="ddcontainer" class="csarclass" style="padding-top: 10px; width: 400px; display: none;">
					<div id="directDebitTitleID" class="ddlnkclass" style="padding-top: 10px; font-weight: bold; cursor: pointer;">
					     <strong>View <i>The Economist</i> Direct Debit Guarantee</strong>&nbsp;<img id="ddLinkImg" src="/gfx/arrow_down.gif" border="0">
					 </div>
					 
					<div id="directDebitCopyID" class="replace_osstrict_ph" style="margin-top: 10px; padding: 10px; background: none repeat scroll 0% 0% rgb(240, 240, 240); display: none;">
					    - This Guarantee is offered by all banks and building societies that accept instructions to pay Direct Debits<br>- If there are any changes to the amount, date or frequency of your Direct Debit <i>The Economist</i> will notify you 14 days in advance of your account being debited or as otherwise agreed. If you request <i>The Economist</i> to collect a payment, confirmation of the amount and date will be given to you at the time of the request.<br> - If an error is made in the payment of your Direct Debit by <i>The Economist</i> or your bank or building society you are entitled to a full and immediate refund of the amount paid from your bank or building society<br> - If you receive a refund you are not entitled to, you must pay it back when <i>The Economist</i> asks you to<br> - You can cancel a Direct Debit at any time by simply contacting your bank or building society.  Written confirmation<br>
					</div>
								  	</div>
				


		</td>
     </tr>
    </tbody></table>
</div>			</td>	
		</tr>
		<tr>
			<td valign="top" align="left">
				<div id="addressFormID">
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
	<tbody><tr height="20"><td></td></tr>
	<tr>
		<td valign="top" align="left">
					<div id="deliveryContainer" class="addressclass">
			 <div class="fieldclass css3_sectiontitle">
				<span id="deliveryDetailsTitleID">DELIVERY ADDRESS</span>
                        </div>

			 <div id="title_row" class="fieldclass">
                                <table border="0" cellpadding="0" cellspacing="0">
				<tbody><tr><td align="left"><span id="title_req"></span></td></tr>
				<tr><td align="left"><select style="border: 1px solid rgb(204, 204, 204); color: rgb(74, 74, 74);" name="title" id="title" class="med">
<option label="Suffix" value="">Suffix</option>
<option label="Mr" value="Mr">Mr</option>
<option label="Ms" value="Ms">Ms</option>
<option label="Mrs" value="Mrs">Mrs</option>
<option label="Miss" value="Miss">Miss</option>
<option label="Dr" value="Dr">Dr</option>
<option label="Sir" value="Sir">Sir</option>
</select>
</td></tr>
				</tbody></table>
                        </div>
			 <div id="fname_row" class="fieldclass">
                                <table border="0" cellpadding="0" cellspacing="0">
                                <tbody><tr><td align="left"><span id="fname_req"></span></td></tr>
                                <tr><td align="left"><input name="fname" id="fname" value="Given name*" class="inputclass required_field" maxlength="32" type="text"></td></tr>
				</tbody></table>
                        </div>

			 <div id="lname_row" class="fieldclass">
                                <table border="0" cellpadding="0" cellspacing="0">
				<tbody><tr><td align="left"> <span id="lname_req"></span></td></tr>
				<tr><td align="left"><input name="lname" id="lname" value="Family name*" class="inputclass required_field" maxlength="32" type="text"> </td></tr>
                                </tbody></table>
			</div>
			 <div id="telephone_row" class="fieldclass">
                                <table border="0" cellpadding="0" cellspacing="0">
				<tbody><tr><td align="left"><span id="telephone_req"></span></td></tr>
				<tr><td align="left"><input name="telephone" id="telephone" value="Contact phone number" class="inputclass" maxlength="30" type="text"> </td></tr>
                                </tbody></table>
			</div>
		
			 <div id="company_row" class="fieldclass">
                                <table border="0" cellpadding="0" cellspacing="0">
				<tbody><tr><td align="left"><span id="company_req"></span></td></tr>
				<tr><td align="left"><input name="company" id="company" value="Company name" class="inputclass" maxlength="30" type="text"> </td></tr>
                                </tbody></table>
			</div>
						
			<div id="address_row" class="fieldclass">
                                <table border="0" cellpadding="0" cellspacing="0">
								<tbody><tr><td align="left"><span id="address_req"></span></td></tr>
				<tr><td align="left"><input name="address" id="address" value="Address line 1*" class="inputclass required_field" maxlength="30" type="text"> </td></tr>
                                </tbody></table>
			</div>
						
			<div id="address2_row" class="fieldclass">
                                <table border="0" cellpadding="0" cellspacing="0">
				<tbody><tr><td align="left"><span id="address2_req"></span></td></tr>
				<tr><td align="left"><input name="address2" id="address2" value="Address line 2" class="inputclass" maxlength="30" type="text"></td></tr>
                                </tbody></table>
			</div>
				
							
											<div id="city_row" class="fieldclass">
					<table border="0" cellpadding="0" cellspacing="0">
					<tbody><tr><td align="left"><span id="city_req"></span></td></tr>
					<tr><td align="left"><input name="city" id="city" value="Town/City*" class="inputclass required_field" maxlength="30" type="text"> </td></tr>
					</tbody></table>
				</div>
							
		
						<div id="state_row" class="fieldclass">
                                <table border="0" cellpadding="0" cellspacing="0">
				<tbody><tr><td align="left"><span id="state_req"></span></td></tr>
				<tr><td align="left">
						<select style="border: 1px solid rgb(204, 204, 204); color: rgb(74, 74, 74);" name="state" id="state" class="med required_field">
<option label="Select state*" value="">Select state*</option>
<option label="Alabama" value="AL">Alabama</option>
<option label="Alaska" value="AK">Alaska</option>
<option label="American Samoa" value="AS">American Samoa</option>
<option label="Arizona" value="AZ">Arizona</option>
<option label="Arkansas" value="AR">Arkansas</option>
<option label="California" value="CA">California</option>
<option label="Colorado" value="CO">Colorado</option>
<option label="Connecticut" value="CT">Connecticut</option>
<option label="Delaware" value="DE">Delaware</option>
<option label="District of Columbia" value="DC">District of Columbia</option>
<option label="Florida" value="FL">Florida</option>
<option label="Georgia" value="GA">Georgia</option>
<option label="Guam" value="GU">Guam</option>
<option label="Hawaii" value="HI">Hawaii</option>
<option label="Idaho" value="ID">Idaho</option>
<option label="Illinois" value="IL">Illinois</option>
<option label="Indiana" value="IN">Indiana</option>
<option label="Iowa" value="IA">Iowa</option>
<option label="Kansas" value="KS">Kansas</option>
<option label="Kentucky" value="KY">Kentucky</option>
<option label="Louisiana" value="LA">Louisiana</option>
<option label="Maine" value="ME">Maine</option>
<option label="Maryland" value="MD">Maryland</option>
<option label="Massachusetts" value="MA">Massachusetts</option>
<option label="Michigan" value="MI">Michigan</option>
<option label="Minnesota" value="MN">Minnesota</option>
<option label="Mississippi" value="MS">Mississippi</option>
<option label="Missouri" value="MO">Missouri</option>
<option label="Montana" value="MT">Montana</option>
<option label="Nebraska" value="NE">Nebraska</option>
<option label="Nevada" value="NV">Nevada</option>
<option label="New Hampshire" value="NH">New Hampshire</option>
<option label="New Jersey" value="NJ">New Jersey</option>
<option label="New Mexico" value="NM">New Mexico</option>
<option label="New York" value="NY">New York</option>
<option label="North Carolina" value="NC">North Carolina</option>
<option label="North Dakota" value="ND">North Dakota</option>
<option label="Ohio" value="OH">Ohio</option>
<option label="Oklahoma" value="OK">Oklahoma</option>
<option label="Oregon" value="OR">Oregon</option>
<option label="Pennsylvania" value="PA">Pennsylvania</option>
<option label="Puerto Rico" value="PR">Puerto Rico</option>
<option label="Rhode Island" value="RI">Rhode Island</option>
<option label="South Carolina" value="SC">South Carolina</option>
<option label="South Dakota" value="SD">South Dakota</option>
<option label="Tennessee" value="TN">Tennessee</option>
<option label="Texas" value="TX">Texas</option>
<option label="Utah" value="UT">Utah</option>
<option label="Vermont" value="VT">Vermont</option>
<option label="Virgin Islands" value="VI">Virgin Islands</option>
<option label="Virginia" value="VA">Virginia</option>
<option label="Washington" value="WA">Washington</option>
<option label="West Virginia" value="WV">West Virginia</option>
<option label="Wisconsin" value="WI">Wisconsin</option>
<option label="Wyoming" value="WY">Wyoming</option>
<option label="APO/FPO Americas" value="AA">APO/FPO Americas</option>
<option label="APO/FPO Europe" value="AE">APO/FPO Europe</option>
<option label="APO/FPO Pacific" value="AP">APO/FPO Pacific</option>
<option label="US Minor Outlying Is" value="UM">US Minor Outlying Is</option>
</select>
 
				</td></tr>
				</tbody></table>
			</div>
						<div id="country_row" class="fieldclass">
					<table border="0" cellpadding="0" cellspacing="0">	
					<tbody><tr height="10"><td align="left"><span id="country_name_req"></span></td><td colspan="1"></td><td align="left"><span id="zipcode_req"></span></td></tr>
					<tr>
					<td align="left">
						<div id="country_container"><input name="country_name" id="country_name" value="United States" readonly="" class="med" type="text"> </div>
					</td>
																	<td width="10"> &nbsp; </td>
						<td align="left">
	
														<input name="zipcode" id="zipcode" value="Zip*" size="10" class="med required_field" maxlength="18" type="text"> 
													</td>
																</tr>
					</tbody></table>
			</div>		</div></td>
	</tr>
	
	<tr height="20"><td></td></tr>
		
	<tr>
		<td valign="top" align="left">
						<div style="display: none;" id="billingContainer" class="addressclass">
				<div class="fieldclass css3_sectiontitle"><span id="billingDetailsTitleID"> BILLING ADDRESS  </span>
				</div>
		
			 	<div id="bill_title_row" class="fieldclass">
					<table border="0" cellpadding="0" cellspacing="0">
					<tbody><tr><td align="left"><span id="bill_title_req"></span></td></tr>
					<tr><td align="left">
						<!-- <select name="bill_title" id="bill_title" class="med">
<option label="Title/Suffix" value="">Title/Suffix</option>
<option label="Mr" value="Mr">Mr</option>
<option label="Ms" value="Ms">Ms</option>
<option label="Mrs" value="Mrs">Mrs</option>
<option label="Miss" value="Miss">Miss</option>
<option label="Dr" value="Dr">Dr</option>
<option label="Sir" value="Sir">Sir</option>
</select>
 -->
						<select style="border: 1px solid rgb(204, 204, 204); color: rgb(74, 74, 74);" name="bill_title" id="bill_title" class="med">
															<option value="" selected="selected"> Title/Suffix </option>
															<option value="Mr"> Mr </option>
															<option value="Ms"> Ms </option>
															<option value="Mrs"> Mrs </option>
															<option value="Miss"> Miss </option>
															<option value="Dr"> Dr </option>
															<option value="Sir"> Sir </option>
													</select>
					</td></tr>
					</tbody></table>
                        	</div>

				<div id="bill_fname_row" class="fieldclass">
                                	<table border="0" cellpadding="0" cellspacing="0">
					<tbody><tr><td align="left"><span id="bill_fname_req"></span></td></tr>
					<tr><td align="left"><input name="bill_fname" id="bill_fname" value="Given name*" class="inputclass required_field" maxlength="32" type="text"></td></tr>
					</tbody></table>
				<div>
				<div id="bill_lname_row" class="fieldclass">
                                	<table border="0" cellpadding="0" cellspacing="0">
					<tbody><tr><td align="left"><span id="bill_lname_req"></span></td></tr>
					<tr><td align="left"><input name="bill_lname" id="bill_lname" value="Family name*" class="inputclass required_field" maxlength="32" type="text"> </td></tr>
					</tbody></table>
				</div>
				<div id="bill_company_row" class="fieldclass">
                                	<table border="0" cellpadding="0" cellspacing="0">
					<tbody><tr><td align="left"><span id="bill_company_req"></span></td></tr>
					<tr><td align="left"><input name="bill_company" id="bill_company" value="Company name" class="inputclass" maxlength="30" type="text"> </td></tr>
					</tbody></table>
				</div>
				<div id="bill_address_row" class="fieldclass">
                                	<table border="0" cellpadding="0" cellspacing="0">
					<tbody><tr><td align="left"><span id="bill_address_req"></span></td></tr>
					<tr><td align="left"><input name="bill_address" id="bill_address" value="Address line 1*" class="inputclass required_field" maxlength="30" type="text"> </td></tr>
					</tbody></table>
				</div>
				<div id="bill_address2_row" class="fieldclass">
                                	<table border="0" cellpadding="0" cellspacing="0">
					<tbody><tr><td align="left"><span id="bill_address2_req"></span></td></tr>
					<tr><td align="left"><input name="bill_address2" id="bill_address2" value="Address line 2" class="inputclass" maxlength="30" type="text"></td></tr>
					</tbody></table>
				</div>
				<div id="bill_city_row" class="fieldclass">
                                	<table border="0" cellpadding="0" cellspacing="0">
					<tbody><tr><td align="left"><span id="bill_city_req"></span></td></tr>
					<tr><td align="left"><input name="bill_city" id="bill_city" value="Town/City*" class="inputclass required_field" maxlength="30" type="text"> </td></tr>
					</tbody></table>
				</div>
				<div id="bill_state_row" class="fieldclass">
                                	<table border="0" cellpadding="0" cellspacing="0">
					<tbody><tr><td align="left"><span id="bill_state_req"></span></td></tr>
					<tr><td align="left"><div id="bill_stateContainer"> <input name="bill_state" id="bill_state" value="State/Province" class="inputfield" onclick="clickState()" onmouseout="rollOutState();" type="text"></div></td></tr>
					</tbody></table>
				</div>
				<div id="bill_country_row" class="fieldclass">
						<table border="0" cellpadding="0" cellspacing="0">	
						<tbody><tr height="10"><td> <span id="bill_country_req"></span> </td><td colspan="1"></td><td align="left"><span id="bill_zipcode_req"></span></td></tr>
						<tr>
						<td align="left">
							<select style="border: 1px solid rgb(204, 204, 204); color: rgb(74, 74, 74);" name="bill_country" id="bill_country" class="med required_field">
<option label="Select country" value="">Select country</option>
<option label="Afghanistan" value="AF">Afghanistan</option>
<option label="Albania" value="AL">Albania</option>
<option label="Algeria" value="DZ">Algeria</option>
<option label="American Samoa" value="AS">American Samoa</option>
<option label="Andorra" value="AD">Andorra</option>
<option label="Angola" value="AO">Angola</option>
<option label="Anguilla" value="AI">Anguilla</option>
<option label="Antigua and Barbuda" value="AG">Antigua and Barbuda</option>
<option label="Argentina" value="AR">Argentina</option>
<option label="Armenia" value="AM">Armenia</option>
<option label="Aruba" value="AW">Aruba</option>
<option label="Australia" value="AU">Australia</option>
<option label="Austria" value="AT">Austria</option>
<option label="Azerbaijan" value="AZ">Azerbaijan</option>
<option label="Bahamas" value="BS">Bahamas</option>
<option label="Bahrain" value="BH">Bahrain</option>
<option label="Bangladesh" value="BD">Bangladesh</option>
<option label="Barbados" value="BB">Barbados</option>
<option label="Belarus" value="BY">Belarus</option>
<option label="Belgium" value="BE">Belgium</option>
<option label="Belize" value="BZ">Belize</option>
<option label="Benin" value="BJ">Benin</option>
<option label="Bermuda" value="BM">Bermuda</option>
<option label="Bhutan" value="BT">Bhutan</option>
<option label="Bolivia" value="BO">Bolivia</option>
<option label="Bosnia-Hercegovina" value="BA">Bosnia-Hercegovina</option>
<option label="Botswana" value="BW">Botswana</option>
<option label="Brazil" value="BR">Brazil</option>
<option label="British Indian Ocean Territory" value="IO">British Indian Ocean Territory</option>
<option label="Brunei" value="BN">Brunei</option>
<option label="Bulgaria" value="BG">Bulgaria</option>
<option label="Burkina Faso" value="BF">Burkina Faso</option>
<option label="Burundi" value="BI">Burundi</option>
<option label="Cambodia" value="KH">Cambodia</option>
<option label="Cameroon" value="CM">Cameroon</option>
<option label="Canada" value="CA">Canada</option>
<option label="Cape Verde" value="CV">Cape Verde</option>
<option label="Cayman Islands" value="KY">Cayman Islands</option>
<option label="Central African Republic" value="CF">Central African Republic</option>
<option label="Chad" value="TD">Chad</option>
<option label="Chile" value="CL">Chile</option>
<option label="China" value="CN">China</option>
<option label="Christmas Island" value="CX">Christmas Island</option>
<option label="Cocos (Keeling) Islands" value="CC">Cocos (Keeling) Islands</option>
<option label="Colombia" value="CO">Colombia</option>
<option label="Comoros" value="KM">Comoros</option>
<option label="Congo" value="CG">Congo</option>
<option label="Congo, Dem Rep of" value="CD">Congo, Dem Rep of</option>
<option label="Cook Islands" value="CK">Cook Islands</option>
<option label="Costa Rica" value="CR">Costa Rica</option>
<option label="Croatia" value="HR">Croatia</option>
<option label="Cuba" value="CU">Cuba</option>
<option label="Cyprus" value="CY">Cyprus</option>
<option label="Czech Republic" value="CZ">Czech Republic</option>
<option label="Denmark" value="DK">Denmark</option>
<option label="Djibouti" value="DJ">Djibouti</option>
<option label="Dominica" value="DM">Dominica</option>
<option label="Dominican Republic" value="DO">Dominican Republic</option>
<option label="East Timor" value="TL">East Timor</option>
<option label="Ecuador" value="EC">Ecuador</option>
<option label="Egypt" value="EG">Egypt</option>
<option label="El Salvador" value="SV">El Salvador</option>
<option label="Equatorial Guinea" value="GQ">Equatorial Guinea</option>
<option label="Eritrea" value="ER">Eritrea</option>
<option label="Estonia" value="EE">Estonia</option>
<option label="Ethiopia" value="ET">Ethiopia</option>
<option label="Falkland Islands" value="FK">Falkland Islands</option>
<option label="Faroe Islands" value="FO">Faroe Islands</option>
<option label="Fiji" value="FJ">Fiji</option>
<option label="Finland" value="FI">Finland</option>
<option label="France" value="FR">France</option>
<option label="French Guiana" value="GF">French Guiana</option>
<option label="French Polynesia" value="PF">French Polynesia</option>
<option label="French Southern Territories" value="TF">French Southern Territories</option>
<option label="Gabon" value="GA">Gabon</option>
<option label="Gambia" value="GM">Gambia</option>
<option label="Georgia" value="GE">Georgia</option>
<option label="Germany" value="DE">Germany</option>
<option label="Ghana" value="GH">Ghana</option>
<option label="Gibraltar" value="GI">Gibraltar</option>
<option label="Greece" value="GR">Greece</option>
<option label="Greenland" value="GL">Greenland</option>
<option label="Grenada" value="GD">Grenada</option>
<option label="Guadeloupe" value="GP">Guadeloupe</option>
<option label="Guam" value="GU">Guam</option>
<option label="Guatemala" value="GT">Guatemala</option>
<option label="Guinea" value="GN">Guinea</option>
<option label="Guinea-Bissau" value="GW">Guinea-Bissau</option>
<option label="Guyana" value="GY">Guyana</option>
<option label="Haiti" value="HT">Haiti</option>
<option label="Heard Island and McDonald Is" value="HM">Heard Island and McDonald Is</option>
<option label="Honduras" value="HN">Honduras</option>
<option label="Hong Kong" value="HK">Hong Kong</option>
<option label="Hungary" value="HU">Hungary</option>
<option label="Iceland" value="IS">Iceland</option>
<option label="India" value="IN">India</option>
<option label="Indonesia" value="ID">Indonesia</option>
<option label="Iran" value="IR">Iran</option>
<option label="Iraq" value="IQ">Iraq</option>
<option label="Ireland" value="IE">Ireland</option>
<option label="Israel" value="IL">Israel</option>
<option label="Italy" value="IT">Italy</option>
<option label="Ivory Coast" value="CI">Ivory Coast</option>
<option label="Jamaica" value="JM">Jamaica</option>
<option label="Japan" value="JP">Japan</option>
<option label="Jordan" value="JO">Jordan</option>
<option label="Kazakhstan" value="KZ">Kazakhstan</option>
<option label="Kenya" value="KE">Kenya</option>
<option label="Kirgizstan" value="KG">Kirgizstan</option>
<option label="Kiribati" value="KI">Kiribati</option>
<option label="Kosovo" value="KO">Kosovo</option>
<option label="Kuwait" value="KW">Kuwait</option>
<option label="Laos" value="LA">Laos</option>
<option label="Latvia" value="LV">Latvia</option>
<option label="Lebanon" value="LB">Lebanon</option>
<option label="Lesotho" value="LS">Lesotho</option>
<option label="Liberia" value="LR">Liberia</option>
<option label="Libya" value="LY">Libya</option>
<option label="Liechtenstein" value="LI">Liechtenstein</option>
<option label="Lithuania" value="LT">Lithuania</option>
<option label="Luxembourg" value="LU">Luxembourg</option>
<option label="Macao" value="MO">Macao</option>
<option label="Macedonia, FYR" value="MK">Macedonia, FYR</option>
<option label="Madagascar" value="MG">Madagascar</option>
<option label="Malawi" value="MW">Malawi</option>
<option label="Malaysia" value="MY">Malaysia</option>
<option label="Maldives" value="MV">Maldives</option>
<option label="Mali" value="ML">Mali</option>
<option label="Malta" value="MT">Malta</option>
<option label="Marshall Islands" value="MH">Marshall Islands</option>
<option label="Martinique" value="MQ">Martinique</option>
<option label="Mauritania" value="MR">Mauritania</option>
<option label="Mauritius" value="MU">Mauritius</option>
<option label="Mayotte" value="YT">Mayotte</option>
<option label="Mexico" value="MX">Mexico</option>
<option label="Micronesia, Fed States of" value="FM">Micronesia, Fed States of</option>
<option label="Moldova" value="MD">Moldova</option>
<option label="Monaco" value="MC">Monaco</option>
<option label="Mongolia" value="MN">Mongolia</option>
<option label="Montenegro" value="ME">Montenegro</option>
<option label="Montserrat" value="MS">Montserrat</option>
<option label="Morocco" value="MA">Morocco</option>
<option label="Mozambique" value="MZ">Mozambique</option>
<option label="Myanmar" value="MM">Myanmar</option>
<option label="Namibia" value="NA">Namibia</option>
<option label="Nauru" value="NR">Nauru</option>
<option label="Nepal" value="NP">Nepal</option>
<option label="Netherlands" value="NL">Netherlands</option>
<option label="Netherlands Antilles" value="AN">Netherlands Antilles</option>
<option label="New Caledonia" value="NC">New Caledonia</option>
<option label="New Zealand" value="NZ">New Zealand</option>
<option label="Nicaragua" value="NI">Nicaragua</option>
<option label="Niger" value="NE">Niger</option>
<option label="Nigeria" value="NG">Nigeria</option>
<option label="Niue" value="NU">Niue</option>
<option label="Norfolk Island" value="NF">Norfolk Island</option>
<option label="North Korea" value="KP">North Korea</option>
<option label="Northern Mariana Islands" value="MP">Northern Mariana Islands</option>
<option label="Norway" value="NO">Norway</option>
<option label="Oman" value="OM">Oman</option>
<option label="Pakistan" value="PK">Pakistan</option>
<option label="Palau" value="PW">Palau</option>
<option label="Palestine" value="PS">Palestine</option>
<option label="Panama" value="PA">Panama</option>
<option label="Papua New Guinea" value="PG">Papua New Guinea</option>
<option label="Paraguay" value="PY">Paraguay</option>
<option label="Peru" value="PE">Peru</option>
<option label="Philippines" value="PH">Philippines</option>
<option label="Pitcairn Island" value="PN">Pitcairn Island</option>
<option label="Poland" value="PL">Poland</option>
<option label="Portugal" value="PT">Portugal</option>
<option label="Puerto Rico" value="PR">Puerto Rico</option>
<option label="Qatar" value="QA">Qatar</option>
<option label="Reunion" value="RE">Reunion</option>
<option label="Romania" value="RO">Romania</option>
<option label="Russia" value="RU">Russia</option>
<option label="Rwanda" value="RW">Rwanda</option>
<option label="Saint Helena" value="SH">Saint Helena</option>
<option label="Saint Kitts and Nevis" value="KN">Saint Kitts and Nevis</option>
<option label="Saint Lucia" value="LC">Saint Lucia</option>
<option label="Saint Vincent and Grenadines" value="VC">Saint Vincent and Grenadines</option>
<option label="Samoa" value="WS">Samoa</option>
<option label="San Marino" value="SM">San Marino</option>
<option label="Sao Tome and Principe" value="ST">Sao Tome and Principe</option>
<option label="Saudi Arabia" value="SA">Saudi Arabia</option>
<option label="Senegal" value="SN">Senegal</option>
<option label="Serbia" value="RS">Serbia</option>
<option label="Seychelles" value="SC">Seychelles</option>
<option label="Sierra Leone" value="SL">Sierra Leone</option>
<option label="Singapore" value="SG">Singapore</option>
<option label="Slovakia" value="SK">Slovakia</option>
<option label="Slovenia" value="SI">Slovenia</option>
<option label="Solomon Islands" value="SB">Solomon Islands</option>
<option label="Somalia" value="SO">Somalia</option>
<option label="South Africa" value="ZA">South Africa</option>
<option label="South Georgia" value="GS">South Georgia</option>
<option label="South Korea" value="KR">South Korea</option>
<option label="Spain" value="ES">Spain</option>
<option label="Sri Lanka" value="LK">Sri Lanka</option>
<option label="Sudan" value="SD">Sudan</option>
<option label="Suriname" value="SR">Suriname</option>
<option label="Swaziland" value="SZ">Swaziland</option>
<option label="Sweden" value="SE">Sweden</option>
<option label="Switzerland" value="CH">Switzerland</option>
<option label="Syria" value="SY">Syria</option>
<option label="Taiwan" value="TW">Taiwan</option>
<option label="Tajikistan" value="TJ">Tajikistan</option>
<option label="Tanzania" value="TZ">Tanzania</option>
<option label="Thailand" value="TH">Thailand</option>
<option label="Togo" value="TG">Togo</option>
<option label="Tokelau" value="TK">Tokelau</option>
<option label="Tonga" value="TO">Tonga</option>
<option label="Trinidad and Tobago" value="TT">Trinidad and Tobago</option>
<option label="Tunisia" value="TN">Tunisia</option>
<option label="Turkey" value="TR">Turkey</option>
<option label="Turkmenistan" value="TM">Turkmenistan</option>
<option label="Turks and Caicos Islands" value="TC">Turks and Caicos Islands</option>
<option label="Tuvalu" value="TV">Tuvalu</option>
<option label="Uganda" value="UG">Uganda</option>
<option label="Ukraine" value="UA">Ukraine</option>
<option label="United Arab Emirates" value="AE">United Arab Emirates</option>
<option label="United Kingdom" value="GB">United Kingdom</option>
<option label="United States" value="US">United States</option>
<option label="Uruguay" value="UY">Uruguay</option>
<option label="US Minor Outlying Is" value="UM">US Minor Outlying Is</option>
<option label="Uzbekistan" value="UZ">Uzbekistan</option>
<option label="Vanuatu" value="VU">Vanuatu</option>
<option label="Venezuela" value="VE">Venezuela</option>
<option label="Vietnam" value="VN">Vietnam</option>
<option label="Virgin Islands, British" value="VG">Virgin Islands, British</option>
<option label="Virgin Islands, US" value="VI">Virgin Islands, US</option>
<option label="Western Sahara" value="EH">Western Sahara</option>
<option label="Yemen" value="YE">Yemen</option>
<option label="Zambia" value="ZM">Zambia</option>
<option label="Zimbabwe" value="ZW">Zimbabwe</option>
</select>

						</td>
						<td width="10"> &nbsp; </td>
						<td align="left">
							<input name="bill_zipcode" id="bill_zipcode" value="Postcode/Zip*" size="10" class="med required_field" maxlength="18" type="text"> 
						</td>
						</tr>
						</tbody></table>
				</div>
			</div>		</div></div></td>
	</tr>


	<tr height="10"><td></td></tr>
	<tr>
	<td align="left">
		<div id="detailCheckContainer">
		<table class="cbtable" border="0" cellpadding="0" cellspacing="0">
		<tbody><tr height="41" bgcolor="#F0F0F0">
			<td class="plspace" nowrap="" align="left">
				<span id="billingCheckboxCopyID">
					My billing address is different to my delivery address 
									</span> 
			</td>
			<td><input id="toggleBilling" value="Y" type="checkbox"> </td> 
		</tr>
		</tbody></table>	
		</div>
	</td>
	</tr>


	</tbody></table>
</div>
			</td>
		</tr>
	</tbody></table>
</div>
</td>
</tr>
</tbody></table>

<input name="use_billing" id="use_billing" value="0" type="hidden">


  
				    </div>
				</td>
				</tr>
				    
				<tr bgcolor="#FFFFFF">
				<td valign="top" align="left">
					
<table border="0" cellpadding="0" cellspacing="0">
<tbody><tr>
<td valign="top" align="left">
<div class="css3_section">

    <table width="100%" border="0" cellpadding="0" cellspacing="0">
        <tbody><tr>
            <td class="css3_sectiontitle" align="left">
                 <div id="dpTopCopyID" style="color:#000; font-weight:bold;">
								DATA PROTECTION INFORMATION 
		</div>
            </td>
        </tr>
        <tr height="10"><td> </td></tr>
        <tr>
            <td valign="top" align="left">
            <table border="0" cellpadding="0" cellspacing="0">
		
		<tbody><tr>
                <td align="left"><input name="contact_email" id="contact_email" value="Y" type="checkbox"></td>
                <td class="privacy" align="left">
							Check this box if you'd like to hear from <a href="http://www.economistgroup.com/" target="_blank">The Economist Group</a> by e-mail	
			                </td>
		</tr>
		
			 
            </tbody></table>
            </td>
        </tr>
	        <tr height="10"><td> </td></tr>
        <tr>
            <td class="dp" valign="top" align="left">
                    <div id="dpBottomCopyID" class="privacy">The Economist Group is a global organization and operates a strict <a class="underlink" href="http://www.economistgroup.com/results_and_governance/governance/privacy/" target="_blank">privacy policy</a> around the world. 		Occasionally, we would like to contact you about new features, events, special coverage, offers, and for 		market research purposes. <strong>Rest assured, we will never sell your e-mail address to third parties</strong>.  		You can unsubscribe from receiving e-mail communications at anytime.  </div>
            </td>
        </tr>
	
    </tbody></table>
</div>
</td>
</tr>
</tbody></table>				
				</td>
				</tr>
				<tr bgcolor="#FFFFFF">
				<td valign="top" align="left">
				    <div class="css3_section">
					<table width="100%" border="0" cellpadding="0" cellspacing="0">	
					    <tbody><tr bgcolor="#F0f0f0">
					    <td style="padding-left:10px" align="left">
						<table width="100%" border="0" cellpadding="0" cellspacing="0">
						<tbody><tr height="20"><td></td></tr>	
						<tr>	
						<td align="left">
						    <div id="submittext"> 
						    <table border="0" cellpadding="0" cellspacing="0">
						    <tbody><tr><td align="left"> <span id="chargeAmount" class="css3_amount">US$279</span>	 </td>
						    <td width="20"> &nbsp; </td>
						    <td class="css3_buttontext" align="left"> Total amount payable<br><font style="font-weight:normal; font-size:12px"><span id="inc_tax">(including tax)</span> </font> </td>
						    </tr>
						    </tbody></table>
						    </div>
						</td>
						<td width="10"> &nbsp; </td>	
						<td align="right">
							<div class="css3_button_blue" id="submitID" style="width: 200px; display: block;">
							    								<span style="color: #ffffff; font-size: 14px;"><strong>COMPLETE PURCHASE</strong></span>
							    							</div>
						</td>
				
						<td width="10"> &nbsp; </td>
						</tr>
						<tr height="20"><td></td></tr>	
						</tbody></table>
					    </td>	
					    </tr>	
					</tbody></table>	
				    </div>
				    
				    <div id="submitMsgId"></div>	
				    
				</td>
				</tr>
				    
				<tr bgcolor="#FFFFFF">
				<td valign="top" align="left">
				    <div class="css3_section">
					<div id="disclaimerTitleID"> <div class="css3_disclaimer_b"><strong>What happens next?</strong></div> </div>
					<div class="css3_disclaimer" id="disclaimerID">
											Upon completing your purchase, your online access will be immediately  activated. Please do not click 'refresh' or 'back' after submitting your  order. You will receive an e-mail confirmation with your full order  details within one hour.
										</div>
				    </div>
				</td>
				</tr>
				    
			    </tbody></table>
			
			
		    </div> <!-- end mainsection -->
		   		</td>
	
		<td width="20"> &nbsp; </td>
		<td valign="top" width="356" align="left">
						<div id="rightSectionID" style="padding:0px;">
				    


	<table style="background:#FFF" border="0" cellpadding="0" cellspacing="0">	
		<tbody><tr>	
		<td valign="top" align="left">
		<table width="100%" border="0" cellpadding="0" cellspacing="0">	
			  				      				      				      				      				      	
				       	
												   
												<tbody><tr height="20"><td><img src="/gfx/spacer.gif" height="20" border="0"></td></tr>
						<tr>
							<td valign="top" align="left">	
								<table width="100%" border="0" cellpadding="0" cellspacing="0">
								<tbody><tr>
								<td width="10"><img src="/gfx/spacer.gif" width="10" border="0"> </td>
								<td valign="top" align="left">
									 <img src="/gfx/moneyback_icon.gif">								</td>
								<td width="10"> &nbsp; </td>
								<td align="left"> 
									<div class="css3_sidebar_header" style="padding-bottom:10px">
										 Money back guarantee									</div>	
									<div class="css3_sidebar_body">
										<div class="inner">
										 If you are not completely satisfied, you will be refunded the un-served portion of your subscription.										</div>
									</div>
								</td>
								</tr>		
								</tbody></table>
							</td>
						</tr>
						<tr height="20"><td><img src="/gfx/spacer.gif" height="20" border="0"></td></tr>
		
											
					
								      				      				      				      				      	
				       	
													<tr height="1" bgcolor="#EAEAEA"><td></td></tr>
												   
												<tr height="20"><td><img src="/gfx/spacer.gif" height="20" border="0"></td></tr>
						<tr>
							<td valign="top" align="left">	
								<table width="100%" border="0" cellpadding="0" cellspacing="0">
								<tbody><tr>
								<td width="10"><img src="/gfx/spacer.gif" width="10" border="0"> </td>
								<td valign="top" align="left">
									 <img src="/gfx/customerservice_icon.gif">								</td>
								<td width="10"> &nbsp; </td>
								<td align="left"> 
									<div class="css3_sidebar_header" style="padding-bottom:10px">
										 Customer service									</div>	
									<div class="css3_sidebar_body">
										<div class="inner">
										 If you have any questions,<br>please contact us. <br> For subscription enquiries e-mail: <a class="underlink" href="mailto:customerhelp@economist.com" target="_blank">customerhelp@economist.com</a> <br> For digital access enquiries e-mail: <br><a class="underlink" href="mailto:americas@digital.economist.com" target="_blank">americas@digital.economist.com</a> <br>For all enquiries via telephone: <br>Toll free (North America only):<br>+1 800 456 6086<br>Toll (Latin America and Mexico):<br>+1 636 449 5702										</div>
									</div>
								</td>
								</tr>		
								</tbody></table>
							</td>
						</tr>
						<tr height="20"><td><img src="/gfx/spacer.gif" height="20" border="0"></td></tr>
		
											
					
								      				      				      				      				      	
				       
								</tbody></table>
			</td>
			</tr>
					
	</tbody></table>
			</div>
					</td>
			
		</tr>
		</tbody></table>	
			
            </td>
            </tr>
        </tbody></table>
   </div>
  </td>
	
 </tr>
 </tbody></table>


</div>    


			</div>
		     </td> 
		</tr>	
		</tbody></table>
		</td>
	  </tr>
 </tbody></table>



<input name="selected_box" id="selected_box" value="box1" type="hidden">

<input name="kind" id="kind_id" value="lp" type="hidden">
<input name="submitted" id="submitted_id" value="Y" type="hidden">
<input name="sub_type" id="sub_type_id" value="personal" type="hidden">
<input name="site" id="site_id" value="econ" type="hidden">
<input name="variation" id="variation_id" value="474USPLP" type="hidden">

<input name="list" value="" type="hidden">
<input name="campaign_type" id="campaign_type_id" value="" type="hidden">
<input name="isgift" id="isgift_id" value="" type="hidden">
<input name="interextra" id="interextra_id" value="" type="hidden">
<input name="kindid" id="kindid" value="" type="hidden">
<input name="sessid" id="sessid" value="80a52802b3b8398536314eeb9b6693bb" type="hidden">

<input name="paym" id="paym_id" value="P" type="hidden">
<input name="ppaym" id="ppaym_id" value="" type="hidden">

<input name="product" id="product_id" value="H" type="hidden">       
<input name="termkind" id="termkind_id" value="product_h" type="hidden">

		 
<input name="selected_box" id="selected_box_id" value="box1" type="hidden">

<input autocomplete="off" name="zone" id="zone_id" value="NAM_US" type="hidden">
<input autocomplete="off" name="camp_url" id="camp_url" value="/SLG" type="hidden">


<input name="api_uid" id="api_uid" value="" type="hidden">
<input name="api_token" id="api_token" value="7B07E862F89DCC38B22A6F6ED54E13B6" type="hidden">
<input name="api_email" id="api_email" value="" type="hidden">
                                                                                                                                                           

<input autocomplete="off" id="upsellto" name="upsellto" value="" type="hidden">
<input autocomplete="off" name="extra_info" id="extra_info" value="" type="hidden">



                
        





<!-- US  zipcode filter fields -->



<input name="skip_ftd" id="skip_ftd" value="0" type="hidden">





<!-- utm -->



</form>

</div> <!-- container -->

	
<!-- Do not touch these ones                            -->
<form name="lpguardform" id="lpguardform" method="POST" action="index.php" onsubmit="return false;">
	<input autocomplete="off" name="paym" value="" type="hidden">
	<input autocomplete="off" name="offer" value="" type="hidden">
	<input autocomplete="off" name="kind" value="lp" type="hidden">
	<input autocomplete="off" name="submitted" value="V" type="hidden">
	<input autocomplete="off" name="extra_info2" value="lprescue" type="hidden">
	<input autocomplete="off" name="tagsrc" value="" type="hidden">
	<input autocomplete="off" name="rnd" value="" type="hidden">
</form>



<script language="javascript">
	
//////////////////////////////////////////////////////////////////////////
/// guard stuff
//////////////////////////////////////////////////////////////////////////
var guard_win=null;
var launchGuardOnExit = false;
var openguard_busy=0;
var s2_reloaded = false;
var s3_reloaded = false;
var lprescue_loaded = false;
var is_chrome = navigator.userAgent.toLowerCase().indexOf('chrome') > -1;
var pop_rescued = false;
var dont_launch = false;

///////////////////////////////////////////////////
//new popup function for all browsers by denny
///////////////////////////////////////////////////
_initRescue=function() { 
	// rescue stuff 

        /* use jQuery as container for more convenience */
        $.popunder = function(sUrl) {
            var _parent = self,
                bPopunder = ($.browser.msie && parseInt($.browser.version, 10) < 9);

        if (top != self) {
            try {
                if (top.document.location.toString()) {
                    _parent = top;
                }
            }
            catch(err) { }
        }

        /* popunder options */
        if (is_chrome) { 
		var sOptions = 'left=3000,top=3000,width=320,height=20,titlebar=yes,status=no,scrollbars=yes,resizable=yes';
        } else{
		var sOptions = 'left=3000,top=3000,width=320,height=20,titlebar=yes,status=no,scrollbars=yes,resizable=yes';
	}

        /* create pop-up from parent context */
        var popunder = _parent.window.open(sUrl, '_amslg_guard', sOptions);
            if (popunder) {
                popunder.blur();
                if (bPopunder) {
                    /* classic popunder, used for old ie*/
                    window.focus();
                    try { opener.window.focus(); }
                    catch (err) { }
                }
                else {
                    /* popunder for e.g. ff4+, chrome, ie9 */
                    popunder.init = function(e) {
                        with (e) {
                            (function() {
                                if (typeof window.mozPaintCount != 'undefined') {
                                    var x = window.open('about:blank');
                                    if(x) x.close();
                                }

                                try { opener.window.focus(); }
                                catch (err) { }
                            })();
                        }
                    };
                    popunder.params = {
                        url: sUrl
                    };
                    popunder.init(popunder);
                }
            }

            return this;
        }
};


/************************************************/
/* returns wheather or not device is mobile     */
/************************************************/

// real func 
_isMobileDevice=function() {
    if (navigator.userAgent.match(/Android/i) || navigator.userAgent.match(/BlackBerry/i) || navigator.userAgent.match(/iPhone|iPad|iPod/i) || navigator.userAgent.match(/IEMobile/i)) {
        return true;
    }
    return false;
}       


/************************************************/
/* launch the guard                             */
/************************************************/
_openguard=function() {
        // hackos check if mobile devicted detected and return false
       if (_isMobileDevice()) {  return false ; } 

	if (openguard_busy==1) { return; } 
	openguard_busy=1;
		
	var url = "index.php?submitted=V&kind=guard&t=&extra_info=&extra_info2=";

        
        

        
        

        
        
	
        if ((guard_win==null || typeof guard_win=='function' || guard_win.outerHeight==0) && (document.cookie.indexOf('guard')==-1)) {
		     debug('1: '+ url);
		     //guard_win=window.open(url, '_amslg_guard',"width=295,height=120,titlebar=yes,status=no,scrollbars=yes,resizable=yes");
                     if (is_chrome && guard_win) guard_win.close();
                     guard_win=jQuery.popunder(url);
		     //if (guard_win!=null) {
			//alert('2');
			//document.cookie='guard=true; path=/';
		     //}
	}else{
		debug('auch!');
	}
   	openguard_busy=0;
}


///////////////////////////////////////////////////////////////
// attach guard to clicks
///////////////////////////////////////////////////////////////
_attachguardonanyclick=function() {
	document.body.onclick = function(e){
		try {
                    if (!pop_rescued) {
                    pop_rescued = true;
                    //alert('clicked');
		    if(!e) {e = window.event;}
		    if(e.srcElement){if(e.srcElement.type && e.srcElement.type=='select-one'){return;}}
		    else if(e.target){if(e.target.type && e.target.type=='select-one'){return;}}
		    _openguard();

                    }
		} catch(e){}
    	}
}

///////////////////////////////////////////////////////////////
// reload rescue
///////////////////////////////////////////////////////////////
_reloadrescue=function() {
       if (!(guard_win==null || typeof guard_win=='function')) {
           if (!s2_reloaded && validateAddress($('orderform'), '', true)) {
               guard_win = null;
               _openguard();
               s2_reloaded = true;
           }
           else if (!s3_reloaded && checkPayment($('orderform'), true)) {
               guard_win = null;
               _openguard();
               s3_reloaded = true;
           }
       }

       if (!s2_reloaded || !s3_reloaded)
           setTimeout("_reloadrescue()", 3000);
}; 



/*********************************************************************/
/* 	check for existence of rescue/guard			     */
/*********************************************************************/
_processRescueIfAny=function() { 
	//console.log('process rescue...');
        if (_isMobileDevice()) { 
		return false ; 
	} 
	var hasRescue   = false;
	var launchGuard = false;
	 
		hasRescue = true ;
		 
			launchGuard = true ;
		
	
			
	//console.log('hasRescue = ' + hasRescue +' ; launchGuard='+launchGuard);

	if (hasRescue) { 	
		debug('init rescue stuff...');
		// rescue stuff 
		_initRescue(launchGuard);
		_attachguardonanyclick();
		
		if (launchGuard) { 
                        debug('launch guard');
                        //openguard(); 

                        var rescue_timeout;
                        rescue_timeout = setTimeout("_openguard()", 3000);

                        window.onscroll = function(e){
                            try {
                                if (guard_win==null && (document.cookie.indexOf('guard')==-1)) {
                                    //alert('scrolled');
                                    if(!e) {e = window.event;}
                                    clearTimeout(rescue_timeout);
                                    rescue_timeout = setTimeout("_openguard()", 3000);
                                }
                            } catch(e){}
                        } 
                }
        }

}; 


debug=function(msg) { 

}; 
</script>


<script>

var event51_fired = false;
var module_list = '';

/*************************************************/
// Utility
/*************************************************/
if ( typeof Object.create !== 'function' ) {
        Object.create = function( obj ) {
                function F() {};
                F.prototype = obj;
                return new F();
        };
}

getObjectLength=function(o) {
  var length = 0;
  for (var i in o) {
    if (Object.prototype.hasOwnProperty.call(o, i)){
      length++;
    }
  }
  return length;
};

number_format=function (number, decimals, dec_point, thousands_sep) {
    // Strip all characters but numerical ones.
    number = (number + '').replace(/[^0-9+\-Ee.]/g, '');
    var n = !isFinite(+number) ? 0 : +number,
        prec = !isFinite(+decimals) ? 0 : Math.abs(decimals),
        sep = (typeof thousands_sep === 'undefined') ? ',' : thousands_sep,
        dec = (typeof dec_point === 'undefined') ? '.' : dec_point,
        s = '',
        toFixedFix = function (n, prec) {
            var k = Math.pow(10, prec);
            return '' + Math.round(n * k) / k;
        };
    // Fix for IE parseFloat(0.55).toFixed(0) = 0;
    s = (prec ? toFixedFix(n, prec) : '' + Math.round(n)).split('.');
    if (s[0].length > 3) {
        s[0] = s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g, sep);
    }
    if ((s[1] || '').length < prec) {
        s[1] = s[1] || '';
        s[1] += new Array(prec - s[1].length + 1).join('0');
    }
    n = s.join(dec);
    n = n.replace(/\.00$/g, "");
    return n;
}; 

function htmlEscape(str) {
    return String(str)
            .replace(/&/g, '&amp;')
            .replace(/"/g, '&quot;')
            .replace(/'/g, '&#39;')
            .replace(/</g, '&lt;')
            .replace(/>/g, '&gt;');
}

/*************************************************/
/* click img url                                 */
/*************************************************/
clickImgURL=function(url) { 

        var qstr = '';
        
                
        if (url!='') {  
                var st = url.search(/\/$/);
                if (st == -1) { 
                        //url += '/';
                }
                nurl = url.substring(0 , url.indexOf('?')+1);
                var qret = url.indexOf('?');
                if (qret == -1) { 
                        url += '?';
                }else{
                      url += '&';
                }
                url +=  qstr;
                //location.href=url;
                window.open(url, '_blank');
        }

};



////////////////////////////////
// global object references 
////////////////////////////////
var offers = undefined; 
var payment = undefined; 
var account = undefined; 
var delivery = undefined; 
var billing = undefined; 

var page  = undefined; 


var products = {};
 
        var c = 'product_j';
        var n = 'Digital subscription';
        products[c]=n;
 
        var c = 'product_y';
        var n = 'Intelligent Life';
        products[c]=n;
 
        var c = 'product_h';
        var n = 'Print + digital subscription';
        products[c]=n;
 
        var c = 'product_d';
        var n = 'Print subscription';
        products[c]=n;
 
        var c = 'product_e';
        var n = 'Web subscription';
        products[c]=n;





var redir_countries = {};

 
                var c = 'IR';
                var u = '/COM';
                redir_countries[c]=u;
 
                var c = 'SM';
                var u = '/COM';
                redir_countries[c]=u;


</script>


 
	
<script type="text/javascript">


/***************************************************************/
/* cc validation						*/
/***************************************************************/
var ccErrorNo = 0;
var ccErrors = new Array ();

ccErrors [0] = "Unknown card type";
ccErrors [1] = "No card number provided";
ccErrors [2] = "Credit card number is in invalid format";
ccErrors [3] = "Credit card number is invalid";
ccErrors [4] = "Credit card number has an inappropriate number of digits";


/*************************************************/
/* validate credit card number 			 */
/*************************************************/
checkCreditCardNumber=function(field, message, cardType) {
        var re = /^[0-9]+$/;
        var ccnumber = $.trim($('#'+field).val());
		
        if (ccnumber.match(re) == null) {
		return false;
        }
        // Italian card is like Visa
        if (cardType == 'CARTASI') { cardType = 'Visa';}
        if (!checkCreditCard(ccnumber,cardType)) {
		return false;
        }
        return true;
};

/*************************************************/
/* validate credit card number 			 */
/*************************************************/
checkCreditCard=function(cardnumber, cardname) {
	  // Array to hold the permitted card characteristics
	  var cards = new Array();

	  // Define the cards we support. You may add addtional card types.
	  
	  //  Name:      As in the selection box of the form - must be same as user\'s
	  //  Length:    List of possible valid lengths of the card number for the card
	  //  prefixes:  List of possible prefixes for the card
	  //  checkdigit Boolean to say whether there is a check digit
	  
		
	 //alert('cardname = '  + cardname);
	  cards [0] = {name: "Visa", 
		       length: "13,16", 
		       prefixes: "4",
		       checkdigit: true};
	  cards [1] = {name: "MasterCard", 
		       length: "16", 
		       prefixes: "51,52,53,54,55",
		       checkdigit: true};
	  cards [2] = {name: "DinersClub", 
		       length: "14,16", 
		       prefixes: "305, 36, 38, 54,55",
		       checkdigit: true};
	  cards [3] = {name: "CarteBlanche", 
		       length: "14", 
		       prefixes: "300,301,302,303,304,305",
		       checkdigit: true};
	  cards [4] = {name: "Amex", 
		       length: "15", 
		       prefixes: "34,37",
		       checkdigit: true};
	  cards [5] = {name: "Discover", 
		       length: "16", 
		       prefixes: "6011,622,64,65",
		       checkdigit: true};
	  cards [6] = {name: "JCB", 
		       length: "16", 
		       prefixes: "35",
		       checkdigit: true};
	  cards [7] = {name: "enRoute", 
		       length: "15", 
		       prefixes: "2014,2149",
		       checkdigit: true};
	  cards [8] = {name: "Solo", 
		       length: "16,18,19", 
		       prefixes: "6334, 6767",
		       checkdigit: true};
	  cards [9] = {name: "Switch", 
		       length: "16,18,19", 
		       prefixes: "4903,4905,4911,4936,564182,633110,6333,6759",
		       checkdigit: true};
	  cards [10] = {name: "Maestro", 
		       length: "12,13,14,15,16,18,19", 
		       prefixes: "5018,5020,5038,6304,6759,6761",
		       checkdigit: true};
	  cards [11] = {name: "VisaElectron", 
		       length: "16", 
		       prefixes: "417500,4917,4913,4508,4844",
		       checkdigit: true};
	  cards [12] = {name: "LaserCard", 
		       length: "16,17,18,19", 
		       prefixes: "6304,6706,6771,6709",
		       checkdigit: true};
		       
	  // Establish card type
	  var cardType = -1;
	  for (var i=0; i<cards.length; i++) {

	    // See if it is this card (ignoring the case of the string)
	    if (cardname.toLowerCase () == cards[i].name.toLowerCase()) {
	      cardType = i;
	      break;
	    }
	  }
	  
	  // If card type not found, report an error
	  if (cardType == -1) {
	     ccErrorNo = 0;
	     return false; 
	  }
	   
	  // Ensure that the user has provided a credit card number
	  if (cardnumber.length == 0)  {
	     ccErrorNo = 1;
	     return false; 
	  }
	    
	  // Now remove any spaces from the credit card number
	  cardnumber = cardnumber.replace (/\s/g, "");
	  
	  // Check that the number is numeric
	  var cardNo = cardnumber
	  var cardexp = /^[0-9]{13,19}$/;
	  if (!cardexp.exec(cardNo))  {
	     ccErrorNo = 2;
	     return false; 
	  }
	       
	  // Now check the modulus 10 check digit - if required
	  if (cards[cardType].checkdigit) {
	    var checksum = 0;                                  // running checksum total
	    var mychar = "";                                   // next char to process
	    var j = 1;                                         // takes value of 1 or 2
	  
	    // Process each digit one by one starting at the right
	    var calc;
	    for (i = cardNo.length - 1; i >= 0; i--) {
	    
	      // Extract the next digit and multiply by 1 or 2 on alternative digits.
	      calc = Number(cardNo.charAt(i)) * j;
	    
	      // If the result is in two digits add 1 to the checksum total
	      if (calc > 9) {
		checksum = checksum + 1;
		calc = calc - 10;
	      }
	    
	      // Add the units element to the checksum total
	      checksum = checksum + calc;
	    
	      // Switch the value of j
	      if (j ==1) {j = 2} else {j = 1};
	    } 
	  
	    // All done - if checksum is divisible by 10, it is a valid modulus 10.
	    // If not, report an error.
	    if (checksum % 10 != 0)  {
	     ccErrorNo = 3;
	     return false; 
	    }
	  }  

	  //alert('1');
	  // The following are the card-specific checks we undertake.
	  var LengthValid = false;
	  var PrefixValid = false; 
	  var undefined; 

	  // We use these for holding the valid lengths and prefixes of a card type
	  var prefix = new Array ();
	  var lengths = new Array ();
	    
	  // Load an array with the valid prefixes for this card
	  prefix = cards[cardType].prefixes.split(",");
	      
	  // Now see if any of them match what we have in the card number
	  for (i=0; i<prefix.length; i++) {
	    var exp = new RegExp ("^" + prefix[i]);
	    if (exp.test (cardNo)) PrefixValid = true;
	  }
	      
	  // If it isn't a valid prefix there's no point at looking at the length
	  if (!PrefixValid) {
	     ccErrorNo = 3;
	     return false; 
	  }
	    
	   //alert('good.');
	  // See if the length is valid for this card
	  lengths = cards[cardType].length.split(",");
	  for (j=0; j<lengths.length; j++) {
	    if (cardNo.length == lengths[j]) LengthValid = true;
	  }
	  
	  // See if all is OK by seeing if the length was valid. We only check the 
	  // length if all else was hunky dory.
	  if (!LengthValid) {
	     ccErrorNo = 4;
	     return false; 
	  };   
	  
	  // The credit card is in the required format.
	  return true;
};

asDate2=function(fieldYear, fieldMonth, day) { //y=2003... m=1..12 d=1..31
	var yval = $('#'+fieldYear).val();
	var mval = $('#'+fieldMonth).val();
			
        var year  = parseInt(yval,10);
        var month = parseInt(mval, 10);
	
        return new Date(year,month-1,day);
};

DateDiff=function(d1, d2) {
        var difference = Date.UTC(d2.getFullYear(),d2.getMonth(),d2.getDate(),0,0,0) - Date.UTC(d1.getFullYear(),d1.getMonth(),d1.getDate(),0,0,0);
        return difference/1000/60/60/24;
};

checkDate2=function(fieldYear, fieldMonth, day) { //y=2003... m=1..12 d=1..31
	var yval = $('#'+fieldYear).val();
	var mval = $('#'+fieldMonth).val();
        var t = asDate2(fieldYear, fieldMonth, day);
        if (t.getFullYear()!=parseInt(yval,10)   ||
            t.getMonth()   !=parseInt(mval, 10)-1 ||
            t.getDate()    !=day) {
                return false;
        }
        return true;
};

/***************************************************************/
/* check expiry date 						*/
/***************************************************************/
checkExpirationDate=function(yearField, monthField) {
        var     expDate;
        var     day;
        for (day=31;!checkDate2(yearField,monthField,day);day--){}
        expDate = asDate2(yearField, monthField, day);
        if (DateDiff(new Date(),expDate) < 0) {
                return false;
        }
        return true;
}

/***************************************************************/
/* end cc validation						*/
/***************************************************************/



/******************************************************************/
/* validate direct debit payment	 			  */
/******************************************************************/
elfProefPassed=function(number, len) { 
   var n = number.split("").reverse().join("");
   if (len==10 && typeof(number[0])!='undefined' && number[0]==0) { 
   	var n = number;
   }
   var str = '';
   var c = 0; 
   var total = 0;
   for (i=0; i<len; i++) { 
	var digit =  n.charAt(i); //n[i]; 
        c++; 
        str += '\t_' + c + 'x'+digit + '\n';
	total += (c * digit);
   }
   var value = (total/11); 
   if (value>0) {  
	res = (value == parseInt(value, 10));
	return res;
   }else{
	return false;
   }
   return false;
}; 

validateDDNumber=function(field, required){ 
   var did 	= '#'+field;
   var ddnumber = jQuery.trim(jQuery(did).val());
   var re = /^[0-9]+$/;
   var ret = re.test(ddnumber);
   var re2 = /^[0]+$/;
   var ret2 = re2.test(ddnumber);
   if( !ret || ret2) { 
	var txt = 'Account number must contain digits only.';
	required['dd_error_req']=txt;
	return false;
   }
   var rlen = ddnumber.length;
   if (rlen>=1 && rlen<=7) { 
	return true;
   }
   if (rlen == 8 || (rlen>=11) ) { 
	var txt = 'Invalid Account number.';
	required['dd_error_req']=txt;
	return false;
   }
   if (rlen == 9 || rlen == 10) { 
	if (!elfProefPassed(ddnumber, rlen))  { 
	    var txt = 'Invalid Account number.';
	    required['dd_error_req']=txt;
	    return false;
	}
   }
   return true;
};

</script>


<script>

var Payment = {
	page: undefined, 
	required:		{}, 
	errors:			{}, 
	selector: 		'.paymclass',
	ptabs: 			'#paymtabsID',
	ccform: 		'#ccformID',
	ddform: 		'#ddformID',
	formclass: 		'.paymentformclass',
	check_cc: 		false, 
	check_dd: 		false, 
	arcontainer:		'#arcontainer',
	archeck: 		'#archeck',
	arcopy: 		'#autoRenewalCopyID',
	archeckcontainer: 	'#archeckcontainer',
		
	csarclass: 		'.csarclass', 
	cscontainer: 		'#cscontainer', 
		 
	ddcontainer: 		'#ddcontainer', 
	ddtitle: 		'#directDebitTitleID', 
	ddcopy: 		'#directDebitCopyID', 
		 
	ccmsg: 			'#ccmessageID',
	secmsg: 		'#secureMsgID',
	 
	ppaym_id: 		'#ppaym_id',
	ppaym: 			'', 
	paym_id: 		'#paym_id',
	paym: 			'', 
	
	cc_fields: { 
		cc_holder: 'Name on card*',
		cc_number: 'Card number*',
		cc_type:   'Card type*',
		cc_month:  'Expiration month*',
		cc_year:   'Expiration year*'
	},
	dd_fields: { 
		dd_account_name: 'Name of account holder*',
		dd_bank_code: 'Bank sort code*',
		dd_account_number:   'Account number*'
	},
		 
	def_errors:  {    
		cc_holder: 'Please enter name as on card', 
		cc_number: 'Please enter card number', 
		cc_type: 'Please select card type', 
		cc_month: 'Please select expiration month', 
		cc_year: 'Please select expiration year' , 
		
		dd_account_name: 'Please enter name of account holder*',
		dd_bank_code: 'Please enter bank sort code*',
		dd_account_number:   'Please enter account number*'
	}, 

	
        init: function(page) {
                var self = this;
                self.debug('**************************');
                self.debug('Payment::init()........');
                self.debug('**************************');
		self.page = page; 
		if (jQuery.inArray(self.page.kind, self.page.upsells)>-1 ) {
                        self.ppaym = $(self.ppaym_id).val();
		}

	
		// dd event 
		self.bindDDEvent();
        }, 
		 
	bindEvents: function() {
		var self = this;
                self.debug('**************************');
                self.debug('Payment::bindEvents()........');
                self.debug('**************************');

		// paym click event handler 
		$(self.selector).bind('change keypress', function() { 
			var val = $(this).val();
			$(self.paym_id).val(val);
			self.paym = val; 	
			 
			self.debug('change: ==> paym = '+ val);
			 
			// actions 		 
			self.disableCC();
			self.disableDD();
			self.toggleAR(false, false, false, false, false, false);
			self.setPayment(val);
		});
			
		// bind ar check event 
		$(self.archeck).bind('click keypress', function() { 
			if ($(this).is(':checked')) {
				$(self.arcopy).show(); 
			}else{
				$(self.arcopy).hide(); 
			} 
		});

	
		// init paym 
		var count = self.getPaymentCount();
			 
		self.debug('===> count payments : #' + count); 
		$(self.selector).first().attr('checked', 'checked');
		var val = $(self.selector+':checked').val();
		if (count == 1) {  
			$(self.ptabs).hide(); 
		} 

		$(self.archeck).attr('checked', false);
	
		self.disableCC();
		self.disableDD();
		self.toggleAR(false, false, false, false, false, false);
		
		// default one 	
		$(self.paym_id).val(val);
		self.paym = val; 	
		
		// set payment 	
		self.setPayment(val);
	}, 

	
	resetDD: function() { 
		var self = this; 
		if ($.exists(self.ddcopy)) { 
			$(self.ddcopy).hide();
		}
		
		var img = '#ddLinkImg'; 
		if ($.exists(img)) { 
			var src = $(img).attr('src');
			src=src.replace('up', 'down');
			$(img).attr('src', src);
		}

	}, 
	
	bindDDEvent: function() {
		var self = this; 
		self.resetDD();
		
		// dd actions
		if ($.exists(self.ddtitle)) { 
			$(self.ddtitle).css({'cursor':'pointer'});
			$(self.ddtitle).bind('click', function() { 
				if ($.exists(self.ddcopy)) { 
					if ($(self.ddcopy).is(':visible')) { 
						$(self.ddcopy).slideUp();
					}else{
						$(self.ddcopy).slideDown();
					}
				}	
				// arrow handle 
				var img = '#ddLinkImg'; 
				if ($.exists(img)) { 
					var src = $(img).attr('src');
					if (src.search('down')>=0) { 
						src=src.replace('down', 'up');
					}else{
						src=src.replace('up', 'down');
					}
					$(img).attr('src', src);
				}
			});	
		}

	}, 
	
	getPaymentCount: function() { 
		var self = this;
		var count = 0;
		var sob = $(self.selector);
		sob.each(function() {
			count++;
		});
		return count;
	}, 
	
	// CC  
	enableCC: function() { 
		var self = this;
		self.check_cc = true;
		$(self.ccform).slideDown();
		$(self.ccmsg).show();
		$(self.secmsg).show();
		$.each(self.cc_fields, function(f, n) { 
			//self.debug(f + ':'+n);
			self.processField(f,n); 
		});
	}, 
	disableCC: function() { 
		var self = this;
		self.check_cc = false;
		$(self.ccform).slideUp();
		$(self.ccmsg).hide();
		$(self.secmsg).hide();
	}, 
	
	// DD 
	enableDD: function() { 
		var self = this;
		self.check_dd = true;
		$(self.ddform).slideDown();
		$.each(self.dd_fields, function(f, n) { 
			//self.debug(f + ':'+n);
			self.processField(f,n); 
		});
	}, 
	disableDD: function() { 
		var self = this;
		self.check_dd = false;
		$(self.ddform).slideUp();
	}, 

		
	toggleAR: function(show_copy, disable, check, show_container, cs, dd) {
		var self = this; 
	
		$(self.archeckcontainer).show();
		
		// toggle AR copy 
		if (!show_copy) {	
			$(self.arcopy).hide();
		}else{
			$(self.arcopy).show();
		}	
		
		// toggle ar checkbox
		if (!check) {
			$(self.archeck).attr('checked', false);
		}else{
			$(self.archeck).attr('checked', 'checked');
		}
		
		// toggle AR checkbox 
		if (!disable) { 
			$(self.archeck).attr('disabled',  false);
		}else{
			$(self.archeck).attr('disabled',  true);
			$(self.archeckcontainer).hide();
		}
		
		// toggle AR container
		if (!show_container) {
			$(self.arcontainer).hide();
		}else{
			$(self.arcontainer).show();
		}
	
		//toggle cs container
		if (!cs) {
			$(self.cscontainer).hide();
		}else{
			$(self.cscontainer).show();
		}
	
		//toggle dd container
		if (!dd) {
			$(self.ddcontainer).hide();
		}else{
			$(self.ddcontainer).show();
		}

	}, 

	setPayment: function(paym) {
		var self = this; 	
		 
		self.debug("********************************************************");
		self.debug('Payment::setPayment()....');
		self.debug("********************************************************");
		//self.debug('paym = '+paym +'; self.ppaym = ' +self.ppaym);	
		//console.log('paym = '+paym +'; self.ppaym = ' +self.ppaym);	
		
		if (paym=='C' || paym=='F' || paym=='P' || paym=='G' ) { 
			if (self.ppaym!='C' && self.ppaym!='F' && self.ppaym!='A') { 
				self.enableCC();
			}
			if (paym == 'C') { 
				self.toggleAR(false, false, false, false, false, false);
			} 
			if (paym == 'P') { 
				//self.toggleAR(true, false, true, true, false, false);
				self.toggleAR(false, false,false, true, false, false);
			} 
			if (paym == 'F') {
				self.toggleAR(false, false, false, false, true, false);
			}
			 
		}else if (paym == 'A') { 
			self.debug('==> AR ; self.ppaym = '+self.ppaym);
			if (self.ppaym == '') { 
				self.enableCC();
				self.toggleAR(true, true, true, true, false, false);
			}else{
				if (self.ppaym == 'C') { 
					self.debug('wtf1 ! ');
					self.toggleAR(true, true, true, true, false, false);
				}else if (self.ppaym == 'B') { 
					self.debug('wtf 2! ');
					self.enableCC();
					self.toggleAR(true, true, true, true, false, false);
						
				}else if (self.ppaym == 'P') { 
					self.debug('wtf2 ! ');
					self.toggleAR(true, true, true, true, false, false);
				} 
			}
		}else if (paym == 'D') { 
			if (self.ppaym!='D') { 
				self.enableDD();
				self.toggleAR(false, false, false, false, false, true);
			}
		}
	},
	
        processField: function(f, n) {
                var self = this;        
		 
                var field = '#'+f;
                
                $(field).unbind('click keypress mouseleave blur');
                
                //var ftype =$(field).attr('type');
		 
                // init 
                var val = $.trim($(field).val());
                if (val=='') {
                       	$(field).css({'border':'1px solid #ccc','color':'#4a4a4a'}); 
			//alert(f);
			self.updateValue(f, '');	
                }
        
                // on click/keypress
                $(field).bind('click keypress', function() { 
                        var id = $(this).attr('id'); 
                        var n   = self.getLabel(id);
                        var val = $.trim($(this).val());
                        self.debug('id='+id+'; n='+n+'; val='+val);
                        if (val.indexOf(n)!=-1) {
				self.updateValue(id, '');
                        }
                        $(this).css({'border':'1px solid #ccc','color':'#4a4a4a'});
			
			var req = '#'+id+'_req';
			if ($.exists(req)) { $(req).html('');}
                });
        
                // on mouseleave 
                $(field).bind('mouseleave blur', function() { 
                        var id  = $(this).attr('id'); 
                        var n   = self.getLabel(id);
                        var val = $.trim($(this).val());
                        if (val == '') {
				self.updateValue(id, n);
                        }else{
                                
                                var match = val.toLowerCase()==n.toLowerCase() ? true : false;
                                if (match) { return false;} 
                        }
                });
        }, 

	updateValue: function(id, v) { 
		var self = this;
	 	var exclude = ['cc_type','cc_month','cc_year'];
	 	if (jQuery.inArray(id, exclude) >-1 ) {
                }else{ 
			$('#'+id).val(v); 
		}
	}, 
		 
        getLabel: function(id) {
                var self = this;        
                var n  = '';
		if (typeof(self.cc_fields[id])!='undefined') { 
			 n = $.trim(self.cc_fields[id]);
		}else if (typeof(self.dd_fields[id])!='undefined') { 
			 n = $.trim(self.dd_fields[id]);
		}
                return n; 
        },

        getError: function(id) {
                var self = this;        
                var n  = typeof(self.def_errors[id])!='undefined' ? $.trim(self.def_errors[id]) : '';
                return n; 
        },

	validate: function() {
		var self = this;
		 
		self.debug('********************************************');
                self.debug('Payment::validate()...');
		self.debug('********************************************');
		
		self.required={};
		self.errors={};
		
		var val = self.paym ; 	
		if (val == '') { 
			val = $(self.selector+':checked').val();
			$(self.paym_id).val(val);
			self.paym = val;
		}
		if (val == '') { 
			self.errors['#selected_paym']='Please select your payment.';
			return false;
		}
		
		self.debug('validate: ==> paym = '+ val); 
		if (val == 'C' || val=='P' || val == 'F' || val == 'G' || val == 'A') {
			if (self.check_cc) { 
				$.each(self.cc_fields, function(f, n) { 
					self.validateCCField(f,n);        
				});
				var len = getObjectLength(self.required);
				if (len==0) {
					var cc_type=$.trim($('#cc_type').val());
					self.debug('cc_type : ' + cc_type);
					var ccfield = 'cc_number';
					var ccmonth = 'cc_month';
					var ccyear = 'cc_year';
					if (!checkCreditCardNumber(ccfield, 'credit card number', cc_type)) {
						var n = 'Enter valid card number.'; 
						var ccno = $.trim($('#'+ccfield).val());
						self.required['#'+ccfield]=ccno;	
						self.errors['#'+ccfield]=n;
					}
					if (!checkExpirationDate(ccyear,ccmonth)) {
						var n = 'Credit Card should not be expired.';
						var ccm = $.trim($('#'+ccmonth).val());
						var ccy = $.trim($('#'+ccyear).val());
						self.required['#'+ccyear]=ccy;
						self.errors['#'+ccyear]=n;
					}
				}
			}
			// is ar checked?
			if (val == 'P') {
				if ($(self.archeck).is(':checked')) { 
					self.debug('set to A');
					$(self.paym_id).val('A');	
				}else{
					self.debug('set to C');
					$(self.paym_id).val('C');	
	
				}
			}else{
				if ($(self.archeck).is(':checked')) { 
					$(self.paym_id).val('A');	
				}else{	
					$(self.paym_id).val(val);	
				}
			}
		}else if (val == 'D') { 
			if (self.check_dd) { 
				$.each(self.dd_fields, function(f, n) { 
					self.validateCCField(f,n);        
				});
				var len = getObjectLength(self.required);
				if (len==0) {
					var cid = 'dd_bank_code'; 
					var nid = 'dd_account_number'; 
					var code= $.trim($('#'+cid).val());
					var no  =  $.trim($('#'+nid).val());
					if (code.length!=6) {
						var n = 'Sort code should be 6 charaters'; 
						self.required['#'+cid]=code;	
						self.errors['#'+cid]=n;
					}
					if (no.length>10) {
						var n = 'Account number should not exceed a maximum of 10 digits'; 
						self.required['#'+nid]=no;	
						self.errors['#'+nid]=n;
					}
				}
			}
		}

		
	},
	
        validateCCField: function(f, n) {
                var self = this;        
		//self.debug('********************************************');
                //self.debug('Payment::validateCCField('+f+','+n+')...');
		//self.debug('********************************************');
                var field = '#'+f;
                var req = $(field).hasClass('required_field');
                if (!req) { return false;}
                        
                // init 
                var val = $.trim($(field).val());
                if (val=='') {
                        self.required[field]=n;
			var err = self.getError(f);
                        self.errors[field]=err;
                        return false;
                }
                var match = val.toLowerCase()==n.toLowerCase() ? true : false;
                if (match) { 
                        self.required[field]=n;
			var err = self.getError(f);
                        self.errors[field]=err;
                        return false;
                }
        }, 

	update: function() { 
	       	var self = this;        
               	self.debug('Payment::update()...');
               	self.debug('self.paym = '+self.paym); 
		if (self.check_cc) { 
			$.each(self.dd_fields, function(f, n) { 
			       self.updateField(f,n);  
			});
		}else if (self.check_dd) { 
			$.each(self.cc_fields, function(f, n) { 
			       self.updateField(f,n);  
			});
		}else{
			$.each(self.cc_fields, function(f, n) { 
			       self.updateField(f,n);  
			});
			$.each(self.dd_fields, function(f, n) { 
			       self.updateField(f,n);  
			});
		}
        },
        
        updateField: function(f, n) {
                var self = this;        
                //self.debug('Payment::updateField('+f+','+n+')...');
                var field = '#'+f;
		 
                // init 
                var val = $.trim($(field).val());
                var match = val.toLowerCase()==n.toLowerCase() ? true : false;
                if (val=='' || match) {
                        $(field).val('');
                }
        },
        

	showErrors: function() { 
		var self = this;
		 
		self.debug('***********************************************');
		self.debug('Payment::showErrors()...');
		self.debug('***********************************************');
        	var scroll = '';
                $.each(self.required, function(f, n) {
               	 	$(f).css({'border':'1px solid #cb272c','color':'#cb272c'}).val(n);
               	 	if (scroll=='') { scroll = f; } 
                });     
                $.each(self.errors, function(f, e) {
			var field = f+'_req';
			if ($.exists(field)) {
				$(field).css({'color':'#cb272c', 'font-size':'11px'}).html(e);
				if (scroll=='') { scroll = field; } 
			}
                });     
                $('html,body').animate({ scrollTop: $(scroll).offset().top}, 'slow');
        }, 
		
	getErrors: function() { 
                var self = this;
                return self.errors; 
        }, 
	
	debug: function(msg) { 
		//console.log(msg);	
	}
};
</script>
	
<script>
var Offer = {
        init: function(arr) {
                var self = this;
		self.debug('**************************');
		self.debug('Offer::init()........');
		self.debug('**************************');
		$.each(arr, function(a,v) { 
			self[a]=v;
		});
        }, 
	debug: function(msg) {
	}
};
var OfferCollection = {
	page: 		undefined, 
	dtitle: 	$('#deliveryDetailsTitleID'),
        bcheck: 	$('#detailCheckContainer'), 
        pproductField: 	'#pproduct_id', 
        dcontainer: 	'#deliveryContainer', 
        termkindField: 	'#termkind_id', 
        productField: 	'#product_id', 
	submit:    '#submitID', 


	items:		{}, 
	current: 	'' , 
	currency_hash: { 
		'AUD':'A$',
		'CAD':'C$',
		'CHF':'CHF',
		'DKK':'DKK',
		'EUR':'&#8364;',
		'GBP':'&#163;',
		'HKD':'HK$',
		'IDR':'IDR',
		'ISK':'ISK',
		'INR':'INR',
		'JPY':'&#165;',
		'KRW':'W',
		'MYR':'MYR',
		'NOK':'NOK',
		'NZD':'NZ$',
		'PKR':'PKR',
		'SEK':'SEK',
		'SGD':'S$',
		'THB':'THB',
		'TWD':'TWD',
		'USD':'US$',
		'ZAR':'R',
		'NRS':'NRS',
		'PHP':'PHP',
		'USD2':'US$',
		'CZK':'CZK',
		'HUF':'HUF',
		'SKK':'SKK',
		'PLN':'PLN',
		'TL':'TL',
		'EEK':'EEK',
		'ALL':'ALL',
		'BGL':'BGL',
		'RON':'RON',
		'CSD':'CSD',
		'HRK':'HRK',
		'LVL':'LVL',
		'LTL':'LTL',
		'USD3':'US$'
	}, 
		 
        init: function(page) {
                var self = this;
		
		self.debug('**************************');
		self.debug('OfferCollection::init()........');
		self.debug('**************************');
		self.page = page; 
        }, 
		 
	add: function(a,v) {
		var self = this;
		//alert(a+ ':' + typeof(v));
		self.items[a] = v;
	}, 
		 
	bindEvents: function() {
		var self = this; 
		
		var oselector   = '.offerclass';
		var tselector   = '.tbl_class';
		var rselector 	= '.offer_tr';
		var rid  	= '#offer_req';
		var otbl  	= '#offertable';
		var prefix  	= '#tbl_offer_';

		var num_offers = $(oselector).length;
		self.debug('num_offers = ' + num_offers);
	
		
		// row click 	
		$(rselector).click(function() { 
				$(rid).html('');
				$(otbl).css({'border':'0px'});
				
				var o = $(this).attr('value').split("_");
				var id = o[1];
				var tbl = prefix+id;
				$(tselector).css({'background':'#FFF'});
				$(tbl).css({'background':'#f0f0f0', 'padding':'0px'});
				$(this).css({'border':'0px'});
				$('#offer'+id).attr('checked', 'checked');
			
				self.processOffer(id);
				
		});
	 
		// radio click 
		$(oselector).bind('click change keypress', function() { 
				var o = $(this).val();
				self.debug('Selected ==> offer = '+ o);
				// css 
				$(rid).html('');
				$(otbl).css({'border':'0px'});
				var tbl = prefix+o;
				$(tselector).css({'background':'#FFF'});
				$(tbl).css({'background':'#f0f0f0', 'padding':'0px'});
				$(this).css({'border':'0px'});
				
				// call other 
				self.current = o;
				self.processOffer(o);
		});
	
			
		var ob =  $(oselector).first();
		var hidden = ob.is(':hidden'); 
		self.debug('ob = ' + ob + '; hidden=' + hidden);
				
		// init offer 
		if (!hidden) { 
			ob.attr('checked', 'checked');
			if (typeof(ob)!='undefined') {
				var o = ob.val();
				self.debug('1. offer = ' + o);
				self.current = o;
				self.processOffer(o);
				 
				var tbl = prefix+o;
				$(tselector).css({'background':'#FFF'});
				$(tbl).css({'background':'#f0f0f0', 'padding':'0px'});
			}
		}else{
			if (typeof(ob)!='undefined') {
				var o = ob.val();
				self.debug('2. offer = ' + o);
				self.current = o;
				self.processOffer(o);
			}
		}
	},
	
	getSelectedValue: function()  {
		var self = this; 
		var oselector   = '.offerclass';
	
			
		var obj = $(oselector);
	
		var len =  obj.length;
		self.debug('len = '+ len);
		var ob = undefined; 
		if (len == 1) { 
			ob = $(oselector);
		}else if (len>1) {
			ob = $(oselector+':checked');
		}
		//var ob = $(oselector+":checked");
		if (typeof(ob)=='undefined') { 
			$(oselector).first().attr('checked', 'checked');
			 ob = $(oselector+":checked");
		}
		return ob.val();
	},
			
	
	getCurrentOffer: function() { 
		var self = this; 	
		var v = self.getSelectedValue();
		self.debug('selected offer = ' + v);
		var obj = typeof(self.items[v]) ? self.items[v] : undefined;
		return obj;
	}, 
		
	processOffer: function(offer) { 
		var self = this;
		var obj = typeof(self.items[offer]) ? self.items[offer] : undefined;
			
		if (typeof(obj)!='undefined') { 
			self.processPlaceHolders(obj);
			var type  = typeof(obj.sub_type)!='undefined' ? $.trim(obj.sub_type) : ''; 
			var product  = typeof(obj.product)!='undefined' ? $.trim(obj.product) : ''; 
			var termkind  = typeof(obj.termkind)!='undefined' ? $.trim(obj.termkind) : ''; 
			if ($.exists(self.termkindField)) { 
				$(self.termkindField).val(termkind);	
			}
			if ($.exists(self.productField)) { 
				$(self.productField).val(product);	
			}
	
			//console.log('product = ' + product +' ; termkind='+termkind); 
			 
			self.debug('type = '+ type);	 
			if (type.search('gift')>=0) { return false; } 
			 
			self.getPayment(obj);
			//if (jQuery.inArray(self.page.kind, self.page.landings)>-1 ) {
			self.chargeAmount(obj);
			//}
		}
	}, 
		
	processPlaceHolders: function(obj) { 
		var self = this;
		var tk      		= typeof(obj.termkind)!='undefined' 	  ? $.trim(obj.termkind) : ''; 
		var product      	= typeof(obj.product)!='undefined' 	  ? $.trim(obj.product) : ''; 
		var termkind 		= tk ;
		var price   		= typeof(obj.price)!='undefined' 	  ? $.trim(obj.price) : '' ;
		var followup_price   	= typeof(obj.followup_price)!='undefined' ? $.trim(obj.followup_price) : '' ;
		var savings   		= typeof(obj.templ1)!='undefined' 	  ? $.trim(obj.templ1) : '' ;
		var term    		= typeof(obj.term)!='undefined' 	  ? $.trim(obj.term) : '';
		var followup_term    	= typeof(obj.followup_term)!='undefined'  ? $.trim(obj.followup_term) : '';
		var currency 		= typeof(obj.currency)!='undefined' 	  ? $.trim(obj.currency) : '';
		
                price =  number_format(price, 2);
			 
		//console.log('===> product='+tk +'; price='+price+'; savings='+savings+'; term='+term+'; currency='+currency);      
		currency = typeof(self.currency_hash[currency])!='undefined' 	? self.currency_hash[currency] : currency; 	
		//console.log('===> product='+tk +'; price='+price+'; savings='+savings+'; term='+term+'; currency='+currency);      
		var fields = ['benefitsTitleID', 'benefitBulletsTitleID'] ; //, 'paymentDetailsTitleID'];
			
		$.each(fields, function(ind, f) { 
			var shown = '#'+f;
			var hidden = shown+'_hidden';   
			if ($.exists(shown) ) { 
				var html = ($.exists(hidden)) ? $(hidden).val() : '';
				tk = typeof(products[tk])!='undefined' ? products[tk] : tk;     
				html = html.replace(/#Product#/g        ,  tk);
				html = html.replace(/#Currency#/g, currency);
				html = html.replace(/#Savings#/g, savings);
				html = html.replace(/#Price_Followup#/g , number_format(followup_price, 2));
				html = html.replace(/#Term_Followup#/g  , followup_term);
				html = self.processPricePH(term, price, html);
				self.debug(shown+ ': term='+term+'; price='+price+';  html:' + html);
				$(shown).html(html);
			}
			
		});

		
		self.debug('savings = ' + savings);
		// replace placeholders indicated by class='replace_osstrict_ph' 
		$('.replace_osstrict_ph').each(function() { 
			var html = $(this).html();
			tk = typeof(products[tk])!='undefined' ? products[tk] : tk;     
			html = html.replace(/#Product#/g        ,  tk);
			html = html.replace(/#Currency#/g, currency);
			html = html.replace(/#Savings#/g, savings);
			html = html.replace(/#Price_Followup#/g , number_format(followup_price, 2));
			html = html.replace(/#Term_Followup#/g  , followup_term);
			html = self.processPricePH(term, price, html);
			$(this).html(html);
		});	

		
		if (jQuery.inArray(self.page.kind, self.page.landings)>-1 ) {

			// init billing toggle 
			self.debug('init billing ...');
			self.debug('self.page : '  + typeof(self.page));
			self.debug('self.page.billing : '  + typeof(self.page.billing));
			self.page.billing.toggle.attr('checked', false);
			self.page.billing.check = self.page.billing.toggle.is(':checked'); 
			self.page.billing.toggleBilling();

			if ($.exists(self.bcheck)) { self.bcheck.show(); }
			if ($.exists(self.dtitle)) { self.dtitle.html('DELIVERY ADDRESS'); }
			

			 
			if (termkind.indexOf('product_j')!=-1) {
				self.debug('product digital found');	
				if ($.exists(self.bcheck)) { self.bcheck.hide(); }
				if ($.exists(self.dtitle)) { self.dtitle.html('BILLING ADDRESS'); }
			}
			
		}else if (jQuery.inArray(self.page.kind, self.page.upsells)>-1 ) {
			self.debug('==>upsell page;  product='+product);	
		
			if (typeof(self.page.delivery)!='undefined') { 
				self.debug('deliver object exists ');
				var dcontainer = self.page.delivery.container ;
				var did  = self.page.delivery.container.attr('id') ;
				self.debug('==> did = ' + did);
				if ($.exists('#'+did)) { 
					dcontainer.hide();	
					self.page.delivery.validateUpsell = false;
				}
		
		 
				if ($.exists(self.pproductField)) { 
					var pproduct = $.trim($(self.pproductField).val());
					if (pproduct!='' && product!='') {
						var sarr = {
							'J': 1, 	/* Digital */
							'E': 1 		/* Web 	   */	
						}; 
						var darr = {
							'D': 1, 	/* Print */
							'H': 1, 	/* Print + Digital */	
							'Y': 1		/* Intelligent Life */
						}; 
						self.debug('===> pproduct = ' + pproduct);
						if (typeof(sarr[pproduct])!='undefined' &&  typeof(darr[product])!='undefined') { 
							self.debug('from product '+pproduct+' to product '+product);
							if ($.exists('#'+did)) { 
								dcontainer.slideDown();	
								self.page.delivery.validateUpsell = true;
							}
						}
					}
				}
			}
		}
	},

	processPricePH: function(term, price, html) { 
		//console.log('price = '+price);
		price = price.replace(',','');
		//console.log('price = '+price);
		var self = this;
		var w_price = 0;
		var m_price = 0;
		var q_price = 0;
		var a_price = 0;
		var h_price = 0;
		var t_price = 0;

		term = term.replace(/[A-Za-z]/g, '');
                w=1;
                m=(4*w);
                q=(3*m);
                a=(12*m);
                h=(2*q);
                t=(2*a);

                // term = x  weeks =>  price,  1 week => (1*price/term)
                w_price =  number_format(((w*price)/term), 2);
                m_price =  number_format(((m*price)/term), 2);
                q_price =  number_format(((q*price)/term), 2); 
                a_price =  number_format(((a*price)/term), 2);
                h_price =  number_format(((h*price)/term), 2);
                t_price =  number_format(((t*price)/term), 2);

		//console.log('==> price = ' + price + '; w_price = ' + w_price);

		var which = { 
				'#Price#': price.replace(',', ''), 
				'#Price_Weekly#':w_price.replace(',',''), 
				'#Price_Monthly#':m_price.replace(',',''),
				'#Price_Quarterly#':q_price.replace(',',''),
				'#Price_Annually#':a_price.replace(',',''),
				'#Price_Halfyearly#':h_price.replace(',',''),
				'#Price_Twoyearly#':t_price.replace(',','')
			   }; 
			
		$.each(which, function(ph, price_value) { 
			if (html.indexOf(ph)!=-1) { 
				if (parseInt(price_value)==0) { price_value='0.00';}
				/*if (parseInt(price_value)>0) { price_value = price_value.replace(/.00$/,''); }	*/
				html 		= html.replace(ph,  price_value);
			}
		});
		html 		= html.replace(/#Term#/g	,  term);
		return html;
	}, 
	
	getPayment:  function(obj) { 
		var self = this; 
		if ($.exists(self.submit)) { 
			$(self.submit).hide();
		}
		var country=$.trim($('#country').val());
		self.debug('country = '+ country);
		if (typeof(obj.paym)!='undefined') {
			var paym = obj.paym; 
			self.debug('paym: ' + paym);
			var payments = paym.split(',');
			var pstr = '';
			$.each(payments, function(pi, pm) { 
			    pstr += '&payments[]='+pm;
			}); 
			var url       = 'ajax_request.php';
			var params    = 'action=get_payment_form'  + pstr+'&country='+country;
			self.debug('params: '+params);
			var container = '#paymentFormID';         
			$(container).html('Processing request, please wait...').fadeTo(500, 0.2);
			$.ajax({
				type: "POST",
				url:  url,
				data: params,
				success: function(response){
					var data = jQuery.parseJSON(response);
					if (typeof(data.error)!='undefined') { 
						alert(data.error);
						return false;
					}
					if (typeof(data.html)!='undefined')  { 
						if ($.exists(container)) { 
							self.debug('cool..');
							$(container).html(data.html).show();
							self.debug('bind events of payment object...');
							self.page.payment.bindEvents();
						}
					}
					$(container).fadeTo(500, 1);
					if ($.exists(self.submit)) { 
						//alert('show submit'); return ; 
						$(self.submit).show();
					}
				}
		       });

		}
	} ,

	chargeAmount: function(obj) { 
		var self = this; 
			
		self.debug('chargeAmount()...');
		var container = '#chargePrice';
	     	if (typeof(obj)!='undefined'  &&  typeof(obj.price)!='undefined') {
			self.debug('ddddddddd');
			var price   		= typeof(obj.price)!='undefined' 	  ? $.trim(obj.price) : '' ;
			var term    		= typeof(obj.term)!='undefined' 	  ? $.trim(obj.term) : '';
			var currency 		= typeof(obj.currency)!='undefined' 	  ? $.trim(obj.currency) : '';
			var paym 		= typeof(obj.paym)!='undefined' 	  ? $.trim(obj.paym) : '';
			var country 		= typeof(obj.country)!='undefined' 	  ? $.trim(obj.country) : '';
			
			self.debug('country='+country+'; price='+price+'; term='+term+'; currency=['+currency+'];  paym='+paym);	
			
			if (currency=='') {
				if (country='CA') {currency='CAD';} 
			
			}
			currency = typeof(self.currency_hash[currency])!='undefined' 	? self.currency_hash[currency] : currency; 	
			self.debug('==> currency = ' +currency);
		
		
			self.debug('==> currency = ' +currency + ' ; price='+price);
			// charge price container 
			var charge_price = currency +''+ number_format(price, 2);
			self.debug('charge price = ' + charge_price +' ; currency='+currency);
			
			if ($.exists(container)) { 	
				$(container).html(charge_price).css({'color':'#cb262c', 'font-weight':'bold'});
			}else{
				self.debug(container + ' does not exist' );
			}
		
			if (jQuery.inArray(self.page.kind, self.page.landings)>-1 ) {
				// amount (price plus vat ) 
				self.getTotalAmount(price, currency);
			}
		}
	}, 

	getTotalAmount: function(price, currency) {
	    var self = this;
		 
	    var container = '#chargeAmount';
	    var country = $.trim($('#country').val());
	    var state = $.trim($('#state').val());
	    if (country!='US' && country!='CA') { 
		var charge_price = currency + number_format(price, 2);
		if ($.exists(container)) { $(container).html(charge_price); }
		return ; 
	    } 
	    if (state=='') { 
		var charge_price = currency + number_format(price, 2);
		if ($.exists(container)) { $(container).html(charge_price); }
		return ; 
	    } 
	    var url  = 'ajax_request.php';
	    var data = 'action=get_amount';
	    data     += "&province="+state+'&country='+country+'&price='+escape(price);
	    data     += '&sid='+Math.random();
	    self.debug(data);
	    $.ajax({
			type: "POST",
			url: url,
			data: data,
			success: function(response){
				var data = jQuery.parseJSON(response);
				if (typeof(data.amount)!='undefined')  { 
					var amount = currency + number_format(data.amount, 2);
					$(container).html(amount);
				}
				if (typeof(data.error)!='undefined') { 
					alert(data.error);
				}
			}
	    });
	},


	validate: function() { 
		var self = this; 	
			 
		var selector = '.offerclass'; 
		var focus ='';
		var offer = $(selector+':checked').val(); //.first().attr('checked', 'checked');
		self.debug('selected offer = ' +offer);
		if (offer == '') { 
		    //$(selector+':visible').first().attr('checked', 'checked');
		    var focus = $(selector).first().attr('id');
		    $('#'+focus).focus();
		    alert('Please select your offer');
		    $('html,body').animate({ scrollTop: $("#"+focus).offset().top}, 'slow');
		    return false;
		}       
		return true;
	}, 
	
	debug: function(msg) {
		//console.log(msg);
	}
 

};

</script>
	
<script>




/*************************************************/
/* Account class 				**/
/*************************************************/
var Account = {
	
	// containers 
	fcontainer: 	$('#acct_container'), 
	mcontainer: 	$('#acct_msg_container'), 
	msgField:	$('#acct_message'), 
	acheck: 	$('#accCheckBox'), 
	aclass: 	$('.acctclass'), 
	login: 		$('#acct_login'), 
	loginContainer: $('#acct_login_container'), 
	logout: 	$('#acct_logout'), 
		
	apiUID: 	$('#api_uid'), 
	apiToken: 	$('#api_token'), 
	apiEmail: 	$('#api_email'), 
		
	emailField: 	$('#email'), 
	emailFieldErr: 	$('#email_req'), 
		
	passwdField: 	$('#passwd'), 
	cpasswdField: 	$('#cpasswd'), 
	passwdClearField: $('#passwd-clear'),  // for masking 
	cpasswdClearField: $('#cpasswd-clear'),  // for masking 
	note: 		$('#passwdNote'), 
	
	//progressField: 	$('#acct_progress'), 
	progressField: 	$('#progress_bar'), 
	errField: 	$('#apiMsgError'), 
	sessid: 	$('#sessid'), 
	
	options: {
			exist: false, 
			field: $('#acct_exists') 
	}, 
	emailInUse: 	false, 
		 
	// variable declarations 
	skipEcom:	false, 
	loggedOn:	false, 
	required: 	{}, 
	errors: 	{}, 
        new_fields: { 
			acct_fname: 'Given name*', 
			acct_lname: 'Family name*', 
			email: 'E-mail address*', 
			cemail: 'Confirm e-mail address*', 
			passwd: 'Password*', 
			//cpasswd: 'Password*' 
			cpasswd: 'Confirm password*' 
        }, 
        cur_fields: { 
			email: 'E-mail address*', 
			passwd: 'Password*' 
        }, 

        def_errors: {
			acct_fname: 'Please enter your given name', 
			acct_lname: 'Please enter your family name',  
			email: 'Please enter your e-mail address', 
			cemail: 'Please confirm your e-mail address', 
			passwd: 'Please enter your password', 
			cpasswd: 'Please confirm your password' 
        }, 
               
	// methods 
        init: function() {
                var self = this;
		
		self.debug('*****************************');
		self.debug('Account::init...');
		self.debug('*****************************');
		
		
		// init user 
		self.initUser();
		
		// trigger Fields 
		self.triggerFields();
		
		// bind event 
		self.bindEvents();
	}, 
	
	switchMode: function() { 
		var self = this; 
		//self.debug('switching mode..');
		self.options.field.attr('checked', 'checked');
		
		// trigger Fields 
		self.triggerFields();
		

	},
		
	triggerFields: function() { 
		var self = this; 
		if (self.loggedOn) { return ;}
		
		self.options.exist = self.options.field.is(':checked');
		self.hideFields();
		self.note.show();
		if (!self.options.exist) { 
			self.newFields();	
		}else{
			self.curFields();	
			self.note.hide();
		}
	}, 
	
	
	togglePassword: function() { 
		var self = this;
		if (self.loggedOn) { return ;}
		 
		if (!self.passwdClearField) { 
			return ; 
		}
		// passwd 
		self.passwdClearField.show();
		self.passwdField.hide();
		 
		// cpasswd 
		self.cpasswdClearField.show();
		self.cpasswdField.hide();
		
		self.passwdClearField.focus(function() {
		   //console.log('wtf1');
		   self.passwdClearField.hide();
		   self.passwdField.show();
		   self.passwdField.focus();
		   //self.passwdField.css({'color':'#4a4a4a'});
			
		   var v = $.trim(self.passwdField.val());
		   var vl = v.toLowerCase();
		   if (vl == 'password*') { 
		   	self.passwdField.val('');
		   }
		});
		
		self.cpasswdClearField.focus(function() {
		   self.debug('c-wtf1');
		   self.cpasswdClearField.hide();
		   self.cpasswdField.show();
		   self.cpasswdField.focus();
		   //self.cpasswdField.css({'color':'#4a4a4a'});
		   var v = $.trim(self.cpasswdField.val());
		   var vl = v.toLowerCase();
		   if (vl == 'confirm password*') { 
		   	self.cpasswdField.val('');
		   }
		});
	}, 	
	
	bindEvents: function() { 
		var self = this;	

		
		// bind checkbox handler 
		self.options.field.bind('click keypress', function() { 
			self.errField.html('');
			self.progressField.html('');
			self.triggerFields();
			 
			self.skipEcom=false;
		});
		
		// toggle passwd field
		self.togglePassword();
		
		// bind input event 
		$.each(self.new_fields, function(f, n) { 
			self.processField(f,n);	
		});
		self.login.bind('click keypress', function() { 
			self.errField.html('');
			self.validateLogin();
		});
		self.logout.bind('click keypress', function() { 
			self.logOut();	
		});
	},

	processField: function(f, n) {
		var self = this;	
		var field = '#'+f;
		
		$(field).unbind('click keypress mouseleave blur');
			
		// init 
		var val = $.trim($(field).val());
		if (val=='') {
			$(field).css({'border':'1px solid #ccc','color':'#4a4a4a'}).val(n);
		}
	
		// on click/keypress
		$(field).bind('click keypress', function() { 
			var id = $(this).attr('id'); 
			self.debug('id = ' + id);
			var n   = self.getLabel(id);
			var val = $.trim($(this).val());
			if (val.indexOf(n)!=-1) {
				$(this).val('');
			}
			$(this).css({'border':'1px solid #ccc','color':'#4a4a4a'});
			var req = '#'+id+'_req';
                        if ($.exists(req)) { $(req).html('');}
			
			if (id.search(/^email/i)>=0) {  
				//self.debug('id = ' + id);
				self.progressField.html('');
			}

			self.errField.html('');
			self.skipEcom=false;
		});
	
	
		// on blur 
		if (field.search(/^#email/i)>=0) {  
			// on blur 
			$(field).bind('blur', function() { 
				var id  = $(this).attr('id'); 
				var n   = self.getLabel(id);
				var val = $.trim($(this).val());
				if (val == '') {
					$(this).val(n);
				}else{
					var match = val.toLowerCase()==n.toLowerCase() ? true : false;
					if (match) { return false;} 
					
					if (id.search(/^email/i)>=0) {  
						if (!self.processEmail(id, val)) {
							self.debug('id='+id+' ; eeeeeeeeeeeee');
							
							var err = typeof(self.errors['#'+id])!='undefined' ? self.errors['#'+id] : 'E-mail is invalid';  
							$('#'+id+'_req').html(err).css({'color':'#cb272c'});		
							$('#'+id).css({'color':'#cb272c', 'border':'1px solid #cb272c'});		
							return false;
						}
					}
				}
			});
		
		}else {
			// on mouseleave 
			$(field).bind('mouseleave blur', function() { 
				var id  = $(this).attr('id'); 
				self.debug('==> id = ' + id); 	
				var n   = self.getLabel(id);
				var val = $.trim($(this).val());
					
				if (id == 'passwd' || id=='cpasswd') { 	 
					self.debug('process passwd '+id+'...');
				   	var match = val.toLowerCase()==n.toLowerCase() ? true : false;
					if (val=='' || match) {
						self.debug('==> wtf2');
						if (id=='passwd')  { 
							self.passwdClearField.show();
							self.passwdField.hide();
						}else{
							self.cpasswdClearField.show();
							self.cpasswdField.hide();
						}
					}else{
						self.debug('wtf3');
						if (!self.processPassword(id, val)) {
							return false;
						}
					}
				}else{
					if (val == '') {
						$(this).val(n);
					}else{
						var match = val.toLowerCase()==n.toLowerCase() ? true : false;
						if (match) { return false;} 
						if (id.search(/passwd/i)>=0) {  
							if (!self.processPassword(id, val)) {
								return false;
							}
						}
					}
				}
			});
		}
	}, 

	hideFields: function() { 
		var self = this;	
		self.debug('-- hideFields -- ');
		$.each(self.new_fields, function(f, n) { 
			var field = '#'+f;
			$(field).val(n);
			var row   = field+'_row'; 
			$(row).hide();
		});
		self.login.hide();
		self.loginContainer.hide();
		
	},

	newFields: function() { 
		var self = this;	
		self.debug('--newFields--');
		$.each(self.new_fields, function(f, n) { 
			var field = '#'+f;
			var row   = field+'_row'; 
			var req   = field+'_req'; 
			$(field).css({'border':'1px solid #ccc','color':'#4a4a4a'}).val(n);
	
			if (f.search('passwd')>=0) {
				$(field +'-clear').css({'border':'1px solid #ccc','color':'#4a4a4a'}) ; //.val(n);
			}
			if ($.exists(req)) { $(req).html(''); } 
			$(row).show();
		});
	}, 
		
	curFields: function() { 
		var self = this;	
		self.debug('Account::curFields()...');
		$.each(self.cur_fields, function(f, n) { 
			var field = '#'+f;
			var row = field+'_row'; 
			var req   = field+'_req'; 
			$(field).css({'border':'1px solid #ccc','color':'#4a4a4a'}).val(n);
			if (f.search('passwd')>=0) {
				//$(field +'-clear').css({'border':'1px solid #ccc','color':'#4a4a4a'}).val(n);
				$(field +'-clear').css({'border':'1px solid #ccc','color':'#4a4a4a'}) ; //.val(n);
			}
			if ($.exists(req)) { $(req).html(''); } 
			$(row).show();
		});
		self.login.show();
		self.loginContainer.show();
	},
	getLabel: function(id) {
		var self = this;	
		var n  = typeof(self.new_fields[id])!='undefined' ? $.trim(self.new_fields[id]) : '';
		return n; 
	},

	processEmail: function(id, val) {	
		var self = this;
		if (!self.validateEmail(val)) { 
			self.debug(id+' is invalid');
			var err = 'Please enter a correct E-mail address.';
			self.errors['#'+id]=err;
			//self.showErrors();
			return false;
		}
		self.debug('email is valid');
		if (id.search(/cemail/i)==-1) {  
			if (!self.options.exist) { 
				if (!self.skipEcom) { 
					self.debug('Request E.com form email '+id+'; val='+val);
					self.validateEcomEmail(val); 
				}
			}
		}
		
		if (id.search(/cemail/i)>=0) {  
			var email = $.trim(self.emailField.val());
			var match = val.toLowerCase()==email.toLowerCase() ? true : false;
			if (!match) { 
				self.debug('emails do no  match.');
				var err = 'E-mails do no match.';
				self.errors['#'+id]=err;
				return false;
			}
		}
		return true;
	},
	
	validateEmail: function(email) {
		re = /^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;
		if (email.match(re) == null) {
			return false;
		}
		return true;
	}, 
	
	validateEcomEmail: function(email) {
		var self = this; 
		var url       = 'api_request.php';
		var sessid    = $.trim(self.sessid.val());	
		var api_token = $.trim(self.apiToken.val());

		var data = 'action=get_email_status&email='+escape(email)+'&sessid='+escape(sessid)+'&err_json=1';
		if (api_token!='') { 
			data +='&api_token='+escape(api_token);
		}
			
		if ($.exists(self.progressField)) { 
			self.progressField.html('Checking e-mail status...<img src="/gfx/icons/indicator_orange.gif">').css({'font-family':'arial','font-size':'12px', 'color':'#4a4a4a'}); 
		}
		
		self.emailField.fadeTo(500, 0.2);
					
		var econtainer = '#apiMsgError';
		$(econtainer).html('');
		$.ajax({
			type: "POST",
			url: url,
			data: data,
			success: function(response){
				var data = jQuery.parseJSON(response);
				if (typeof(data.error)!='undefined') { 
					var error = '<div class="css3_error">'+data.error + '</div>';
					$(econtainer).html(error).css({'font-family':'arial', 'font-size':'12px', 'font-weight':'bold', 'color':'#cb272c'}).show();
					self.emailField.css({'color':'#cb272c', 'border':'1px solid #cb272c'});
					self.emailField.val('E-mail address*');
				}else{
					self.progressField.html('');
					if (typeof(data.api_token)!='undefined') { 
						self.debug('api_token = ' +  data.api_token);
						self.apiToken.val(data.api_token);
					}
					if (typeof(data.in_use)!='undefined') { 
						var in_use = data.in_use;
						self.debug('==> in_use='+in_use);
						self.emailInUse = in_use; 
						if (in_use==1 && !self.options.exist) { 
							var n = 'This e-mail address already exists in our system, please <a href="javascript:void(0)" onclick="page.account.switchMode();" style="font-size:11px">log in</a>, or sign up with a different e-mail address.';
							/*if ($.exists(self.errField)) { 
								self.errField.html(n).css({'color':'#cb272c', 'font-size':'11px', 'font-family':'arial', 'padding':'10px'}).show();
							}
							*/
							var req = self.emailFieldErr;
							if (req) { 
								req.html(n).css({'color':'#cb272c', 'font-size':'11px', 'font-family':'arial', 'padding':'10px'}).show();
							}
							self.emailField.css({'color':'#cb272c', 'border':'1px solid #cb272c'});
						}else{
							var m = '';
							//self.progressField.html(m).css({'font-family':'arial', 'font-size':'12px', 'color':'green'});
							self.progressField.html(m); 
						}
					}
				}
				self.emailField.fadeTo(500, 1);
			}
		});
	}, 

	processPassword: function(id, val) {	
		var self = this;
		self.debug(id + ' => '+ val);
		if (!self.validatePassword(val)) { 
			self.debug(id+' is invalid');
			var err = 'Please enter a correct password.'; 
			self.errors['#'+id]=err;
			return false;
		}
		self.debug(id + ' is valid');
		if (id.search(/cpasswd/i)>=0) {  
			var pwd = $.trim(self.passwdField.val());
			var match = val.toLowerCase()==pwd.toLowerCase() ? true : false;
			if (!match) { 
				self.debug('passwords do no  match.');
				var err = 'Passwords do not match.';
				self.errors['#'+id]=err;
				return false;
			}
		}
		return true;
	}, 
	
	validatePassword: function(pwd) {
		if (pwd.length<8) {
			return false;
		}
		return true;
	}, 
	
	validate: function() { 
		var self = this;	
		self.required = {};
		self.errors = {};
		self.debug('Account::validate()...');
	
		if (self.loggedOn) { 
			var token =  self.apiToken.val();
			var uuid =  self.apiUID.val();
			var email =  self.apiEmail.val();
			self.debug('uuid=' +  uuid +'; token='+token+'; email='+email);
			if ($.trim(uuid)!='' && $.trim(token)!='' && $.trim(email)!='' ) { 
				self.debug('You are logged in!');
				//alert(email + '; '+self.emailField.val());
				self.emailField.val(email);
			}
			return; 
		} 
		
		if (!self.options.exist) { 
			self.skipEcom=true;
			$.each(self.new_fields, function(f, n) { 
				self.validateField(f,n);	
			});
	
			var uuid = self.apiUID.val();
			var token = self.apiToken.val();
			var email  = self.apiEmail.val();
			self.debug('==> api_uuid='+uuid+'; api_token='+token +'; api_email: '+email);
				 
			var len = getObjectLength(self.errors);
			self.debug('count: '+len);
			if (len==0) {
				self.debug('==> emailInUse = ' + self.emailInUse);
				if (self.emailInUse==1) { 
					var err = 'E-mail address already exists. Please enter another e-mail.';
        				var em = $.trim(self.emailField.val()); 
        				var eid = self.emailField.attr('id');
					self.required['#'+eid]=em;
					self.errors['#'+eid]=err;
					return false; 
				}
			}
		
		}else { 
			//self.checkLogin();
			$.each(self.cur_fields, function(f, n) { 
				self.validateField(f,n);	
			});
			var len = getObjectLength(self.errors);
			self.debug('count: '+len);
			if (len==0) {
				if (!self.loggedOn) { 
					var n = 'Please log in first.';
					if ($.exists(self.errField)) { 
						//self.errField.html(n).css({'color':'#cb272c', 'font-size':'13px', 'font-family':'arial', 'padding':'10px'}).show();
					}
        				var em = $.trim(self.emailField.val()); 
        				var eid = self.emailField.attr('id');
        				var pw = $.trim(self.passwdField.val()); 
        				var pid = self.passwdField.attr('id');
		 
					self.required['#'+eid]=em;
					self.errors['#'+eid]=n;
					self.required['#'+pid]=pw;
					self.errors['#'+pid]='';
							
					return false; 
	
				}	
			}
		}
	},

	validateField: function(f, n) {
		var self = this;	
		self.debug('Account::validateField('+f+','+n+')...');
		var field = '#'+f;
			
		// init 
                var val = $.trim($(field).val());
                if (val=='') {
                        self.required[field]=n;
                        var err = self.getError(f);
                        self.errors[field]=err;
                        return false;
                }
                var match = val.toLowerCase()==n.toLowerCase() ? true : false;
                if (match) { 
                        self.required[field]=n;
                        var err = self.getError(f);
                        self.errors[field]=err;
			if (f.search('passwd')>=0) {	
				$(field+'-clear').css({'color':'#cb272c', 'border':'1px solid #cb272c'});
			}	
				
                        return false;
                }

		
		if (f.search(/email/i)>=0) {  
			if (!self.processEmail(f, val)) {
				self.required[field]=val;
				return false;
			}
		}
		if (f.search(/passwd/i)>=0) {  
			if (!self.processPassword(f, val)) {
				self.required[field]=val;
				return false;
			}
		}
		return true;
	}, 
	
	checkLogin: function() {
		var self     = this;
		self.debug('Account::checkLogin()...');
		var token = self.apiUID.val();
		var loggedOn = self.apiUID.val();
		self.debug('apiUID=' + token+'; loggedOn='+loggedOn);
		
		if (token=='') { 
			var proceed = true;
			$.each(self.cur_fields, function(f, n) { 
				var ret=self.validateField(f,n);	
				if (!ret) { proceed=ret;}
			});
			self.debug('proceed = ' +proceed);
			if (proceed) {	
				self.requestRemoteLogin();
			}
		}
	}, 


	validateLogin: function() {
		var self     = this;
		self.debug('Account::validateLogin()...');
		self.required = {};
		self.errors = {};
		var token = self.apiUID.val();
		var loggedOn = self.apiUID.val();
		self.debug('token=' + token+'; loggedOn='+loggedOn);
		
		if (token=='') { 
			var proceed = true;
			$.each(self.cur_fields, function(f, n) { 
				var ret=self.validateField(f,n);	
				if (!ret) { proceed=ret;}
			});
			self.debug('proceed = ' +proceed);
			if (proceed) {	
				self.requestRemoteLogin();
			}
		}
		var len = getObjectLength(self.required);
                self.debug('count: '+len);
                if (len>0) {
                      self.showErrors();
                }
	}, 

	initUser: function() { 
		var self = this; 	
		self.debug('Account::initUser()...');
		var uid = $.trim(self.apiUID.val());
		var email = $.trim(self.apiEmail.val());
		self.debug('==> api_uid = ' + uid+'; api_email = ' +email);
		if (uid!='' && email!='') {
			self.options.field.attr('checked', 'checked');
			self.loggedOn=true;
			self.emailField.val(email);
				
			self.aclass.hide();
			self.msgField.css({'background':'#EEE', 'padding':'10px'}).html('You are logged in as <b>'+email+'</b>');
			self.mcontainer.show();
		}else{
			self.options.field.removeAttr('checked');
			self.loggedOn=false;
			self.apiUID.val('');
		}
	}, 
	
	requestRemoteLogin: function() { 
		var self = this; 
        	var email  = $.trim(self.emailField.val()); 
                var passwd = $.trim(self.passwdField.val());
		self.debug('email='+email+'; passwd = '+passwd);
			 
		var url  	= 'api_request.php';
		var sessid    = $.trim(self.sessid.val());	
		var api_token  	= $.trim(self.apiToken.val());	
			 
		var data = 'action=check_acct&email='+escape(email)+'&password='+escape(passwd) +'&sessid='+escape(sessid)+'&err_json=1';
			
		self.fcontainer.fadeTo(500,0.2);
		self.progressField.html('Processing login...').css({'font-family':'arial','font-size':'12px', 'color':'#4a4a4a'}); 
		
		$.ajax({
			type: "POST",
			url: url,
			data: data,
			success: function(response){
				var data = jQuery.parseJSON(response);
				if (typeof(data.error)!='undefined') { 
					var error = '<div class="css3_error">'+data.error + '</div>';
					self.errField.html(error).css({'font-family':'arial', 'font-size':'12px', 'font-weight':'bold', 'color':'#cb272c'}).show();
					self.emailField.css({'color':'#cb272c', 'border':'1px solid #cb272c'});
					self.passwdField.css({'color':'#cb272c', 'border':'1px solid #cb272c'});
					self.fcontainer.fadeTo(500,1);
				}else{
					if (typeof(data.api_uid)!='undefined' && typeof(data.api_email)!='undefined' && typeof(data.api_token))  { 
						var email  = data.api_email;
						var uuid   = data.api_uid; 
						var token  = data.api_token; 
													
						self.debug('email = '+email+' ; uuid='+uuid +' ; token = ' + token );
							
						self.apiUID.val(uuid);
						self.apiToken.val(token);
						self.apiEmail.val(email);
						self.emailField.val(email);
						self.loggedOn = true; 
				
						var msg ='<table border=0 cellpadding=0 cellspacing=0><tr height=10><td></td></tr><tr bgcolor="#eeeeee"> <td align=left style="padding:10px" width=360> You are logged in as <b>'+email+'</b>.</td> </tr><tr height=10><td></td></tr> <tr> <td align=left width=100> <div  id=logout onclick="acctLogOut()" class="css3_button_blue" style="width:100px"> LOG OUT </div></td> </tr> </table>'; 
							
						//self.msgField.html('You are logged in as <b>'+email+'</b>');
						self.msgField.css({'background':'#EEE', 'padding':'10px'}).html('You are logged in as <b>'+email+'</b>');
						self.aclass.hide();
						self.fcontainer.hide();
						self.mcontainer.show();
					}else { 
						self.debug('something wrong...');	
						self.fcontainer.fadeTo(500,1);
					}
				}
				self.progressField.html('');
			}
		});



	}, 
	
	logOut: function() { 
		var self = this; 
		
		self.debug('Account::logOut()...');

		var url  = 'api_request.php';
		var data = 'action=acct_logout&err_json=1';
		$.ajax({
			type: "POST",
			url: url,
			data: data,
			success: function(response){
				var data = jQuery.parseJSON(response);
				if (typeof(data.success)!='undefined') {
					self.apiUID.val(''); 
					self.loggedOn = false;	
					self.aclass.hide();
					self.acheck.show();
					self.fcontainer.show();
					self.options.field.attr('checked', 'checked');
					self.emailField.val('');
					self.passwdField.val('');
					self.triggerFields();
				 
					// toggle passwd field
					self.togglePassword();
				}
		 
				if (typeof(data.error)!='undefined') {
					self.errField.html(data.error).css({'font-family':'arial', 'font-size':'12px', 'font-weight':'bold', 'color':'#cb272c'});
				}
				self.fcontainer.fadeTo(500,1);
			}
		});

	

	}, 
	
	update: function() { 
                var self = this;        
                self.debug('Account::update()...');
		if (self.loggedOn) { 
			$.each(self.new_fields, function(f, n) { 
				var upd = typeof(self.cur_fields[f])!='undefined' ?  false : true;
				if (f.search(/^passwd/i)>=0) {  upd = true; }
				if (upd) { 		
                        		self.updateField(f,n);  
				}
			});
                }
        },
        
        updateField: function(f, n) {
                var self = this;        
                self.debug('Account::updateField('+f+','+n+')...');
                var field = '#'+f;
                        
                // init 
                var val = $.trim($(field).val());
                var match = val.toLowerCase()==n.toLowerCase() ? true : false;
                if (val=='' || match) {
                        $(field).val('');
                }
        },
        


	getError: function(id) {
                var self = this;        
                var n  = typeof(self.def_errors[id])!='undefined' ? $.trim(self.def_errors[id]) : '';
                return n; 
        },
	
	showErrors: function() { 
                var self = this;
                self.debug('***********************************************');
                self.debug('Account::showErrors()...');
                self.debug('***********************************************');
                var scroll = '';
                $.each(self.required, function(f, n) {
                        $(f).css({'border':'1px solid #cb272c','color':'#cb272c'}).val(n);
                        if (scroll=='') { scroll = f; } 
                });     
                $.each(self.errors, function(f, e) {
                        var field = f+'_req';
                        if ($.exists(field)) {
                                self.debug('> ' + field + ':'+e);
                                $(field).css({'color':'#cb272c', 'font-size':'11px'}).html(e);
                                if (scroll=='') { scroll = field; } 
                        }
                });     
                $('html,body').animate({ scrollTop: $(scroll).offset().top}, 'slow');
        },

	getErrors: function() { 
		var self = this;
		return self.errors; 
	},

	debug: function(msg) {
		//console.log(msg);
	}




};


</script>
	
<script>

/*************************************************/
/* Academic class plugin			**/
/* Author: os@amstelnet.com			**/
/* Date: Feb 2013				**/
/*************************************************/
var Academic = {
	page: undefined, 
	required: {}, 
	errors: {}, 
        fields: { 
                studentplace: 'Place of study/teaching*',
                studentcourse: 'Course/programme name*',
                studentyear: 'Graduation date', 
        }, 
	def_errors: {
                studentplace: 'Please enter Place of study/teaching', 
                studentcourse: 'Please enter Course/programme name'  
                //studentyear: 'Please select Graduation date' 
	},

        init: function(page) {
                var self = this;
		 
		self.debug('*****************************');
		self.debug('Academic::init...');
		self.debug('*****************************');
		self.page = page;
	}, 
	
	
	bindEvents: function() { 
		var self = this;	
		 
		self.debug('*****************************');
		self.debug('Academic::bindEvents()...');
		self.debug('*****************************');
	
		
		// bind input event 
		$.each(self.fields, function(f, n) { 
			self.debug(f + ':'+n);
			self.processField(f,n);	
		});
	},

	processField: function(f, n) {
		var self = this;	
		 
		var field = '#'+f;
		
		$(field).unbind('click keypress mouseleave');
			
		// init 
		var val = $.trim($(field).val());
		if (val=='') {
			//$(field).css({'border':'1px solid #ccc','color':'#4a4a4a'}).val(n);
                        $(field).css({'border':'1px solid #ccc','color':'#4a4a4a'});
                        self.updateValue(f, n);

		}
	
		// on click/keypress
		$(field).bind('click keypress', function() { 
			var id = $(this).attr('id'); 
			var n   = self.getLabel(id);
			var val = $.trim($(this).val());
			self.debug('id='+id+'; n='+n+'; val='+val);
			if (val.indexOf(n)!=-1) {
				//$(this).val('');
				self.updateValue(id, '');

			}
			$(this).css({'border':'1px solid #ccc','color':'#4a4a4a'});
			var req = '#'+id+'_req';
                        if ($.exists(req)) { $(req).html('');}
		
		});
	
		// on mouseleave 
		$(field).bind('mouseleave blur', function() { 
			var id  = $(this).attr('id'); 
			var n   = self.getLabel(id);
			var val = $.trim($(this).val());
			if (val == '') {
				//$(this).val(n);
				 self.updateValue(id, n);

			}else{
				var match = val.toLowerCase()==n.toLowerCase() ? true : false;
				if (match) { return false;} 
			}
		});
	}, 

	getLabel: function(id) {
		var self = this;	
		var n  = typeof(self.fields[id])!='undefined' ? $.trim(self.fields[id]) : '';
		return n; 
	},

	
	validate: function() { 
		var self = this;	
		 
		self.required = {};
		self.errors   = {};
		self.debug('Academic::validate()...');
		$.each(self.fields, function(f, n) { 
			self.validateField(f,n);	
		});
	},
	
	validateField: function(f, n) {
		var self = this;	
		 
		self.debug('Academic::validateField('+f+','+n+')...');
		var field = '#'+f;
		var req = $(field).hasClass('required_field');
		if (!req) { return false;}
			
		// init 
		var val = $.trim($(field).val());
		if (val=='') {
			self.required[field]=n;
			var err = self.getError(f);
                        self.errors[field]=err;
			return false;
		}
		var match = val.toLowerCase()==n.toLowerCase() ? true : false;
		if (match) { 
			self.debug( match + ': ' + val + ' == ' + n);
			self.required[field]=n;
			var err = self.getError(f);
			self.debug(field + ' => ' + err);
                        self.errors[field]=err;
			return false;
		}
	},
	
	update: function() { 
		var self = this;	
		self.debug('Academic::update()...');
		$.each(self.fields, function(f, n) { 
			self.updateField(f,n);	
		});
	},
	
	updateField: function(f, n) {
		var self = this;	
		 
		self.debug('Academic::updateField('+f+','+n+')...');
		var field = '#'+f;
		var req = $(field).hasClass('required_field');
		if (req) { return false;}
			
		// init 
		var val = $.trim($(field).val());
		var match = val.toLowerCase()==n.toLowerCase() ? true : false;
		if (val=='' || match) {
			$(field).val('');
		}
	},
	
	
	updateValue: function(id, v) { 
                var self = this;
                var exclude = ['studentyear'];
                if (jQuery.inArray(id, exclude) >-1 ) {
                }else{ 
                        $('#'+id).val(v); 
                }
        }, 

		
	getError: function(id) {
                var self = this;        
                var n  = typeof(self.def_errors[id])!='undefined' ? $.trim(self.def_errors[id]) : '';
                return n; 
        },


	showErrors: function() { 
                var self = this;
		 
                self.debug('***********************************************');
                self.debug('Academic::showErrors()...');
                self.debug('***********************************************');
                var scroll = '';
                $.each(self.required, function(f, n) {
                        $(f).css({'border':'1px solid #cb272c','color':'#cb272c'}).val(n);
                        if (scroll=='') { scroll = f; } 
                });     
                $.each(self.errors, function(f, e) {
                        var field = f+'_req';
                        if ($.exists(field)) {
				self.debug('> ' + field + ':'+e);
                                $(field).css({'color':'#cb272c', 'font-size':'11px'}).html(e);
                                if (scroll=='') { scroll = field; } 
                        }
                });     
                $('html,body').animate({ scrollTop: $(scroll).offset().top}, 'slow');
        }, 
	
	
		
	getErrors: function() { 
                var self = this;
                return self.errors; 
        }, 
	
	debug: function(msg) {
		//console.log(msg);	
	}	



};

</script>
	
<script>

/*************************************************/
/* Delivery class 				**/
/* Author: os@amstelnet.com			**/
/* Date: Feb 2013				**/
/*************************************************/
var Delivery = {
	page: undefined, 
	required: {}, 
	errors: {}, 
		 
	container: $('#deliveryContainer'), 
	country: $('#country').val(), 
	countryField: $('#country'), 
	zone: $('#zone_id').val(), 
	zipField: '#zipcode', 
	stateField: '#state', 
	validateUpsell: false, 
			 
	options:  {
		'eur': {
			title: 		'Title', 
			fname: 		'Given name*', 
			lname: 		'Family name*', 
			telephone: 	'Contact phone number', 
			company: 	'Company name', 
			address: 	'Address line 1*', 
			address2: 	'Address line 2', 
			city: 	  	'Town/City*', 
			zipcode:  	'Post code*' 
		}, 
		'uk': {
			title: 		'Title', 
			fname: 		'Given name*', 
			lname: 		'Family name*', 
			telephone: 	'Contact phone number', 
			company: 	'Company name', 
			address: 	'Address line 1*', 
			address2: 	'Address line 2', 
			city: 	  	'Town/City*', 
			zipcode:  	'Post code*' 
		}, 
		'nam_us': {
			title: 		'Suffix', 
			fname: 		'Given name*', 
			lname: 		'Family name*', 
			telephone: 	'Contact phone number', 
			company: 	'Company name', 
			address: 	'Address line 1*', 
			address2: 	'Address line 2', 
			address3: 	'Address line 3', 
			address4: 	'Address line 4', 
			city: 	  	'Town/City*', 
			state: 	  	'State*', 
			zipcode:  	'Zip*' 
		}, 
		'nam_ca': {
			title: 		'Suffix', 
			fname: 		'Given name*', 
			lname: 		'Family name*', 
			telephone: 	'Contact phone number', 
			company: 	'Company name', 
			address: 	'Address line 1*', 
			address2: 	'Address line 2', 
			address3: 	'Address line 3', 
			address4: 	'Address line 4', 
			city: 	  	'Town/City*', 
			state: 	  	'Province*', 
			zipcode:  	'Postcode*' 
		}, 
		'csam': {
			title: 		'Suffix', 
			fname: 		'Given name*', 
			lname: 		'Family name*', 
			telephone: 	'Contact phone number', 
			company: 	'Company name', 
			address: 	'Address line 1*', 
			address2: 	'Address line 2', 
			city: 	  	'Town/City', 
			state: 	  	'State', 
			zipcode:  	'Postal code' 
		}, 
		'mea': {
			title: 		'Title', 
			fname: 		'Given name*', 
			lname: 		'Family name*', 
			telephone: 	'Contact phone number', 
			company: 	'Company name', 
			address: 	'Address line 1*', 
			address2: 	'Address line 2', 
			address3: 	'Address line 3', 
			city: 	  	'Town/City*', 
			zipcode:  	'Post code*' 
		}, 
		'ap_': {
			title: 		'Title', 
			fname: 		'Given name*', 
			lname: 		'Family name*', 
			telephone: 	'Contact phone number', 
			company: 	'Company name', 
			address: 	'Address line 1*', 
			address2: 	'Address line 2', 
			address3: 	'Address line 3', 
			address4: 	'Address line 4', 
			zipcode:  	'Post code*' 
		}, 
		'india': {
			title: 		'Title', 
			fname: 		'Given name*', 
			lname: 		'Family name*', 
			telephone: 	'Contact phone number', 
			company: 	'Company name', 
			address: 	'Address line 1*', 
			address2: 	'Address line 2', 
			address3: 	'Address line 3', 
			address4: 	'Address line 4', 
			zipcode:  	'Post code*' 
		} 
	}, 
	
        fields: {}, 
		 
	def_errors: {
		title: 'Please select title/suffix', 
                fname: 'Please enter first name', 
                lname: 'Please enter last name',  
                address: 'Please enter address line 1', 
                city:  'Please enter town/city', 
                state: 'Please select state/province', 
                zipcode: 'Please enter postcode/zip'   
	},

        init: function(page) {
                var self = this;
		 
		self.debug('*****************************');
		self.debug('Delivery::init...');
		self.debug('*****************************');
		self.page = page;
		 

		// 
		var region = self.zone.toLowerCase(); 
		
		$.each(self.options,function(reg, opts) { 
			//console.log('reg = ' + reg);
			if (region.search(reg)>=0) {
				self.fields = opts;
				return false;
			}
		});
		
		//console.log('fields : ' + self.fields); 
	}, 
	
	
	bindEvents: function() { 
		var self = this;	
		 
		self.debug('*****************************');
		self.debug('Delivery::bindEvents()...');
		self.debug('*****************************');
	
		self.countryField.bind('change', function() {
			var c = $(this).val();
			if ($.trim(c)=='') { 
				return false;
			}
			if (typeof(redir_countries[c])!='undefined') {
				var redir_url=$.trim(redir_countries[c]);
				//console.log('redir = ' + redir_url ); 
				//return false;
				if (redir_url!=''){
					location.href=redir_url;
				}
				return false;
			}
			var page = ($.exists('#kind_id')) ? $('#kind_id').val() : 'lp'; 
			if (page == 'lp') { 
				$('#kind_id').val('init'); 
				$('#submitted_id').val('N'); 
				$('#paym_id').val(''); 
				$('#orderform').submit();
			}else if (page == 'inter') { 
				launchGuardOnExit = false;
				$('#kind_id').val('lp'); 
				$('#submitted_id').val('V'); 
				$('#orderform').submit();
			}

        	});

		
		// bind input event 
		$.each(self.fields, function(f, n) { 
			self.debug(f + ':'+n);
			self.processField(f,n);	
		});
	},

	processField: function(f, n) {
		var self = this;	
		var zone = self.zone; 
		 
		var field = '#'+f;
		
		$(field).unbind('click keypress mouseleave blur');
			
		// init 
		var val = $.trim($(field).val());
		if (val=='') {
			//$(field).css({'border':'1px solid #ccc','color':'#4a4a4a'}).val(n);
			$(field).css({'border':'1px solid #ccc','color':'#4a4a4a'});
			self.updateValue(f, n);
		}
	
		// on click/keypress
		$(field).bind('click keypress', function() { 
			var id = $(this).attr('id'); 
			var n   = self.getLabel(id);
			var val = $.trim($(this).val());
	
			if (zone.toLowerCase().indexOf('csam')!=-1 ) { 
				if (id.search('state')>=0) {
					n  ='State';	
				}else if (id.search('zipcode')>=0) {
					n  ='Postal code';	
				}
			}
			//console.log('id='+id+'; n='+n+'; val='+val );
			if (val.indexOf(n)!=-1) {
				self.updateValue(id, '');
			}
	
			$(this).css({'border':'1px solid #ccc','color':'#4a4a4a'});
			var req = '#'+id+'_req';
                        if ($.exists(req)) { $(req).html('');}
	
		
			if (id.indexOf('state')!=-1) {
				var arr={'US':1, 'CA':1, "VI":1, "GU":1, "PR":1, "UM":1, "AS":1};
				//console.log('self.country = '+self.country);
				if (typeof(arr[self.country])!='undefined') { 
					self.debug('am hereeeeeeeeeeee state => ' + val);
					if (val!='') { 
						//console.log('charge amount for state ' + val);
						var obj = self.page.offers.getCurrentOffer();
						self.page.offers.chargeAmount(obj);
					}
				}else{
					self.debug(self.country +' not in arr ');
				}
			}
		});
	
		// on mouseleave 
		$(field).bind('mouseleave blur', function() { 
			var id  = $(this).attr('id'); 
			var n   = self.getLabel(id);
			var val = $.trim($(this).val());
			if (val == '') {
				//$(this).val(n);
				if (zone.toLowerCase().indexOf('csam')!=-1 ) { 
					if (id.search('state')>=0) {
						n = 'State';
					}else if (id.search('zipcode')>=0) {
						n = 'Postal code';
					}
				}
				self.updateValue(id, n);
			}else{
				var match = val.toLowerCase()==n.toLowerCase() ? true : false;
				if (match) { return false;} 
			}
		});
	}, 

	updateValue: function(id, v) { 
                var self = this;
		var country = self.country; 
                var exclude = ['title'];
                if (jQuery.inArray(country, ['US','CA']) >-1 ) {
			exclude.push('state');
		}
		
                if (jQuery.inArray(id, exclude) >-1 ) {
                }else{ 
                        $('#'+id).val(v); 
                }
        }, 

	getLabel: function(id) {
		var self = this;	
		var n  = typeof(self.fields[id])!='undefined' ? $.trim(self.fields[id]) : '';
		return n; 
	},

	
	validate: function() { 
		var self = this;	
		 
		self.required = {};
		self.errors   = {};
		self.debug('Delivery::validate()...');
		$.each(self.fields, function(f, n) { 
			self.validateField(f,n);	
		});
	
			
		var len = getObjectLength(self.errors);
                self.debug('===> count: '+len);
                if (len==0) {
			// check if country is us/ca 
			var arr={'US':1, 'CA':1,  "VI":1 , "GU":1 , "PR":1, "UM":1 , "AS":1 };
			if (typeof(arr[self.country])!='undefined') { 
				 var state = $.trim($(self.stateField).val());  
				 var zip =   $.trim($(self.zipField).val());  
				 var zv = self.validateZipCode(zip, state, self.country) ;
				 if (zv == -1) {
					var err='Error occured during validation.'; 
					self.required[self.zipField]=zip;
					self.errors[self.zipField]=err;
					return false;
				 }else if (zv == 0) {
					var err = (self.country == 'US') ? 'State and zip do not match' : 'Province and postcode do not match'; 
					self.required[self.zipField]=zip;
					//self.required[self.stateField]=state;
					self.errors[self.zipField]=err;
					return false;
				 }
			}
		}
	},
	
	validateField: function(f, n) {
		var self = this;	
		self.debug('Delivery::validateField('+f+','+n+')...');
		
		         
                if (f == 'zipcode') { 
                        var country= $.trim($(self.countryField).val());
                        if (country=='HK' || country=='IE') {return; } 
                }

	
		var field = '#'+f;
		var req = $(field).hasClass('required_field');
		if (!req) { return false;}
			
		// init 
		var val = $.trim($(field).val());
		if (val=='') {
			self.required[field]=n;
			var err = self.getError(f);
                        self.errors[field]=err;
			return false;
		}
		var match = val.toLowerCase()==n.toLowerCase() ? true : false;
		if (match) { 
			self.debug( match + ': ' + val + ' == ' + n);
			self.required[field]=n;
			var err = self.getError(f);
			self.debug(field + ' => ' + err);
                        self.errors[field]=err;
			return false;
		}
	},
	
	update: function() { 
		var self = this;	
		self.debug('Delivery::update()...');
		$.each(self.fields, function(f, n) { 
			self.updateField(f,n);	
		});
	},
	
	updateField: function(f, n) {
		var self = this;	
		 
		self.debug('Delivery::updateField('+f+','+n+')...');
		var field = '#'+f;
		var req = $(field).hasClass('required_field');
		if (req) { return false;}
			
		// init 
		var val = $.trim($(field).val());
		var match = val.toLowerCase()==n.toLowerCase() ? true : false;
		if (val=='' || match) {
			$(field).val('');
		}
	},
	
		
	getError: function(id) {
                var self = this;        
                var n  = typeof(self.def_errors[id])!='undefined' ? $.trim(self.def_errors[id]) : '';
                return n; 
        },


	showErrors: function() { 
                var self = this;
		 
                self.debug('***********************************************');
                self.debug('Delivery::showErrors()...');
                self.debug('***********************************************');
                var scroll = '';
                $.each(self.required, function(f, n) {
                        $(f).css({'border':'1px solid #cb272c','color':'#cb272c'}).val(n);
                        if (scroll=='') { scroll = f; } 
                });     
                $.each(self.errors, function(f, e) {
                        var field = f+'_req';
                        if ($.exists(field)) {
				self.debug('> ' + field + ':'+e);
                                $(field).css({'color':'#cb272c', 'font-size':'11px'}).html(e);
                                if (scroll=='') { scroll = field; } 
                        }
                });     
                $('html,body').animate({ scrollTop: $(scroll).offset().top}, 'slow');
        }, 
		
	getErrors: function() { 
                var self = this;
                return self.errors; 
        }, 
	
	validateZipCode:  function(zip, state, country) {
	    var self = this; 

	    var url  = 'ajax_request.php';
	    var data = 'action=validate_zip';
	    data += "&postal="+zip+"&province="+state+'&country='+country;
	    data += '&sid='+Math.random();

	   var html = $.ajax({
			url: url,
			data: data,
			async: false,
			success: function(response) {
		}

	    }).responseText;
	    html = $.trim(html);
	    self.debug('html = ' +html);
	    if (html=='Y')  { 
		self.debug('return 1');
		return 1;
	    }else{ 
		self.debug('return 0');
		return 0;
	    }
	}, 

	debug: function(msg) {
		//console.log(msg);
	}	



};

</script>
	
<script>
/*************************************************/
/* Billing class 				**/
/* Author: os@amstelnet.com			**/
/* Date: Feb 2013				**/
/*************************************************/

clickState=function() {
	//console.log('click');
	var id = '#bill_state';
	var v = $.trim($(id).val());
	if (v == 'State/Province') { 
		$(id).val('');
	}
}; 
rollOutState=function() {
	//console.log('out');
	var id = '#bill_state';
	var v = $.trim($(id).val());
	if (v == '') { 
		$(id).val('State/Province');
	}
}; 


var Billing = {
	page: undefined, 
	required: {}, 
	errors: {}, 
	container: $('#billingContainer'), 
	statecontainer: $('#bill_stateContainer'), 
	countryField: '#bill_country', 
	zone: $('#zone_id').val(), 
	toggle: $('#toggleBilling'), 
	check: false, 
	billField: $('#use_billing'), 
	zipField: '#bill_zipcode', 
	stateField: '#bill_state', 
		 
        fields: { 
                bill_title: 'Title/Suffix', 
                bill_fname: 'Given name*', 
                bill_lname: 'Family name*', 
                bill_company: 'Company name', 
                bill_address: 'Address line 1*', 
                bill_address2: 'Address line 2', 
                bill_address3: 'Address line 3', 
                bill_city: 'Town/City*', 
                bill_state: 'State/Province', 
                bill_zipcode: 'Postcode/Zip*', 
                bill_country: 'Country*' 
        }, 
	def_errors: {
		'bill_title':'Please select title/suffix', 
                'bill_fname':'Please enter given name',  
                'bill_lname':'Please enter family name',  
                'bill_address':'Please enter address Line 1', 
                'bill_city':'Please enter town/city', 
                'bill_email':'Please enter email', 
                'bill_country':'Please select country', 
                'bill_state':'Please select state/province',  
                'bill_zipcode':'Please enter postcode' 
	},

        init: function(page) {
                var self = this;
	 
		self.debug('*****************************');
		self.debug('Billing::init...');
		self.debug('*****************************');
		self.page = page;
			
		self.debug('country = ' +$(self.countryField).val() +' ; zone=' +self.zone +' ; checked=' + self.toggle.is(':checked'));
	
	}, 
	
	resetFields: function() { 
		var self = this;	
		 
		self.debug('*****************************');
		self.debug('Billing::resetFields()...');
		self.debug('*****************************');
		self.statecontainer.html(' <input type="text" name=bill_state id=bill_state value="State/Province" class="inputfield" onclick="clickState()" onmouseout="rollOutState();">');      
	
		$.each(self.fields, function(f,n) {
			var id =  '#'+f; 
			self.debug('=== field ' + f);
			if (f.search(/bill_country/i)>=0) {  
				$(id).val('');
			}else{	
				$(id).val(n);
			}
		});
	
	},
	
	toggleBilling: function() { 
		var self = this;	
		 
		self.resetFields();
		self.debug('===> self.check ' + self.check);
		if (self.check) {
			self.billField.val(1);
                       	//self.container.show();
                       	self.container.slideDown();
			$('#bill_title').val('');
		}else{
			self.billField.val(0);
			//self.container.hide();
                       	self.container.slideUp();
			//$('#bill_title').val('');
                }
	
	}, 
	
	bindEvents: function() { 
		var self = this;	
	 
		self.debug('*****************************');
		self.debug('Billing::bindEvents()...');
		self.debug('*****************************');
			
		// init toggle 
		self.toggle.attr('checked', false);
		self.check = self.toggle.is(':checked'); 
		self.toggleBilling();
			
		// bind checkbox handler 
                self.toggle.bind('click keypress', function() { 
			self.check = $(this).is(':checked'); 
			self.toggleBilling();
                });

		// bind input event 
		$.each(self.fields, function(f, n) { 
			self.debug(f + ':'+n);
			self.processField(f,n);	
		});
	},

	processField: function(f, n) {
		var self = this;	
		 
		var field = '#'+f;
		
		$(field).unbind('change click keypress mouseleave blur');
			
		// init 
		var val = $.trim($(field).val());
		if (val=='') {
			//$(field).css({'border':'1px solid #ccc','color':'#4a4a4a'}).val(n);
			$(field).css({'border':'1px solid #ccc','color':'#4a4a4a'});
			self.updateValue(f, n);
		}
	
		// on click/keypress
		$(field).bind('change click keypress', function() { 
			var id = $(this).attr('id'); 
			var n   = self.getLabel(id);
			var val = $.trim($(this).val());
			self.debug('id='+id+'; n='+n+'; val='+val);

			if (val.indexOf(n)!=-1) {
				//$(this).val('');
				self.updateValue(id, '');
			}
			$(this).css({'border':'1px solid #ccc','color':'#4a4a4a'});
			var req = '#'+id+'_req';
                        if ($.exists(req)) { $(req).html('');}

				
			var val = $.trim($(this).val());
			if (id.search(/bill_country/i)>=0) {  
				self.debug('==> id='+id+'; val='+val);
			
                                $(self.zipField).show(); 
				$(self.zipField).css({'color':'#4a4a4a', 'border':'1px solid #ccc'});
				$(self.zipField+'_req').html('');
			 
				if (val == 'HK') { 	
                                	$(self.zipField).hide(); 
                                	$(self.zipField+'_req').html('');
					return false ; 
				}
				if (val == 'IE') { 	
                                	var v = $(self.zipField).val(); 
					self.debug('v = ' + v);
					v = v.replace('*', '');
					self.debug('v = ' + v);
					$(self.zipField).val(v);
					return false;
				}else{
					var nz   = self.getLabel('bill_zipcode');
                                	var v = $.trim($(self.zipField).val()); 
					lv = v.toLowerCase();
					if (lv == 'postcode/zip') { 
						v +='*';
					} 
					$(self.zipField).val(v);
				}
				 
				if (val=='US' || val=='CA') {	
					self.triggerState(val);	
				}else{
					self.statecontainer.html('<input type="text" name=bill_state id=bill_state value="State/Province" class="inputfield" onclick="clickState();" onmouseout="rollOutState();">');      
					return ; 
				}
		
			}
		});
	
		// on mouseleave 
		$(field).bind('mouseleave blur', function() { 
			var id  = $(this).attr('id'); 
			var n   = self.getLabel(id);
			var val = $.trim($(this).val());
			if (val == '') {
				//$(this).val(n);
				self.updateValue(id, n);
			}else{
				
				var match = val.toLowerCase()==n.toLowerCase() ? true : false;
				if (match) { return false;} 
			}
		});
	}, 

	updateValue: function(id, v) { 
                var self = this;
                var exclude = ['bill_country', 'bill_title'];
                if (jQuery.inArray(id, exclude) >-1 ) {
                }else{ 
                        $('#'+id).val(v); 
                }
        }, 

	getLabel: function(id) {
		var self = this;	
		var n  = typeof(self.fields[id])!='undefined' ? $.trim(self.fields[id]) : '';
		return n; 
	},

	triggerState: function(country) {
		var self = this; 
		 
		var url  = 'ajax_request.php';
		var data = 'action=trigger_state&country='+country;
		$.ajax({
			type: "POST",
			url: url,
			data: data,
			success: function(response){
				var data = jQuery.parseJSON(response);
				if (typeof(data.error)!='undefined') { 
					alert(data.error);
				}
				if (typeof(data.html)!='undefined') {
					//this line is causing the dropdown hide immediately
					data.html = data.html.replace("$(this).css({'color':'#4a4a4a', 'border':'1px solid #ccc'});", "");
					self.statecontainer.html(data.html);
				}
			}
		});

	},

		
	
	validate: function() { 
		var self = this;	
		 
		self.debug('Billing::validate()...');
		if (!self.check) { return ;}
		self.required 	= {};
		self.errors 	= {};
			 
		$.each(self.fields, function(f, n) { 
			self.validateField(f,n);	
		});
                var len = getObjectLength(self.errors);
                self.debug('===> billing count: '+len);
                if (len==0) {
                        // check if country is us/ca 
                        var arr={'US':1, 'CA':1};
			var country= $.trim($(self.countryField).val());
                        if (typeof(arr[country])!='undefined') { 
                                 var state = $.trim($(self.stateField).val());  
                                 var zip =   $.trim($(self.zipField).val());  
                                 var zv = self.validateZipCode(zip, state, country) ;
                                 if (zv == -1) {
                                        var err='Error occured during validation.'; 
                                        self.required[self.zipField]=zip;
                                        self.errors[self.zipField]=err;
                                        return false;
                                 }else if (zv == 0) {
                                        var err = (country == 'US') ? 'State and zip do not match' : 'Province and postcode do not match'; 
		
					self.debug(self.zipField + ': ' + zip +'; ' +self.stateField + ': ' + state +' ; err='+err);
                                        self.required[self.zipField]=zip;
                                        //self.required[self.stateField]=state;
                                        self.errors[self.zipField]=err;
                                        return false;
                                 }
                        }
                }
	},
	
	validateField: function(f, n) {
		var self = this;	
		self.debug('Billing::validateField('+f+','+n+')...');
			
		if (f == 'bill_zipcode') { 
			var country= $.trim($(self.countryField).val());
			if (country=='HK' || country=='IE') {
				return; 
			} 
		}
		  
		var field = '#'+f;
		var req = $(field).hasClass('required_field');
		self.debug(field + ': ' + req);
		if (!req) { return false;}
			
		// init 
                var val = $.trim($(field).val());
                if (val=='') {
                        self.required[field]=n;
                        var err = self.getError(f);
                        self.errors[field]=err;
                        return false;
                }
                var match = val.toLowerCase()==n.toLowerCase() ? true : false;
                if (match) { 
                        self.debug( match + ': ' + val + ' == ' + n);
                        self.required[field]=n;
                        var err = self.getError(f);
                        self.debug(field + ' => ' + err);
                        self.errors[field]=err;
                        return false;
                }

	},
	

	update: function() { 
                var self = this;        
	 
                self.debug('Billing::update()...');
                $.each(self.fields, function(f, n) { 
                        self.updateField(f,n);  
                });	

        },
        
        updateField: function(f, n) {
                var self = this;        
		 
                self.debug('Billing::updateField('+f+','+n+')...');
                var field = '#'+f;
                var req = $(field).hasClass('required_field');
                if (req) { return false;}
                        
                // init 
                var val = $.trim($(field).val());
                var match = val.toLowerCase()==n.toLowerCase() ? true : false;
                if (val=='' || match) {
                        $(field).val('');
                }
        },
        
	
	getError: function(id) {
                var self = this;        
                var n  = typeof(self.def_errors[id])!='undefined' ? $.trim(self.def_errors[id]) : '';
                return n; 
        },

        showErrors: function() { 
                var self = this;
		 
                self.debug('***********************************************');
                self.debug('Billing::showErrors()...');
                self.debug('***********************************************');
                var scroll = '';
                $.each(self.required, function(f, n) {
                        $(f).css({'border':'1px solid #cb272c','color':'#cb272c'}).val(n);
                        if (scroll=='') { scroll = f; } 
                });     
                $.each(self.errors, function(f, e) {
                        var field = f+'_req';
                        if ($.exists(field)) {
                                self.debug('> ' + field + ':'+e);
                                $(field).css({'color':'#cb272c', 'font-size':'11px'}).html(e);
                                if (scroll=='') { scroll = field; } 
                        }
                });     
                $('html,body').animate({ scrollTop: $(scroll).offset().top}, 'slow');
        },
	
	getErrors: function() { 
                var self = this;
                return self.errors; 
        }, 
	
	validateZipCode:  function(zip, state, country) {
	    var self = this;
		 
            var url  = 'ajax_request.php';
            var data = 'action=validate_zip';
            data += "&postal="+zip+"&province="+state+'&country='+country;
            data += '&sid='+Math.random();

            var html = $.ajax({
                        url: url,
                        data: data,
                        async: false,
                        success: function(response) {
                }

            }).responseText;
            html = $.trim(html);
            self.debug('html = ' +html);
            if (html=='Y')  { 
                self.debug('return 1');
                return 1;
            }else{ 
                self.debug('return 0');
                return 0;
            }
        }, 
	
	debug: function(msg) { 
	
	}
	








};

</script>


<script>



/****************************************************************/
/* on document load 						*/
/****************************************************************/
$.exists=function(selector) {return ($(selector).length > 0);}

//Page Object 
var Page = { 
	kind: undefined, 
	landings:  ['lp', 'inter'], 
	upsells:   ['upsell', 'interup'], 
			
	errors:	   {}, 
	required:  {}, 
	form:	   $('#orderform') , 
	submit:	   $('#submitID') , 
	 
	subtype:   $('#sub_type_id'), 
	content:   $('#mainSectionID'), 
	subscription: '', 
	main:   '#main', 

	init: function(kind) { 
		var self  = this; 	
		self.kind = kind; 
		self.subscription = (typeof(self.subtype)!='undefined') ? self.subtype.val() : 'personal';

		self.debug('self.kind = '+ self.kind);
		if (jQuery.inArray(self.kind, self.landings)>-1 ) {
		 
			self.initLanding();
	
			//--------------------------------------------------
			// check if we have rescue  & check launch guard
			//--------------------------------------------------
			if (self.kind == 'lp') { 
				if (self.subscription.search('gift')>=0) { 
				}else{
					_processRescueIfAny();
				}
			}else if (self.kind=='inter') { 
				window.focus();
				window.moveTo(200, 100);
				if (window) {
    					window.resizeTo(700, 800);
				}else{	
    					resizeTo(700, 800);
				}
				
			}

		}else if (jQuery.inArray(self.kind, self.upsells)>-1 ) {
			self.initUpsell();
		}
		
		//$(window).unload( function () { alert("Bye now!"); } );
       		// scroll to top 
       		$('html,body').animate({ scrollTop: $("#container").offset().top}, 'slow');
	}, 
	
	initLanding: function() { 
	
		var self = this; 
		
		// tabs 
		self.attachTabEvent();
	
		// acct object 
		self.account = Object.create( Account );
		self.account.init(self);
		
		if (self.subscription.search('student')>=0) { 
			//alert('acct object');
			// acct object 
			if (typeof(Academic)!='undefined') { 
				self.academic = Object.create( Academic );
				self.academic.init(self);
				self.academic.bindEvents();
			}
		}
				
		// delivery
		self.delivery = Object.create( Delivery );
		self.delivery.init(self);
		self.delivery.bindEvents();
		
		//billing 
		self.billing = Object.create( Billing );
		self.billing.init(self);
		self.billing.bindEvents();
				
		// payment
		self.payment = Object.create( Payment );
		self.payment.init(self);
		
		// init offers 
		self.initOffers();

		// attach media events 
		self.attachMediaEvent();
		
		// attach prod event
		self.attachBoxEvent();

		// attach prod event
		self.attachPremiumEvents();

			
		// bind event
		self.bindEvents();

		// sub type
		if (self.subscription.search('gift')>=0) { 
			if (typeof(self.content)!='undefined') { 
				self.content.hide();	
			}
		}
		
	}, 		
	
	initUpsell: function() { 
	
		var self = this; 
		 
		self.debug('Page::initUpsell()...');
		
		// delivery
		self.delivery = Object.create( Delivery );
		self.delivery.init(self);
		self.delivery.bindEvents();
	
		// payment
		self.payment = Object.create( Payment );
		self.payment.init(self);
		
		// init offers 
		self.initOffers();

		// bind event
		self.bindEvents();
	}, 		
	
	bindEvents: function() { 
		var self = this; 
				
		// submit event
		if (jQuery.inArray(self.kind, self.landings)>-1 ) {

			self.submit.bind('click keypress', function() { 
                                var err_msg = '';
                                var prod_code = '';
                                module_list = '|your account|payment information';

                                prod_code = $('#product_id').val();
                                
                                if (prod_code == 'J')
                                    module_list += '|billing address';
                                else {
                                    module_list += '|delivery address';

                                    if ($('#use_billing').val() == 1)
                                        module_list += '|billing address';
                                }                                

				self.required={}; 
				self.errors={}; 
					
				self.offers.validate();
                                if (getObjectLength(self.offers.errors) > 0) {
                                        err_msg = '|No offer selected';
                                }

				self.payment.validate();
                                if (getObjectLength(self.payment.errors) > 0) {
                                        err_msg = '|Invalid payment information';
                                }

				self.account.validate();
                                if (getObjectLength(self.account.errors) > 0) {
                                        err_msg = '|Invalid account information';
                                }
			
				if (self.subscription.search('student')>=0) { 
					self.academic.validate();
				}
				
				self.delivery.validate();
				self.billing.validate();
				
                                module_list = module_list.substr(1);
                                err_msg = err_msg.substr(1);

				self.errors = $.extend(self.errors, self.offers.errors);
				self.errors = $.extend(self.errors, self.account.errors);
				if (self.subscription.search('student')>=0) { 
					self.errors = $.extend(self.errors, self.academic.errors);
				}
				self.errors = $.extend(self.errors, self.payment.errors);
				self.errors = $.extend(self.errors, self.delivery.errors);
				self.errors = $.extend(self.errors, self.billing.errors);
			 
				self.required = $.extend(self.required, self.offers.required);
				self.required = $.extend(self.required, self.account.required);
				if (self.subscription.search('student')>=0) { 
					self.required = $.extend(self.required, self.academic.required);
				}
				self.required = $.extend(self.required, self.payment.required);
				self.required = $.extend(self.required, self.delivery.required);
				self.required = $.extend(self.required, self.billing.required);
				
				var len = getObjectLength(self.errors);
				self.debug('===> count: '+len);
				if (len>0) {
				      self.showErrors();

                                      if (self.kind == 'lp') {
                                          //var s=s_gi('economistcomprod');s.events='';s.prop45='';s.prop68='';s.prop69='';s.eVar65='';s.eVar66='';s.eVar67='';s.linkTrackVars='prop45,prop69,eVar65,eVar66,eVar67,events';s.linkTrackEvents='event56';s.prop45='subscription flow>complete purchase';s.prop69=module_list;s.eVar65=$('#country_name').val();s.eVar66=prod_code;s.eVar67=err_msg;s.events='event56';s.tl(this, 'o','subscription flow>complete purchase');
                                      }
                                      else if (self.kind == 'inter') {
                                          //var s=s_gi('economistcomprod');s.events='';s.prop45='';s.prop68='';s.prop69='';s.eVar65='';s.eVar66='';s.eVar67='';s.linkTrackVars='prop45,prop69,eVar65,eVar66,eVar67,events';s.linkTrackEvents='event56';s.prop45='upgrade confirmation>complete purchase';s.prop69=module_list;s.eVar65=$('#country_name').val();s.eVar66=prod_code;s.eVar67=err_msg;s.events='event56';s.tl(this, 'o','upgrade confirmation>complete purchase');
                                      }
				}else{
					// update fields (clear fields names)
					self.account.update();
					if (self.subscription.search('student')>=0) { 
						self.academic.update();
					}
					self.delivery.update();
					self.billing.update();
					self.payment.update();
				
	
					// adjust submit
					$(this).css({'cursor':'wait'});
					$(this).fadeTo(500,0.2);
			
		
					// if guard close it 
					if (self.kind == 'lp') { 
						if (typeof(guard_win)!='undefined' && guard_win!=null) { 
							//self.debug('guard win!' +   guard_win);
							guard_win.close();
						}

                                                //var s=s_gi('economistcomprod');s.events='';s.prop45='';s.prop68='';s.prop69='';s.eVar65='';s.eVar66='';s.eVar67='';s.linkTrackVars='prop45,prop69,eVar65,eVar66,eVar67,events';s.linkTrackEvents='event56';s.prop45='subscription flow>complete purchase';s.prop69=module_list;s.eVar65=$('#country_name').val();s.eVar66=prod_code;s.eVar67=err_msg;s.events='event56';s.tl(this, 'o','subscription flow>complete purchase');
					}
                                        else if (self.kind == 'inter') {
                                                //var s=s_gi('economistcomprod');s.events='';s.prop45='';s.prop68='';s.prop69='';s.eVar65='';s.eVar66='';s.eVar67='';s.linkTrackVars='prop45,prop69,eVar65,eVar66,eVar67,events';s.linkTrackEvents='event56';s.prop45='upgrade confirmation>complete purchase';s.prop69=module_list;s.eVar65=$('#country_name').val();s.eVar66=prod_code;s.eVar67=err_msg;s.events='event56';s.tl(this, 'o','upgrade confirmation>complete purchase');
                                        }
			 
					// submit form 
					self.form.submit();
				}
			});
		 
		}else if (jQuery.inArray(self.kind, self.upsells)>-1 ) {
			self.submit.bind('click keypress', function() { 
				self.required={}; 
				self.errors={}; 
					
				self.offers.validate();
				self.payment.validate();
	
										
				self.debug('validateUpsell ==> ' + self.delivery.validateUpsell);	
				if (self.delivery.validateUpsell) { 
					self.delivery.validate();
				}

				self.errors = $.extend(self.errors, self.offers.errors);
				self.errors = $.extend(self.errors, self.payment.errors);
				self.errors = $.extend(self.errors, self.delivery.errors);
			 
				self.required = $.extend(self.required, self.offers.required);
				self.required = $.extend(self.required, self.payment.required);
				self.required = $.extend(self.required, self.delivery.required);
				
				var len = getObjectLength(self.errors);
				self.debug('===> count: '+len);
				if (len>0) {
				      self.showErrors();
				}else{
					self.debug('=> submit form ...'); //return ; 
					// adjust submit
					$(this).css({'cursor':'wait'});
					$(this).fadeTo(500,0.2);
					//return ; 

                                        //var s=s_gi('economistcomprod');s.events='';s.prop45='';s.prop68='';s.prop69='';s.eVar65='';s.eVar66='';s.eVar67='';s.linkTrackVars='prop45,';s.prop45='subscription thank you>upgrade subscription';s.tl(this,'o','subscription thank you>upgrade subscription');                       

					self.form.submit();
				}
			});
		}
	}, 

	initOffers: function() { 
		var self = this;
			
		self.offers = Object.create( OfferCollection );
		self.offers.init(self);
			 
		
			var props = {}; 
			var offerid = '474USPLPPRODUCTHW0000102HCA';
			
				props['id'] = "4970301";
			
				props['url'] = "/SLG";
			
				props['zone'] = "NAM_US";
			
				props['kind'] = "lp";
			
				props['sub_type'] = "personal";
			
				props['variation'] = "474USPLP";
			
				props['pofferid'] = "";
			
				props['offerid'] = "474USPLPPRODUCTHW0000102HCA";
			
				props['country'] = "US";
			
				props['term'] = "102";
			
				props['term_kind'] = "";
			
				props['scenario'] = "";
			
				props['termkind'] = "product_h";
			
				props['sourcekey'] = "ABB31";
			
				props['currency'] = "USD";
			
				props['price'] = "279";
			
				props['paym'] = "P";
			
				props['descr'] = "";
			
				props['copy'] = "&lt;strong&gt;2 years  &lt;span style=&quot;\\\\\\\\\\\\\\\&amp;quot;color:&quot; #ff0000;\\\\\\\\\\\\\\\&quot;=&quot;&quot;&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;US$279&lt;/span&gt;&lt;/span&gt;&lt;/span&gt; save 66% BEST OFFER&lt;/strong&gt;&lt;br&gt; Four risk-free weeks plus 98 additional weeks for  US$2.74 per week";
			
				props['templ1'] = "66";
			
				props['templ2'] = "";
			
				props['templ3'] = "";
			
				props['templ4'] = "";
			
				props['templ5'] = "";
			
				props['preselected'] = "0";
			
				props['giftcode'] = "";
			
				props['termcode'] = "";
			
				props['upsellto'] = "";
			
				props['site'] = "econ";
			
				props['product'] = "H";
			
				props['pricecode'] = "W0000";
			
				props['offerbox'] = "box1";
			
				props['type'] = "";
			
				props['followup_pricecode'] = "";
			
				props['followup_price'] = "";
			
				props['followup_term'] = "";
			
				props['JournalCode'] = "ECU";
			
				props['DespatchMethod'] = "STD";
			
			
			self.debug('create object...');
			 
			// offer object 
			var offer = Object.create( Offer );
			offer.init(props);
			self.offers.add(offerid, offer);
		
		
			var props = {}; 
			var offerid = '474USPLPPRODUCTHW000051HCA';
			
				props['id'] = "4970319";
			
				props['url'] = "/SLG";
			
				props['zone'] = "NAM_US";
			
				props['kind'] = "lp";
			
				props['sub_type'] = "personal";
			
				props['variation'] = "474USPLP";
			
				props['pofferid'] = "";
			
				props['offerid'] = "474USPLPPRODUCTHW000051HCA";
			
				props['country'] = "US";
			
				props['term'] = "51";
			
				props['term_kind'] = "";
			
				props['scenario'] = "";
			
				props['termkind'] = "product_h";
			
				props['sourcekey'] = "ABB31";
			
				props['currency'] = "USD";
			
				props['price'] = "160";
			
				props['paym'] = "P";
			
				props['descr'] = "";
			
				props['copy'] = "&lt;strong&gt;&lt;/strong&gt;&lt;strong&gt;1 year  &lt;span style=&quot;\\\\\\\\\\\\\\\&amp;quot;color:&quot; #ff0000;\\\\\\\\\\\\\\\&quot;=&quot;&quot;&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;US$160&lt;/span&gt;&lt;/span&gt; save 61%&lt;/strong&gt;&lt;br&gt; Four risk-free weeks plus 47 additional weeks for US$3.14 per week";
			
				props['templ1'] = "61";
			
				props['templ2'] = "";
			
				props['templ3'] = "";
			
				props['templ4'] = "";
			
				props['templ5'] = "";
			
				props['preselected'] = "0";
			
				props['giftcode'] = "";
			
				props['termcode'] = "";
			
				props['upsellto'] = "";
			
				props['site'] = "econ";
			
				props['product'] = "H";
			
				props['pricecode'] = "W0000";
			
				props['offerbox'] = "box1";
			
				props['type'] = "";
			
				props['followup_pricecode'] = "";
			
				props['followup_price'] = "";
			
				props['followup_term'] = "";
			
				props['JournalCode'] = "ECU";
			
				props['DespatchMethod'] = "STD";
			
			
			self.debug('create object...');
			 
			// offer object 
			var offer = Object.create( Offer );
			offer.init(props);
			self.offers.add(offerid, offer);
		
		
			var props = {}; 
			var offerid = '474USPLPPRODUCTHW000012RHA';
			
				props['id'] = "4970337";
			
				props['url'] = "/SLG";
			
				props['zone'] = "NAM_US";
			
				props['kind'] = "lp";
			
				props['sub_type'] = "personal";
			
				props['variation'] = "474USPLP";
			
				props['pofferid'] = "";
			
				props['offerid'] = "474USPLPPRODUCTHW000012RHA";
			
				props['country'] = "US";
			
				props['term'] = "12R";
			
				props['term_kind'] = "";
			
				props['scenario'] = "";
			
				props['termkind'] = "product_h";
			
				props['sourcekey'] = "ABB31";
			
				props['currency'] = "USD";
			
				props['price'] = "45";
			
				props['paym'] = "A";
			
				props['descr'] = "";
			
				props['copy'] = "&lt;strong&gt;&lt;/strong&gt;&lt;strong&gt;&lt;/strong&gt;&lt;strong&gt;12 weeks auto-renewing at &lt;span style=&quot;\\\\\\\\\\\\\\\&amp;quot;color:&quot; #ff0000;\\\\\\\\\\\\\\\&quot;=&quot;&quot;&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;US$45&lt;/span&gt;&lt;/span&gt; save 53%&lt;/strong&gt;&lt;br&gt; 12 weeks auto-renewing for US$3.75 per week";
			
				props['templ1'] = "53";
			
				props['templ2'] = "";
			
				props['templ3'] = "";
			
				props['templ4'] = "";
			
				props['templ5'] = "";
			
				props['preselected'] = "0";
			
				props['giftcode'] = "";
			
				props['termcode'] = "";
			
				props['upsellto'] = "";
			
				props['site'] = "econ";
			
				props['product'] = "H";
			
				props['pricecode'] = "W0000";
			
				props['offerbox'] = "box1";
			
				props['type'] = "";
			
				props['followup_pricecode'] = "";
			
				props['followup_price'] = "";
			
				props['followup_term'] = "";
			
				props['JournalCode'] = "ECU";
			
				props['DespatchMethod'] = "STD";
			
			
			self.debug('create object...');
			 
			// offer object 
			var offer = Object.create( Offer );
			offer.init(props);
			self.offers.add(offerid, offer);
		
		
		self.offers.bindEvents();
	} , 

	attachTabEvent: function() {
		var self = this;
		 
		var tabclass = '.tabclass';
		var selected = $(tabclass + '.on');
		var sid = '';
		if (selected.length==1) {
			sid = selected.attr('id');
			var sub = sid.replace('TabCopyID', '');
			$('#sub_type').val(sid);
		}

		// mouse enter and leave 
		$(tabclass).bind('mouseenter', function() { 
			if ($(this).attr('id')!=sid ) { 
				$(this).addClass('on');
			}
		});
		$(tabclass).bind('mouseleave', function() { 
			if ($(this).attr('id')!=sid ) { 
				$(this).removeClass('on');
			}
		});
		// mouse click 
		$(tabclass).click(function() { 
			var sid =  $(this).attr('id');
			var sub = sid.replace('TabCopyID', '');
			$('#sub_type_id').val(sub);	
			$('#submitted_id').val('N');	
			$('#kind_id').val('init');	
			$('#paym_id').val('');	
		
			//self.debug('sub = ' + sub);
			if (sub.search('gift')>=0) { 
			 	if (typeof(guard_win)!='undefined' && guard_win!=null) { 
					//self.debug('guard win!' +   guard_win);
					guard_win.close();
				}
			}

                        //var s=s_gi('economistcomprod');s.events='';s.prop45='';s.prop68='';s.prop69='';s.eVar65='';s.eVar66='';s.eVar67='';s.linkTrackVars='prop45,';

                        if (sub.substr(0,8)=='personal') {
                           // s.prop45='subscription flow>regular subscription';
                           // s.tl($(this),'o','subscription flow>regular subscription');
                        }else if (sub.substr(0,7)=='student') {
                           // s.prop45='subscription flow>student subscription';
                           // s.tl($(this),'o','subscription flow>student subscription');
                        }

			self.form.submit();
		});
	}, 

	attachMediaEvent: function() {
		var self = this;
		 
		var contentclass = '.mediacontentclass';
		var lnkclass = '.medialnkclass';
		$(contentclass).hide();
		
		$(lnkclass).click(function() { 
			if (typeof($(this).attr('id'))!='undefined') { 
				var id = $(this).attr('id');	
				var bid = id.replace('Link','Body');
				var iid = id.replace('Copy','Img');
				var cid = '#'+bid ; // + 'content';
				if ($.exists(cid)) { 
					$(cid).toggle();
				}
				if ($.exists('#'+iid)) { 
					var src = $('#'+iid).attr('src');
					if (src.search('down')>=0) { 
						src=src.replace('down', 'up');
					}else{
						src=src.replace('up', 'down');
					}
					$('#'+iid).attr('src', src);
				}
			}
		});
	} , 

	attachPremiumEvents: function() {
		 var self = this; 

		// premium items links processing
		var pclass = '.premiumItemClass';
		var plinks = '.premiumItemLinks';
		if ($.exists(pclass)) { 
			$(pclass).each(function() { 
				$(this).hide();
			});
		}
		if ($.exists(plinks)) { 
			$(plinks).click(function() { 
				//$(pclass).hide();
				if (typeof($(this).attr('id'))!='undefined') { 
					var id          = $(this).attr('id');
					var txt         = $('#'+id).text();
					var idcopy      = '#'+id+'_long';
					if ($.exists(idcopy)) {
						if ($(idcopy).is(':visible')) { 
							var h = $(idcopy).height();
							//$(idcopy).hide();
							$(idcopy).fadeOut('slow', function() { } );
							$('#'+id).html('Read more').css({'color':'#73a9c3'});
							
						}else{
							//alert(idcopy +  ' hidden');
							//$(idcopy).show();
							$(idcopy).fadeIn('slow', function() { } );
							//$(idcopy).slideDown('slow', function() { } );
							$('#'+id).html('Close').css({'color':'#990000'});
						}
						//$(idcopy).toggle();
					}
				}
			});
		}

	}, 


	attachBoxEvent: function() { 
		var self = this;
	 
		var boxclass = '.boxclass';
		var selector = '#selected_box';

		var box = ''; 
		if ($.exists(selector)) {
			box = $(selector).val();
		}
		//self.debug('selected box = '+ box);
		$(boxclass).hide();
		$(boxclass).each(function() { 
			var tid = $(this).attr('id');
			//self.debug('tid='+tid);
			if (tid!=box) { 
				$(this).show();
			}
		});


		// mouseover/mouseout  prodboxclass
		$(boxclass).bind('mouseenter', function() { 
			$(this).css({'background':'#568a9f', 'color':'#FFF', 'cursor':'pointer'});
			$(this).find('.p_left').css({'background':'#568a9f'});
			$(this).find('.css3_sidebar_header').css({'color':'#fff'});
			$(this).find('.css3_sidebar_body').css({'color':'#fff'});
			$(this).find('.css3_rprice').css({'color':'#fff'});
			$(this).find(boxclass + '_img').css({'color':'#fff'});
			$(this).find(boxclass + '_title').css({'color':'#fff'});
			$(this).find(boxclass + '_copy').css({'color':'#fff'});
		});
		$(boxclass).bind('mouseleave', function() { 
			$(this).css({'background':'#fff', 'font-size':'12px', 'font-weight':'normal', 'color':'#000'});
			$(this).find('.p_left').css({'background':'#fff'});
			$(this).find('.css3_sidebar_header').css({'color':'#4a4a4a'});
			$(this).find('.css3_sidebar_body').css({'color':'#4a4a4a'});
			$(this).find('.css3_rprice').css({'color':'#f00'});
			$(this).find(boxclass + '_img').css({'color':'#4a4a4a'});
			$(this).find(boxclass + '_title').css({'color':'#4a4a4a'});
			$(this).find(boxclass + '_copy').css({'color':'#4a4a4a'});
		});

		
		// click event 
		$(boxclass).bind('click', function() { 
			var bid = $(this).attr('id');
			//self.debug('clicked box id = '+ bid);
			$(boxclass).show();
			$(this).hide();
			$(selector).val(bid);
			self.getBoxCopies(bid);
		});

                prod_code = $('#product_id').val();

                if (prod_code == 'H') {
                    //var s=s_gi('economistcomprod');s.events='';s.prop45='';s.prop68='';s.prop69='';s.eVar65='';s.eVar66='';s.eVar67='';s.linkTrackVars='prop45,prop68,';s.prop45='subscription flow>subscription type>premium';s.prop68='premium';s.tl(this,'o','subscription flow>subscription type>premium');
                } else if (prod_code == 'B' || prod_code == 'D') {
                    //var s=s_gi('economistcomprod');s.events='';s.prop45='';s.prop68='';s.prop69='';s.eVar65='';s.eVar66='';s.eVar67='';s.linkTrackVars='prop45,prop68,';s.prop45='subscription flow>subscription type>print';s.prop68='print';s.tl(this,'o','subscription flow>subscription type>print');
                }else if (prod_code == 'J') {
                    //var s=s_gi('economistcomprod');s.events='';s.prop45='';s.prop68='';s.prop69='';s.eVar65='';s.eVar66='';s.eVar67='';s.linkTrackVars='prop45,prop68,';s.prop45='subscription flow>subscription type>app';s.prop68='app';s.tl(this,'o','subscription flow>subscription type>app');
                }

	}, 

	getBoxCopies: function(box) {
	    var self = this;

	    var kind = $('#kind_id').val();
	    var sub_type = $('#sub_type_id').val();
	    var zone = $('#zone_id').val();
	    var site = $('#site_id').val();
	    var variation = $('#variation_id').val();
	    var country = $('#country').val();
	    var camp_url = $('#camp_url').val();
		
	    var params = 'action=load_copies&offerbox='+box+'&kind='+kind+'&sub_type='+sub_type+'&zone='+escape(zone)+'&site='+site+'&variation='+escape(variation) +'&country='+country+'&camp_url='+escape(camp_url);
	    var url = 'ajax_request.php'; 
	    //self.debug(params);
	
	   if ($.exists(self.main)) {  
		$(self.main).fadeTo(500, 0.2);	
	   }
	    self.debug(params);
	    var container = '#offersID'; 
	    $.ajax({
		type: "POST",
		url: url,
		data: params,
		success: function(response){
		      var data = jQuery.parseJSON(response);
		      if (typeof(data.error)!='undefined') { 
			      alert(data.error);
			      return false;
		      }
		      if ($.exists(self.main)) {  
				//self.debug('fade out...');
				$(self.main).fadeTo(500, 1);	
		      }
		      if (typeof(data.copies)!='undefined') { 
			      self.debug('yes copies..');
			      var s = '';
			      $.each(data.copies, function(key, props) {
					self.debug('key = ' +key);
				      var value = (typeof(props.copy)!='undefined') ? $.trim(props.copy) : ''; 
				      var type  = (typeof(props.type)!='undefined') ? props.type : ''; 
				      if (type.indexOf('iframe')!=-1) {
					 if (typeof(window.atob)!='undefined') { 
					      value = window.atob(value); 
					 }else{
					      value = base64.decode(value); 
					 }
				      }
				      if (type.indexOf('pixel')!=-1) {
					      if (typeof(window.atob)!='undefined') { 
						      value = window.atob(value); 
					      }else{
						      value = base64.decode(value); 
					      }
					       value = escape(value);
					       //alert(value);
					        self.debug('type = ' + type +'; pixel = ' + value);
				      }
				      s += key + ': ' +type + ' : '  + value +'\n';
				      var ckey = '#'+key;
				      var hkey = ckey + '_hidden';
				      if ($.exists(ckey)) { 
						self.debug('ckey ' +ckey +' exists.');
						if (key.search('refundLinkCopy')>=0 || key.search('audioLinkCopy')>=0) {
							self.debug('ckey='+ckey);
							var v = $.trim(value);
							v = v.replace(/\<br>$/, '');
							v = v.replace(/<br\s+\/>$/, '');
										
							//self.debug('value=['+value+']');
							//self.debug('v=['+v+']');
						
					       		$(ckey).html(v);
							if (v != '') { 
					       			$(ckey).append('&nbsp;<img id="refundLinkImg" src="/gfx/arrow_down.gif" border=0>');
							}
						}else if (key.search('directDebitTitle')>=0 ) { 
					       		$(ckey).html(value);
							if (value != '') { 
					       			$(ckey).append('&nbsp;<img id="ddLinkImg" src="/gfx/arrow_down.gif" border=0>');
							}
						}else{
							self.debug('store value of ckey ...');
				      			if (type.indexOf('pixel')!=-1) {
					       			//$(ckey).html(value).hide();
							}else{
					       		$(ckey).html(value);
							}
						}
					}else{
						self.debug('ckey ' +ckey +' not found.');
							
				      }
				      if ($.exists(hkey)) { 
					      $(hkey).val(value);
				      }
	
			      });
			      //self.debug(s);
		    	      if ($.exists('.mediacontentclass')) {
				$('.mediacontentclass').hide();
			      }
			      self.debug('done copies..');
		      }
		      if (typeof(data.offer_tpl)!='undefined') { 
			      self.debug('yes offer_tpl..');
			 if ($.exists(container)) {
				$(container).html(data.offer_tpl);
				if (typeof(data.offers)!='undefined') { 
			      		self.debug('yes offers..');
					$.each(data.offers, function(ind, props) { 	
						var offerid = props.offerid;
						self.debug(ind + ':' + offerid);
						self.debug('create object...');
						// offer object 
						var offer = Object.create( Offer );
						offer.init(props);
						self.offers.add(offerid, offer);
					});
					self.offers.bindEvents();

                                        prod_code = $('#product_id').val();
                                        if (prod_code == 'H') {
                                            //var s=s_gi('economistcomprod');s.events='';s.prop45='';s.prop68='';s.prop69='';s.eVar65='';s.eVar66='';s.eVar67='';s.linkTrackVars='prop45,prop68,';s.prop45='subscription flow>subscription type>premium';s.prop68='premium';s.tl(this,'o','subscription flow>subscription type>premium');
                                        } else if (prod_code == 'B' || prod_code == 'D') {
                                            //var s=s_gi('economistcomprod');s.events='';s.prop45='';s.prop68='';s.prop69='';s.eVar65='';s.eVar66='';s.eVar67='';s.linkTrackVars='prop45,prop68,';s.prop45='subscription flow>subscription type>print';s.prop68='print';s.tl(this,'o','subscription flow>subscription type>print');
                                        }else if (prod_code == 'J') {
                                            //var s=s_gi('economistcomprod');s.events='';s.prop45='';s.prop68='';s.prop69='';s.eVar65='';s.eVar66='';s.eVar67='';s.linkTrackVars='prop45,prop68,';s.prop45='subscription flow>subscription type>app';s.prop68='app';s.tl(this,'o','subscription flow>subscription type>app');
                                        }
				}
			 }

		      }
		      if ($.exists(self.main)) {  
				//self.debug('fade out...');
				$(self.main).fadeTo(500, 1);	
		      }
		}
	    });

	}, 

	showErrors: function() { 
                var self = this;
		 
                self.debug('***********************************************');
                self.debug('Page::showErrors()...');
                self.debug('***********************************************');
                var rscroll = '';
                var escroll = '';
                var scroll = '';
                $.each(self.required, function(f, n) {
                        $(f).css({'border':'1px solid #cb272c','color':'#cb272c'}).val(n);
                        if (rscroll=='') { rscroll = f; } 
                });     
                $.each(self.errors, function(f, e) {
                        var field = f+'_req';
                        if ($.exists(field)) {
                                self.debug('> ' + field + ':'+e);
                                $(field).css({'color':'#cb272c', 'font-size':'11px'}).html(e);
                                if (escroll=='') { escroll = field; } 
                        }
                });     
		if (escroll!='') { scroll=escroll; } 
		else if (rscroll!='') { scroll=rscroll; } 
		
                $('html,body').animate({ scrollTop: $(scroll).offset().top-5}, 'slow');
        }, 
                
	debug: function(msg) { 
	
	}


}; 


// start  
$(document).ready(function() { 
	// page object
	var kind = $.exists('#kind_id') ? $('#kind_id').val() : ''; 
		
	page = Object.create( Page );
	page.init(kind);
});


</script>
 




</body>